function Ky(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function bg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pd(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var vg={exports:{}},al={},wg={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=Symbol.for("react.element"),Yy=Symbol.for("react.portal"),Jy=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),ex=Symbol.for("react.context"),tx=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),nx=Symbol.for("react.memo"),sx=Symbol.for("react.lazy"),eh=Symbol.iterator;function ax(e){return e===null||typeof e!="object"?null:(e=eh&&e[eh]||e["@@iterator"],typeof e=="function"?e:null)}var kg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jg=Object.assign,Ng={};function sa(e,t,r){this.props=e,this.context=t,this.refs=Ng,this.updater=r||kg}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _g(){}_g.prototype=sa.prototype;function Od(e,t,r){this.props=e,this.context=t,this.refs=Ng,this.updater=r||kg}var Md=Od.prototype=new _g;Md.constructor=Od;jg(Md,sa.prototype);Md.isPureReactComponent=!0;var th=Array.isArray,Sg=Object.prototype.hasOwnProperty,Dd={current:null},Eg={key:!0,ref:!0,__self:!0,__source:!0};function Cg(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Sg.call(t,n)&&!Eg.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:xo,type:e,key:o,ref:i,props:a,_owner:Dd.current}}function ox(e,t){return{$$typeof:xo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rd(e){return typeof e=="object"&&e!==null&&e.$$typeof===xo}function ix(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var rh=/\/+/g;function Ml(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ix(""+e.key):t.toString(36)}function ci(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case xo:case Yy:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+Ml(i,0):n,th(a)?(r="",e!=null&&(r=e.replace(rh,"$&/")+"/"),ci(a,t,r,"",function(d){return d})):a!=null&&(Rd(a)&&(a=ox(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(rh,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",th(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Ml(o,l);i+=ci(o,t,r,c,a)}else if(c=ax(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Ml(o,l++),i+=ci(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function To(e,t,r){if(e==null)return e;var n=[],a=0;return ci(e,n,"","",function(o){return t.call(r,o,a++)}),n}function lx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},di={transition:null},cx={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:di,ReactCurrentOwner:Dd};function Tg(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:To,forEach:function(e,t,r){To(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return To(e,function(){t++}),t},toArray:function(e){return To(e,function(t){return t})||[]},only:function(e){if(!Rd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=sa;Fe.Fragment=Jy;Fe.Profiler=Xy;Fe.PureComponent=Od;Fe.StrictMode=Qy;Fe.Suspense=rx;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cx;Fe.act=Tg;Fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jg({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Dd.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Sg.call(t,c)&&!Eg.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:xo,type:e.type,key:a,ref:o,props:n,_owner:i}};Fe.createContext=function(e){return e={$$typeof:ex,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zy,_context:e},e.Consumer=e};Fe.createElement=Cg;Fe.createFactory=function(e){var t=Cg.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:tx,render:e}};Fe.isValidElement=Rd;Fe.lazy=function(e){return{$$typeof:sx,_payload:{_status:-1,_result:e},_init:lx}};Fe.memo=function(e,t){return{$$typeof:nx,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=di.transition;di.transition={};try{e()}finally{di.transition=t}};Fe.unstable_act=Tg;Fe.useCallback=function(e,t){return qt.current.useCallback(e,t)};Fe.useContext=function(e){return qt.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return qt.current.useEffect(e,t)};Fe.useId=function(){return qt.current.useId()};Fe.useImperativeHandle=function(e,t,r){return qt.current.useImperativeHandle(e,t,r)};Fe.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return qt.current.useMemo(e,t)};Fe.useReducer=function(e,t,r){return qt.current.useReducer(e,t,r)};Fe.useRef=function(e){return qt.current.useRef(e)};Fe.useState=function(e){return qt.current.useState(e)};Fe.useSyncExternalStore=function(e,t,r){return qt.current.useSyncExternalStore(e,t,r)};Fe.useTransition=function(){return qt.current.useTransition()};Fe.version="18.3.1";wg.exports=Fe;var k=wg.exports;const He=bg(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=k,ux=Symbol.for("react.element"),hx=Symbol.for("react.fragment"),gx=Object.prototype.hasOwnProperty,fx=dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mx={key:!0,ref:!0,__self:!0,__source:!0};function Ag(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)gx.call(t,n)&&!mx.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:ux,type:e,key:o,ref:i,props:a,_owner:fx.current}}al.Fragment=hx;al.jsx=Ag;al.jsxs=Ag;vg.exports=al;var s=vg.exports,kc={},Pg={exports:{}},ur={},Og={exports:{}},Mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,A){var B=z.length;z.push(A);e:for(;0<B;){var U=B-1>>>1,G=z[U];if(0<a(G,A))z[U]=A,z[B]=G,B=U;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var A=z[0],B=z.pop();if(B!==A){z[0]=B;e:for(var U=0,G=z.length,ye=G>>>1;U<ye;){var _e=2*(U+1)-1,Me=z[_e],Oe=_e+1,X=z[Oe];if(0>a(Me,B))Oe<G&&0>a(X,Me)?(z[U]=X,z[Oe]=B,U=Oe):(z[U]=Me,z[_e]=B,U=_e);else if(Oe<G&&0>a(X,B))z[U]=X,z[Oe]=B,U=Oe;else break e}}return A}function a(z,A){var B=z.sortIndex-A.sortIndex;return B!==0?B:z.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,p=null,h=3,y=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(z){for(var A=r(d);A!==null;){if(A.callback===null)n(d);else if(A.startTime<=z)n(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(d)}}function b(z){if(v=!1,m(z),!x)if(r(c)!==null)x=!0,W(_);else{var A=r(d);A!==null&&L(b,A.startTime-z)}}function _(z,A){x=!1,v&&(v=!1,f(E),E=-1),y=!0;var B=h;try{for(m(A),p=r(c);p!==null&&(!(p.expirationTime>A)||z&&!K());){var U=p.callback;if(typeof U=="function"){p.callback=null,h=p.priorityLevel;var G=U(p.expirationTime<=A);A=e.unstable_now(),typeof G=="function"?p.callback=G:p===r(c)&&n(c),m(A)}else n(c);p=r(c)}if(p!==null)var ye=!0;else{var _e=r(d);_e!==null&&L(b,_e.startTime-A),ye=!1}return ye}finally{p=null,h=B,y=!1}}var j=!1,N=null,E=-1,$=5,O=-1;function K(){return!(e.unstable_now()-O<$)}function I(){if(N!==null){var z=e.unstable_now();O=z;var A=!0;try{A=N(!0,z)}finally{A?ee():(j=!1,N=null)}}else j=!1}var ee;if(typeof g=="function")ee=function(){g(I)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,re=le.port2;le.port1.onmessage=I,ee=function(){re.postMessage(null)}}else ee=function(){w(I,0)};function W(z){N=z,j||(j=!0,ee())}function L(z,A){E=w(function(){z(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,W(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var B=h;h=A;try{return z()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,A){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=h;h=z;try{return A()}finally{h=B}},e.unstable_scheduleCallback=function(z,A,B){var U=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,z={id:u++,callback:A,priorityLevel:z,startTime:B,expirationTime:G,sortIndex:-1},B>U?(z.sortIndex=B,t(d,z),r(c)===null&&z===r(d)&&(v?(f(E),E=-1):v=!0,L(b,B-U))):(z.sortIndex=G,t(c,z),x||y||(x=!0,W(_))),z},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(z){var A=h;return function(){var B=h;h=A;try{return z.apply(this,arguments)}finally{h=B}}}})(Mg);Og.exports=Mg;var px=Og.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=k,dr=px;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dg=new Set,Wa={};function ls(e,t){Gs(e,t),Gs(e+"Capture",t)}function Gs(e,t){for(Wa[e]=t,e=0;e<t.length;e++)Dg.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=Object.prototype.hasOwnProperty,xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nh={},sh={};function bx(e){return jc.call(sh,e)?!0:jc.call(nh,e)?!1:xx.test(e)?sh[e]=!0:(nh[e]=!0,!1)}function vx(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wx(e,t,r,n){if(t===null||typeof t>"u"||vx(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vt(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Id=/[\-:]([a-z])/g;function $d(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Id,$d);Et[t]=new Vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Id,$d);Et[t]=new Vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Id,$d);Et[t]=new Vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Vt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ld(e,t,r,n){var a=Et.hasOwnProperty(t)?Et[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wx(t,r,a,n)&&(r=null),n||a===null?bx(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var dn=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ao=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),zd=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),Rg=Symbol.for("react.provider"),Ig=Symbol.for("react.context"),Fd=Symbol.for("react.forward_ref"),_c=Symbol.for("react.suspense"),Sc=Symbol.for("react.suspense_list"),Ud=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),$g=Symbol.for("react.offscreen"),ah=Symbol.iterator;function ga(e){return e===null||typeof e!="object"?null:(e=ah&&e[ah]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,Dl;function ka(e){if(Dl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Dl=t&&t[1]||""}return`
`+Dl+e}var Rl=!1;function Il(e,t){if(!e||Rl)return"";Rl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Rl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ka(e):""}function kx(e){switch(e.tag){case 5:return ka(e.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return e=Il(e.type,!1),e;case 11:return e=Il(e.type.render,!1),e;case 1:return e=Il(e.type,!0),e;default:return""}}function Ec(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _s:return"Fragment";case Ns:return"Portal";case Nc:return"Profiler";case zd:return"StrictMode";case _c:return"Suspense";case Sc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ig:return(e.displayName||"Context")+".Consumer";case Rg:return(e._context.displayName||"Context")+".Provider";case Fd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ud:return t=e.displayName||null,t!==null?t:Ec(e.type)||"Memo";case pn:t=e._payload,e=e._init;try{return Ec(e(t))}catch{}}return null}function jx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ec(t);case 8:return t===zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nx(e){var t=Lg(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){e._valueTracker||(e._valueTracker=Nx(e))}function zg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lg(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cc(e,t){var r=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function oh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Mn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fg(e,t){t=t.checked,t!=null&&Ld(e,"checked",t,!1)}function Tc(e,t){Fg(e,t);var r=Mn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ac(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ac(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ih(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ac(e,t,r){(t!=="number"||_i(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ja=Array.isArray;function zs(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Mn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Pc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Z(92));if(ja(r)){if(1<r.length)throw Error(Z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Mn(r)}}function Ug(e,t){var r=Mn(t.value),n=Mn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ch(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oo,Hg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_x=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(e){_x.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ta[t]=Ta[e]})});function Wg(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ta.hasOwnProperty(e)&&Ta[e]?(""+t).trim():t+"px"}function qg(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Wg(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Sx=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mc(e,t){if(t){if(Sx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function Dc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rc=null;function Bd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ic=null,Fs=null,Us=null;function dh(e){if(e=wo(e)){if(typeof Ic!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=dl(t),Ic(e.stateNode,e.type,t))}}function Vg(e){Fs?Us?Us.push(e):Us=[e]:Fs=e}function Gg(){if(Fs){var e=Fs,t=Us;if(Us=Fs=null,dh(e),t)for(e=0;e<t.length;e++)dh(t[e])}}function Kg(e,t){return e(t)}function Yg(){}var $l=!1;function Jg(e,t,r){if($l)return e(t,r);$l=!0;try{return Kg(e,t,r)}finally{$l=!1,(Fs!==null||Us!==null)&&(Yg(),Gg())}}function Va(e,t){var r=e.stateNode;if(r===null)return null;var n=dl(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Z(231,t,typeof r));return r}var $c=!1;if(an)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){$c=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{$c=!1}function Ex(e,t,r,n,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Aa=!1,Si=null,Ei=!1,Lc=null,Cx={onError:function(e){Aa=!0,Si=e}};function Tx(e,t,r,n,a,o,i,l,c){Aa=!1,Si=null,Ex.apply(Cx,arguments)}function Ax(e,t,r,n,a,o,i,l,c){if(Tx.apply(this,arguments),Aa){if(Aa){var d=Si;Aa=!1,Si=null}else throw Error(Z(198));Ei||(Ei=!0,Lc=d)}}function cs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uh(e){if(cs(e)!==e)throw Error(Z(188))}function Px(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return uh(a),e;if(o===n)return uh(a),t;o=o.sibling}throw Error(Z(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i)throw Error(Z(189))}}if(r.alternate!==n)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?e:t}function Xg(e){return e=Px(e),e!==null?Zg(e):null}function Zg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zg(e);if(t!==null)return t;e=e.sibling}return null}var ef=dr.unstable_scheduleCallback,hh=dr.unstable_cancelCallback,Ox=dr.unstable_shouldYield,Mx=dr.unstable_requestPaint,gt=dr.unstable_now,Dx=dr.unstable_getCurrentPriorityLevel,Hd=dr.unstable_ImmediatePriority,tf=dr.unstable_UserBlockingPriority,Ci=dr.unstable_NormalPriority,Rx=dr.unstable_LowPriority,rf=dr.unstable_IdlePriority,ol=null,qr=null;function Ix(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(ol,e,void 0,(e.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:zx,$x=Math.log,Lx=Math.LN2;function zx(e){return e>>>=0,e===0?32:31-($x(e)/Lx|0)|0}var Mo=64,Do=4194304;function Na(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ti(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=Na(l):(o&=i,o!==0&&(n=Na(o)))}else i=r&~a,i!==0?n=Na(i):o!==0&&(n=Na(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Rr(t),a=1<<r,n|=e[r],t&=~a;return n}function Fx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ux(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Rr(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=Fx(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function zc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nf(){var e=Mo;return Mo<<=1,!(Mo&4194240)&&(Mo=64),e}function Ll(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rr(t),e[t]=r}function Bx(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Rr(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function Wd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Rr(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ke=0;function sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var af,qd,of,lf,cf,Fc=!1,Ro=[],Nn=null,_n=null,Sn=null,Ga=new Map,Ka=new Map,bn=[],Hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gh(e,t){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Ga.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(t.pointerId)}}function ma(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=wo(t),t!==null&&qd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Wx(e,t,r,n,a){switch(t){case"focusin":return Nn=ma(Nn,e,t,r,n,a),!0;case"dragenter":return _n=ma(_n,e,t,r,n,a),!0;case"mouseover":return Sn=ma(Sn,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return Ga.set(o,ma(Ga.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Ka.set(o,ma(Ka.get(o)||null,e,t,r,n,a)),!0}return!1}function df(e){var t=Kn(e.target);if(t!==null){var r=cs(t);if(r!==null){if(t=r.tag,t===13){if(t=Qg(r),t!==null){e.blockedOn=t,cf(e.priority,function(){of(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Uc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Rc=n,r.target.dispatchEvent(n),Rc=null}else return t=wo(r),t!==null&&qd(t),e.blockedOn=r,!1;t.shift()}return!0}function fh(e,t,r){ui(e)&&r.delete(t)}function qx(){Fc=!1,Nn!==null&&ui(Nn)&&(Nn=null),_n!==null&&ui(_n)&&(_n=null),Sn!==null&&ui(Sn)&&(Sn=null),Ga.forEach(fh),Ka.forEach(fh)}function pa(e,t){e.blockedOn===t&&(e.blockedOn=null,Fc||(Fc=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,qx)))}function Ya(e){function t(a){return pa(a,e)}if(0<Ro.length){pa(Ro[0],e);for(var r=1;r<Ro.length;r++){var n=Ro[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Nn!==null&&pa(Nn,e),_n!==null&&pa(_n,e),Sn!==null&&pa(Sn,e),Ga.forEach(t),Ka.forEach(t),r=0;r<bn.length;r++)n=bn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<bn.length&&(r=bn[0],r.blockedOn===null);)df(r),r.blockedOn===null&&bn.shift()}var Bs=dn.ReactCurrentBatchConfig,Ai=!0;function Vx(e,t,r,n){var a=Ke,o=Bs.transition;Bs.transition=null;try{Ke=1,Vd(e,t,r,n)}finally{Ke=a,Bs.transition=o}}function Gx(e,t,r,n){var a=Ke,o=Bs.transition;Bs.transition=null;try{Ke=4,Vd(e,t,r,n)}finally{Ke=a,Bs.transition=o}}function Vd(e,t,r,n){if(Ai){var a=Uc(e,t,r,n);if(a===null)Kl(e,t,n,Pi,r),gh(e,n);else if(Wx(a,e,t,r,n))n.stopPropagation();else if(gh(e,n),t&4&&-1<Hx.indexOf(e)){for(;a!==null;){var o=wo(a);if(o!==null&&af(o),o=Uc(e,t,r,n),o===null&&Kl(e,t,n,Pi,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Kl(e,t,n,null,r)}}var Pi=null;function Uc(e,t,r,n){if(Pi=null,e=Bd(n),e=Kn(e),e!==null)if(t=cs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qg(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pi=e,null}function uf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dx()){case Hd:return 1;case tf:return 4;case Ci:case Rx:return 16;case rf:return 536870912;default:return 16}default:return 16}}var kn=null,Gd=null,hi=null;function hf(){if(hi)return hi;var e,t=Gd,r=t.length,n,a="value"in kn?kn.value:kn.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return hi=a.slice(e,1<n?1-n:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Io(){return!0}function mh(){return!1}function hr(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Io:mh,this.isPropagationStopped=mh,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),t}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kd=hr(aa),vo=at({},aa,{view:0,detail:0}),Kx=hr(vo),zl,Fl,ya,il=at({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ya&&(ya&&e.type==="mousemove"?(zl=e.screenX-ya.screenX,Fl=e.screenY-ya.screenY):Fl=zl=0,ya=e),zl)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),ph=hr(il),Yx=at({},il,{dataTransfer:0}),Jx=hr(Yx),Qx=at({},vo,{relatedTarget:0}),Ul=hr(Qx),Xx=at({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Zx=hr(Xx),eb=at({},aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tb=hr(eb),rb=at({},aa,{data:0}),yh=hr(rb),nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ab={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ob(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ab[e])?!!t[e]:!1}function Yd(){return ob}var ib=at({},vo,{key:function(e){if(e.key){var t=nb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lb=hr(ib),cb=at({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xh=hr(cb),db=at({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),ub=hr(db),hb=at({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),gb=hr(hb),fb=at({},il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mb=hr(fb),pb=[9,13,27,32],Jd=an&&"CompositionEvent"in window,Pa=null;an&&"documentMode"in document&&(Pa=document.documentMode);var yb=an&&"TextEvent"in window&&!Pa,gf=an&&(!Jd||Pa&&8<Pa&&11>=Pa),bh=String.fromCharCode(32),vh=!1;function ff(e,t){switch(e){case"keyup":return pb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ss=!1;function xb(e,t){switch(e){case"compositionend":return mf(t);case"keypress":return t.which!==32?null:(vh=!0,bh);case"textInput":return e=t.data,e===bh&&vh?null:e;default:return null}}function bb(e,t){if(Ss)return e==="compositionend"||!Jd&&ff(e,t)?(e=hf(),hi=Gd=kn=null,Ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gf&&t.locale!=="ko"?null:t.data;default:return null}}var vb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vb[e.type]:t==="textarea"}function pf(e,t,r,n){Vg(n),t=Oi(t,"onChange"),0<t.length&&(r=new Kd("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Oa=null,Ja=null;function wb(e){Ef(e,0)}function ll(e){var t=Ts(e);if(zg(t))return e}function kb(e,t){if(e==="change")return t}var yf=!1;if(an){var Bl;if(an){var Hl="oninput"in document;if(!Hl){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),Hl=typeof kh.oninput=="function"}Bl=Hl}else Bl=!1;yf=Bl&&(!document.documentMode||9<document.documentMode)}function jh(){Oa&&(Oa.detachEvent("onpropertychange",xf),Ja=Oa=null)}function xf(e){if(e.propertyName==="value"&&ll(Ja)){var t=[];pf(t,Ja,e,Bd(e)),Jg(wb,t)}}function jb(e,t,r){e==="focusin"?(jh(),Oa=t,Ja=r,Oa.attachEvent("onpropertychange",xf)):e==="focusout"&&jh()}function Nb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ll(Ja)}function _b(e,t){if(e==="click")return ll(t)}function Sb(e,t){if(e==="input"||e==="change")return ll(t)}function Eb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $r=typeof Object.is=="function"?Object.is:Eb;function Qa(e,t){if($r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!jc.call(t,a)||!$r(e[a],t[a]))return!1}return!0}function Nh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _h(e,t){var r=Nh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nh(r)}}function bf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vf(){for(var e=window,t=_i();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_i(e.document)}return t}function Qd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cb(e){var t=vf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&bf(r.ownerDocument.documentElement,r)){if(n!==null&&Qd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=_h(r,o);var i=_h(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tb=an&&"documentMode"in document&&11>=document.documentMode,Es=null,Bc=null,Ma=null,Hc=!1;function Sh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hc||Es==null||Es!==_i(n)||(n=Es,"selectionStart"in n&&Qd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ma&&Qa(Ma,n)||(Ma=n,n=Oi(Bc,"onSelect"),0<n.length&&(t=new Kd("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Es)))}function $o(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cs={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},Wl={},wf={};an&&(wf=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function cl(e){if(Wl[e])return Wl[e];if(!Cs[e])return e;var t=Cs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wf)return Wl[e]=t[r];return e}var kf=cl("animationend"),jf=cl("animationiteration"),Nf=cl("animationstart"),_f=cl("transitionend"),Sf=new Map,Eh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){Sf.set(e,t),ls(t,[e])}for(var ql=0;ql<Eh.length;ql++){var Vl=Eh[ql],Ab=Vl.toLowerCase(),Pb=Vl[0].toUpperCase()+Vl.slice(1);Rn(Ab,"on"+Pb)}Rn(kf,"onAnimationEnd");Rn(jf,"onAnimationIteration");Rn(Nf,"onAnimationStart");Rn("dblclick","onDoubleClick");Rn("focusin","onFocus");Rn("focusout","onBlur");Rn(_f,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ob=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Ch(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Ax(n,t,void 0,e),e.currentTarget=null}function Ef(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;Ch(a,l,d),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;Ch(a,l,d),o=c}}}if(Ei)throw e=Lc,Ei=!1,Lc=null,e}function Ze(e,t){var r=t[Kc];r===void 0&&(r=t[Kc]=new Set);var n=e+"__bubble";r.has(n)||(Cf(t,e,2,!1),r.add(n))}function Gl(e,t,r){var n=0;t&&(n|=4),Cf(r,e,n,t)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Xa(e){if(!e[Lo]){e[Lo]=!0,Dg.forEach(function(r){r!=="selectionchange"&&(Ob.has(r)||Gl(r,!1,e),Gl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lo]||(t[Lo]=!0,Gl("selectionchange",!1,t))}}function Cf(e,t,r,n){switch(uf(t)){case 1:var a=Vx;break;case 4:a=Gx;break;default:a=Vd}r=a.bind(null,t,r,e),a=void 0,!$c||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kl(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Kn(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}Jg(function(){var d=o,u=Bd(r),p=[];e:{var h=Sf.get(e);if(h!==void 0){var y=Kd,x=e;switch(e){case"keypress":if(gi(r)===0)break e;case"keydown":case"keyup":y=lb;break;case"focusin":x="focus",y=Ul;break;case"focusout":x="blur",y=Ul;break;case"beforeblur":case"afterblur":y=Ul;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Jx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ub;break;case kf:case jf:case Nf:y=Zx;break;case _f:y=gb;break;case"scroll":y=Kx;break;case"wheel":y=mb;break;case"copy":case"cut":case"paste":y=tb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xh}var v=(t&4)!==0,w=!v&&e==="scroll",f=v?h!==null?h+"Capture":null:h;v=[];for(var g=d,m;g!==null;){m=g;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,f!==null&&(b=Va(g,f),b!=null&&v.push(Za(g,b,m)))),w)break;g=g.return}0<v.length&&(h=new y(h,x,null,r,u),p.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&r!==Rc&&(x=r.relatedTarget||r.fromElement)&&(Kn(x)||x[on]))break e;if((y||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=d,x=x?Kn(x):null,x!==null&&(w=cs(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=d),y!==x)){if(v=ph,b="onMouseLeave",f="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=xh,b="onPointerLeave",f="onPointerEnter",g="pointer"),w=y==null?h:Ts(y),m=x==null?h:Ts(x),h=new v(b,g+"leave",y,r,u),h.target=w,h.relatedTarget=m,b=null,Kn(u)===d&&(v=new v(f,g+"enter",x,r,u),v.target=m,v.relatedTarget=w,b=v),w=b,y&&x)t:{for(v=y,f=x,g=0,m=v;m;m=gs(m))g++;for(m=0,b=f;b;b=gs(b))m++;for(;0<g-m;)v=gs(v),g--;for(;0<m-g;)f=gs(f),m--;for(;g--;){if(v===f||f!==null&&v===f.alternate)break t;v=gs(v),f=gs(f)}v=null}else v=null;y!==null&&Th(p,h,y,v,!1),x!==null&&w!==null&&Th(p,w,x,v,!0)}}e:{if(h=d?Ts(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var _=kb;else if(wh(h))if(yf)_=Sb;else{_=Nb;var j=jb}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=_b);if(_&&(_=_(e,d))){pf(p,_,r,u);break e}j&&j(e,h,d),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Ac(h,"number",h.value)}switch(j=d?Ts(d):window,e){case"focusin":(wh(j)||j.contentEditable==="true")&&(Es=j,Bc=d,Ma=null);break;case"focusout":Ma=Bc=Es=null;break;case"mousedown":Hc=!0;break;case"contextmenu":case"mouseup":case"dragend":Hc=!1,Sh(p,r,u);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":Sh(p,r,u)}var N;if(Jd)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ss?ff(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(gf&&r.locale!=="ko"&&(Ss||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ss&&(N=hf()):(kn=u,Gd="value"in kn?kn.value:kn.textContent,Ss=!0)),j=Oi(d,E),0<j.length&&(E=new yh(E,e,null,r,u),p.push({event:E,listeners:j}),N?E.data=N:(N=mf(r),N!==null&&(E.data=N)))),(N=yb?xb(e,r):bb(e,r))&&(d=Oi(d,"onBeforeInput"),0<d.length&&(u=new yh("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=N))}Ef(p,t)})}function Za(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Oi(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Va(e,r),o!=null&&n.unshift(Za(e,o,a)),o=Va(e,t),o!=null&&n.push(Za(e,o,a))),e=e.return}return n}function gs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Th(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Va(r,o),c!=null&&i.unshift(Za(r,c,l))):a||(c=Va(r,o),c!=null&&i.push(Za(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Mb=/\r\n?/g,Db=/\u0000|\uFFFD/g;function Ah(e){return(typeof e=="string"?e:""+e).replace(Mb,`
`).replace(Db,"")}function zo(e,t,r){if(t=Ah(t),Ah(e)!==t&&r)throw Error(Z(425))}function Mi(){}var Wc=null,qc=null;function Vc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gc=typeof setTimeout=="function"?setTimeout:void 0,Rb=typeof clearTimeout=="function"?clearTimeout:void 0,Ph=typeof Promise=="function"?Promise:void 0,Ib=typeof queueMicrotask=="function"?queueMicrotask:typeof Ph<"u"?function(e){return Ph.resolve(null).then(e).catch($b)}:Gc;function $b(e){setTimeout(function(){throw e})}function Yl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Ya(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ya(t)}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Oh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Hr="__reactFiber$"+oa,eo="__reactProps$"+oa,on="__reactContainer$"+oa,Kc="__reactEvents$"+oa,Lb="__reactListeners$"+oa,zb="__reactHandles$"+oa;function Kn(e){var t=e[Hr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[on]||r[Hr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Oh(e);e!==null;){if(r=e[Hr])return r;e=Oh(e)}return t}e=r,r=e.parentNode}return null}function wo(e){return e=e[Hr]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function dl(e){return e[eo]||null}var Yc=[],As=-1;function In(e){return{current:e}}function et(e){0>As||(e.current=Yc[As],Yc[As]=null,As--)}function Qe(e,t){As++,Yc[As]=e.current,e.current=t}var Dn={},It=In(Dn),Xt=In(!1),es=Dn;function Ks(e,t){var r=e.type.contextTypes;if(!r)return Dn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zt(e){return e=e.childContextTypes,e!=null}function Di(){et(Xt),et(It)}function Mh(e,t,r){if(It.current!==Dn)throw Error(Z(168));Qe(It,t),Qe(Xt,r)}function Tf(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Z(108,jx(e)||"Unknown",a));return at({},r,n)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dn,es=It.current,Qe(It,e),Qe(Xt,Xt.current),!0}function Dh(e,t,r){var n=e.stateNode;if(!n)throw Error(Z(169));r?(e=Tf(e,t,es),n.__reactInternalMemoizedMergedChildContext=e,et(Xt),et(It),Qe(It,e)):et(Xt),Qe(Xt,r)}var en=null,ul=!1,Jl=!1;function Af(e){en===null?en=[e]:en.push(e)}function Fb(e){ul=!0,Af(e)}function $n(){if(!Jl&&en!==null){Jl=!0;var e=0,t=Ke;try{var r=en;for(Ke=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}en=null,ul=!1}catch(a){throw en!==null&&(en=en.slice(e+1)),ef(Hd,$n),a}finally{Ke=t,Jl=!1}}return null}var Ps=[],Os=0,Ii=null,$i=0,fr=[],mr=0,ts=null,tn=1,rn="";function Un(e,t){Ps[Os++]=$i,Ps[Os++]=Ii,Ii=e,$i=t}function Pf(e,t,r){fr[mr++]=tn,fr[mr++]=rn,fr[mr++]=ts,ts=e;var n=tn;e=rn;var a=32-Rr(n)-1;n&=~(1<<a),r+=1;var o=32-Rr(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,tn=1<<32-Rr(t)+a|r<<a|n,rn=o+e}else tn=1<<o|r<<a|n,rn=e}function Xd(e){e.return!==null&&(Un(e,1),Pf(e,1,0))}function Zd(e){for(;e===Ii;)Ii=Ps[--Os],Ps[Os]=null,$i=Ps[--Os],Ps[Os]=null;for(;e===ts;)ts=fr[--mr],fr[mr]=null,rn=fr[--mr],fr[mr]=null,tn=fr[--mr],fr[mr]=null}var lr=null,ir=null,tt=!1,Mr=null;function Of(e,t){var r=pr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Rh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lr=e,ir=En(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lr=e,ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ts!==null?{id:tn,overflow:rn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=pr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,lr=e,ir=null,!0):!1;default:return!1}}function Jc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qc(e){if(tt){var t=ir;if(t){var r=t;if(!Rh(e,t)){if(Jc(e))throw Error(Z(418));t=En(r.nextSibling);var n=lr;t&&Rh(e,t)?Of(n,r):(e.flags=e.flags&-4097|2,tt=!1,lr=e)}}else{if(Jc(e))throw Error(Z(418));e.flags=e.flags&-4097|2,tt=!1,lr=e}}}function Ih(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lr=e}function Fo(e){if(e!==lr)return!1;if(!tt)return Ih(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vc(e.type,e.memoizedProps)),t&&(t=ir)){if(Jc(e))throw Mf(),Error(Z(418));for(;t;)Of(e,t),t=En(t.nextSibling)}if(Ih(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ir=En(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ir=null}}else ir=lr?En(e.stateNode.nextSibling):null;return!0}function Mf(){for(var e=ir;e;)e=En(e.nextSibling)}function Ys(){ir=lr=null,tt=!1}function eu(e){Mr===null?Mr=[e]:Mr.push(e)}var Ub=dn.ReactCurrentBatchConfig;function xa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var n=r.stateNode}if(!n)throw Error(Z(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,e))}return e}function Uo(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $h(e){var t=e._init;return t(e._payload)}function Df(e){function t(f,g){if(e){var m=f.deletions;m===null?(f.deletions=[g],f.flags|=16):m.push(g)}}function r(f,g){if(!e)return null;for(;g!==null;)t(f,g),g=g.sibling;return null}function n(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function a(f,g){return f=Pn(f,g),f.index=0,f.sibling=null,f}function o(f,g,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<g?(f.flags|=2,g):m):(f.flags|=2,g)):(f.flags|=1048576,g)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,g,m,b){return g===null||g.tag!==6?(g=nc(m,f.mode,b),g.return=f,g):(g=a(g,m),g.return=f,g)}function c(f,g,m,b){var _=m.type;return _===_s?u(f,g,m.props.children,b,m.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===pn&&$h(_)===g.type)?(b=a(g,m.props),b.ref=xa(f,g,m),b.return=f,b):(b=vi(m.type,m.key,m.props,null,f.mode,b),b.ref=xa(f,g,m),b.return=f,b)}function d(f,g,m,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=sc(m,f.mode,b),g.return=f,g):(g=a(g,m.children||[]),g.return=f,g)}function u(f,g,m,b,_){return g===null||g.tag!==7?(g=Zn(m,f.mode,b,_),g.return=f,g):(g=a(g,m),g.return=f,g)}function p(f,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=nc(""+g,f.mode,m),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ao:return m=vi(g.type,g.key,g.props,null,f.mode,m),m.ref=xa(f,null,g),m.return=f,m;case Ns:return g=sc(g,f.mode,m),g.return=f,g;case pn:var b=g._init;return p(f,b(g._payload),m)}if(ja(g)||ga(g))return g=Zn(g,f.mode,m,null),g.return=f,g;Uo(f,g)}return null}function h(f,g,m,b){var _=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return _!==null?null:l(f,g,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ao:return m.key===_?c(f,g,m,b):null;case Ns:return m.key===_?d(f,g,m,b):null;case pn:return _=m._init,h(f,g,_(m._payload),b)}if(ja(m)||ga(m))return _!==null?null:u(f,g,m,b,null);Uo(f,m)}return null}function y(f,g,m,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(m)||null,l(g,f,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ao:return f=f.get(b.key===null?m:b.key)||null,c(g,f,b,_);case Ns:return f=f.get(b.key===null?m:b.key)||null,d(g,f,b,_);case pn:var j=b._init;return y(f,g,m,j(b._payload),_)}if(ja(b)||ga(b))return f=f.get(m)||null,u(g,f,b,_,null);Uo(g,b)}return null}function x(f,g,m,b){for(var _=null,j=null,N=g,E=g=0,$=null;N!==null&&E<m.length;E++){N.index>E?($=N,N=null):$=N.sibling;var O=h(f,N,m[E],b);if(O===null){N===null&&(N=$);break}e&&N&&O.alternate===null&&t(f,N),g=o(O,g,E),j===null?_=O:j.sibling=O,j=O,N=$}if(E===m.length)return r(f,N),tt&&Un(f,E),_;if(N===null){for(;E<m.length;E++)N=p(f,m[E],b),N!==null&&(g=o(N,g,E),j===null?_=N:j.sibling=N,j=N);return tt&&Un(f,E),_}for(N=n(f,N);E<m.length;E++)$=y(N,f,E,m[E],b),$!==null&&(e&&$.alternate!==null&&N.delete($.key===null?E:$.key),g=o($,g,E),j===null?_=$:j.sibling=$,j=$);return e&&N.forEach(function(K){return t(f,K)}),tt&&Un(f,E),_}function v(f,g,m,b){var _=ga(m);if(typeof _!="function")throw Error(Z(150));if(m=_.call(m),m==null)throw Error(Z(151));for(var j=_=null,N=g,E=g=0,$=null,O=m.next();N!==null&&!O.done;E++,O=m.next()){N.index>E?($=N,N=null):$=N.sibling;var K=h(f,N,O.value,b);if(K===null){N===null&&(N=$);break}e&&N&&K.alternate===null&&t(f,N),g=o(K,g,E),j===null?_=K:j.sibling=K,j=K,N=$}if(O.done)return r(f,N),tt&&Un(f,E),_;if(N===null){for(;!O.done;E++,O=m.next())O=p(f,O.value,b),O!==null&&(g=o(O,g,E),j===null?_=O:j.sibling=O,j=O);return tt&&Un(f,E),_}for(N=n(f,N);!O.done;E++,O=m.next())O=y(N,f,E,O.value,b),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?E:O.key),g=o(O,g,E),j===null?_=O:j.sibling=O,j=O);return e&&N.forEach(function(I){return t(f,I)}),tt&&Un(f,E),_}function w(f,g,m,b){if(typeof m=="object"&&m!==null&&m.type===_s&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ao:e:{for(var _=m.key,j=g;j!==null;){if(j.key===_){if(_=m.type,_===_s){if(j.tag===7){r(f,j.sibling),g=a(j,m.props.children),g.return=f,f=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===pn&&$h(_)===j.type){r(f,j.sibling),g=a(j,m.props),g.ref=xa(f,j,m),g.return=f,f=g;break e}r(f,j);break}else t(f,j);j=j.sibling}m.type===_s?(g=Zn(m.props.children,f.mode,b,m.key),g.return=f,f=g):(b=vi(m.type,m.key,m.props,null,f.mode,b),b.ref=xa(f,g,m),b.return=f,f=b)}return i(f);case Ns:e:{for(j=m.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){r(f,g.sibling),g=a(g,m.children||[]),g.return=f,f=g;break e}else{r(f,g);break}else t(f,g);g=g.sibling}g=sc(m,f.mode,b),g.return=f,f=g}return i(f);case pn:return j=m._init,w(f,g,j(m._payload),b)}if(ja(m))return x(f,g,m,b);if(ga(m))return v(f,g,m,b);Uo(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(r(f,g.sibling),g=a(g,m),g.return=f,f=g):(r(f,g),g=nc(m,f.mode,b),g.return=f,f=g),i(f)):r(f,g)}return w}var Js=Df(!0),Rf=Df(!1),Li=In(null),zi=null,Ms=null,tu=null;function ru(){tu=Ms=zi=null}function nu(e){var t=Li.current;et(Li),e._currentValue=t}function Xc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hs(e,t){zi=e,tu=Ms=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jt=!0),e.firstContext=null)}function xr(e){var t=e._currentValue;if(tu!==e)if(e={context:e,memoizedValue:t,next:null},Ms===null){if(zi===null)throw Error(Z(308));Ms=e,zi.dependencies={lanes:0,firstContext:e}}else Ms=Ms.next=e;return t}var Yn=null;function su(e){Yn===null?Yn=[e]:Yn.push(e)}function If(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,su(t)):(r.next=a.next,a.next=r),t.interleaved=r,ln(e,n)}function ln(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yn=!1;function au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $f(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ln(e,r)}return a=n.interleaved,a===null?(t.next=t,su(n)):(t.next=a.next,a.next=t),n.interleaved=t,ln(e,r)}function fi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wd(e,r)}}function Lh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fi(e,t,r,n){var a=e.updateQueue;yn=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var p=a.baseState;i=0,u=d=c=null,l=o;do{var h=l.lane,y=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,v=l;switch(h=t,y=r,v.tag){case 1:if(x=v.payload,typeof x=="function"){p=x.call(y,p,h);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,h=typeof x=="function"?x.call(y,p,h):x,h==null)break e;p=at({},p,h);break e;case 2:yn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=y,c=p):u=u.next=y,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(u===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);ns|=i,e.lanes=i,e.memoizedState=p}}function zh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Z(191,a));a.call(n)}}}var ko={},Vr=In(ko),to=In(ko),ro=In(ko);function Jn(e){if(e===ko)throw Error(Z(174));return e}function ou(e,t){switch(Qe(ro,t),Qe(to,e),Qe(Vr,ko),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oc(t,e)}et(Vr),Qe(Vr,t)}function Qs(){et(Vr),et(to),et(ro)}function Lf(e){Jn(ro.current);var t=Jn(Vr.current),r=Oc(t,e.type);t!==r&&(Qe(to,e),Qe(Vr,r))}function iu(e){to.current===e&&(et(Vr),et(to))}var nt=In(0);function Ui(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ql=[];function lu(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var mi=dn.ReactCurrentDispatcher,Xl=dn.ReactCurrentBatchConfig,rs=0,st=null,vt=null,kt=null,Bi=!1,Da=!1,no=0,Bb=0;function Pt(){throw Error(Z(321))}function cu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$r(e[r],t[r]))return!1;return!0}function du(e,t,r,n,a,o){if(rs=o,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mi.current=e===null||e.memoizedState===null?Vb:Gb,e=r(n,a),Da){o=0;do{if(Da=!1,no=0,25<=o)throw Error(Z(301));o+=1,kt=vt=null,t.updateQueue=null,mi.current=Kb,e=r(n,a)}while(Da)}if(mi.current=Hi,t=vt!==null&&vt.next!==null,rs=0,kt=vt=st=null,Bi=!1,t)throw Error(Z(300));return e}function uu(){var e=no!==0;return no=0,e}function Ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?st.memoizedState=kt=e:kt=kt.next=e,kt}function br(){if(vt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=kt===null?st.memoizedState:kt.next;if(t!==null)kt=t,vt=e;else{if(e===null)throw Error(Z(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?st.memoizedState=kt=e:kt=kt.next=e}return kt}function so(e,t){return typeof t=="function"?t(e):t}function Zl(e){var t=br(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=vt,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((rs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,i=n):c=c.next=p,st.lanes|=u,ns|=u}d=d.next}while(d!==null&&d!==o);c===null?i=n:c.next=l,$r(n,t.memoizedState)||(Jt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,st.lanes|=o,ns|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ec(e){var t=br(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);$r(o,t.memoizedState)||(Jt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function zf(){}function Ff(e,t){var r=st,n=br(),a=t(),o=!$r(n.memoizedState,a);if(o&&(n.memoizedState=a,Jt=!0),n=n.queue,hu(Hf.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,ao(9,Bf.bind(null,r,n,a,t),void 0,null),jt===null)throw Error(Z(349));rs&30||Uf(r,t,a)}return a}function Uf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bf(e,t,r,n){t.value=r,t.getSnapshot=n,Wf(t)&&qf(e)}function Hf(e,t,r){return r(function(){Wf(t)&&qf(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$r(e,r)}catch{return!0}}function qf(e){var t=ln(e,1);t!==null&&Ir(t,e,1,-1)}function Fh(e){var t=Ur();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:e},t.queue=e,e=e.dispatch=qb.bind(null,st,e),[t.memoizedState,e]}function ao(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Vf(){return br().memoizedState}function pi(e,t,r,n){var a=Ur();st.flags|=e,a.memoizedState=ao(1|t,r,void 0,n===void 0?null:n)}function hl(e,t,r,n){var a=br();n=n===void 0?null:n;var o=void 0;if(vt!==null){var i=vt.memoizedState;if(o=i.destroy,n!==null&&cu(n,i.deps)){a.memoizedState=ao(t,r,o,n);return}}st.flags|=e,a.memoizedState=ao(1|t,r,o,n)}function Uh(e,t){return pi(8390656,8,e,t)}function hu(e,t){return hl(2048,8,e,t)}function Gf(e,t){return hl(4,2,e,t)}function Kf(e,t){return hl(4,4,e,t)}function Yf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jf(e,t,r){return r=r!=null?r.concat([e]):null,hl(4,4,Yf.bind(null,t,e),r)}function gu(){}function Qf(e,t){var r=br();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&cu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Xf(e,t){var r=br();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&cu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Zf(e,t,r){return rs&21?($r(r,t)||(r=nf(),st.lanes|=r,ns|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jt=!0),e.memoizedState=r)}function Hb(e,t){var r=Ke;Ke=r!==0&&4>r?r:4,e(!0);var n=Xl.transition;Xl.transition={};try{e(!1),t()}finally{Ke=r,Xl.transition=n}}function em(){return br().memoizedState}function Wb(e,t,r){var n=An(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},tm(e))rm(t,r);else if(r=If(e,t,r,n),r!==null){var a=Wt();Ir(r,e,n,a),nm(r,t,n)}}function qb(e,t,r){var n=An(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(tm(e))rm(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,$r(l,i)){var c=t.interleaved;c===null?(a.next=a,su(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=If(e,t,a,n),r!==null&&(a=Wt(),Ir(r,e,n,a),nm(r,t,n))}}function tm(e){var t=e.alternate;return e===st||t!==null&&t===st}function rm(e,t){Da=Bi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function nm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Wd(e,r)}}var Hi={readContext:xr,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},Vb={readContext:xr,useCallback:function(e,t){return Ur().memoizedState=[e,t===void 0?null:t],e},useContext:xr,useEffect:Uh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pi(4194308,4,Yf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return pi(4,2,e,t)},useMemo:function(e,t){var r=Ur();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ur();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wb.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var t=Ur();return e={current:e},t.memoizedState=e},useState:Fh,useDebugValue:gu,useDeferredValue:function(e){return Ur().memoizedState=e},useTransition:function(){var e=Fh(!1),t=e[0];return e=Hb.bind(null,e[1]),Ur().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=st,a=Ur();if(tt){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=t(),jt===null)throw Error(Z(349));rs&30||Uf(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Uh(Hf.bind(null,n,o,e),[e]),n.flags|=2048,ao(9,Bf.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Ur(),t=jt.identifierPrefix;if(tt){var r=rn,n=tn;r=(n&~(1<<32-Rr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=no++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Bb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gb={readContext:xr,useCallback:Qf,useContext:xr,useEffect:hu,useImperativeHandle:Jf,useInsertionEffect:Gf,useLayoutEffect:Kf,useMemo:Xf,useReducer:Zl,useRef:Vf,useState:function(){return Zl(so)},useDebugValue:gu,useDeferredValue:function(e){var t=br();return Zf(t,vt.memoizedState,e)},useTransition:function(){var e=Zl(so)[0],t=br().memoizedState;return[e,t]},useMutableSource:zf,useSyncExternalStore:Ff,useId:em,unstable_isNewReconciler:!1},Kb={readContext:xr,useCallback:Qf,useContext:xr,useEffect:hu,useImperativeHandle:Jf,useInsertionEffect:Gf,useLayoutEffect:Kf,useMemo:Xf,useReducer:ec,useRef:Vf,useState:function(){return ec(so)},useDebugValue:gu,useDeferredValue:function(e){var t=br();return vt===null?t.memoizedState=e:Zf(t,vt.memoizedState,e)},useTransition:function(){var e=ec(so)[0],t=br().memoizedState;return[e,t]},useMutableSource:zf,useSyncExternalStore:Ff,useId:em,unstable_isNewReconciler:!1};function Tr(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Zc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:at({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gl={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Wt(),a=An(e),o=nn(n,a);o.payload=t,r!=null&&(o.callback=r),t=Cn(e,o,a),t!==null&&(Ir(t,e,a,n),fi(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Wt(),a=An(e),o=nn(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Cn(e,o,a),t!==null&&(Ir(t,e,a,n),fi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Wt(),n=An(e),a=nn(r,n);a.tag=2,t!=null&&(a.callback=t),t=Cn(e,a,n),t!==null&&(Ir(t,e,n,r),fi(t,e,n))}};function Bh(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Qa(r,n)||!Qa(a,o):!0}function sm(e,t,r){var n=!1,a=Dn,o=t.contextType;return typeof o=="object"&&o!==null?o=xr(o):(a=Zt(t)?es:It.current,n=t.contextTypes,o=(n=n!=null)?Ks(e,a):Dn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Hh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gl.enqueueReplaceState(t,t.state,null)}function ed(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},au(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=xr(o):(o=Zt(t)?es:It.current,a.context=Ks(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Zc(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gl.enqueueReplaceState(a,a.state,null),Fi(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t){try{var r="",n=t;do r+=kx(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function tc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function td(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Yb=typeof WeakMap=="function"?WeakMap:Map;function am(e,t,r){r=nn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qi||(qi=!0,ud=n),td(e,t)},r}function om(e,t,r){r=nn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){td(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){td(e,t),typeof n!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Wh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Yb;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=cv.bind(null,e,t,r),t.then(e,e))}function qh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vh(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nn(-1,1),t.tag=2,Cn(r,t,1))),r.lanes|=1),e)}var Jb=dn.ReactCurrentOwner,Jt=!1;function Ut(e,t,r,n){t.child=e===null?Rf(t,null,r,n):Js(t,e.child,r,n)}function Gh(e,t,r,n,a){r=r.render;var o=t.ref;return Hs(t,a),n=du(e,t,r,n,o,a),r=uu(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cn(e,t,a)):(tt&&r&&Xd(t),t.flags|=1,Ut(e,t,n,a),t.child)}function Kh(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!wu(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,im(e,t,o,n,a)):(e=vi(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Qa,r(i,n)&&e.ref===t.ref)return cn(e,t,a)}return t.flags|=1,e=Pn(o,n),e.ref=t.ref,e.return=t,t.child=e}function im(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(Qa(o,n)&&e.ref===t.ref)if(Jt=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(Jt=!0);else return t.lanes=e.lanes,cn(e,t,a)}return rd(e,t,r,n,a)}function lm(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Rs,sr),sr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qe(Rs,sr),sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Qe(Rs,sr),sr|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Qe(Rs,sr),sr|=n;return Ut(e,t,a,r),t.child}function cm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function rd(e,t,r,n,a){var o=Zt(r)?es:It.current;return o=Ks(t,o),Hs(t,a),r=du(e,t,r,n,o,a),n=uu(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cn(e,t,a)):(tt&&n&&Xd(t),t.flags|=1,Ut(e,t,r,a),t.child)}function Yh(e,t,r,n,a){if(Zt(r)){var o=!0;Ri(t)}else o=!1;if(Hs(t,a),t.stateNode===null)yi(e,t),sm(t,r,n),ed(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=xr(d):(d=Zt(r)?es:It.current,d=Ks(t,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Hh(t,i,n,d),yn=!1;var h=t.memoizedState;i.state=h,Fi(t,n,i,a),c=t.memoizedState,l!==n||h!==c||Xt.current||yn?(typeof u=="function"&&(Zc(t,r,u,n),c=t.memoizedState),(l=yn||Bh(t,r,l,n,h,c,d))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,$f(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Tr(t.type,l),i.props=d,p=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=xr(c):(c=Zt(r)?es:It.current,c=Ks(t,c));var y=r.getDerivedStateFromProps;(u=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==p||h!==c)&&Hh(t,i,n,c),yn=!1,h=t.memoizedState,i.state=h,Fi(t,n,i,a);var x=t.memoizedState;l!==p||h!==x||Xt.current||yn?(typeof y=="function"&&(Zc(t,r,y,n),x=t.memoizedState),(d=yn||Bh(t,r,d,n,h,x,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),i.props=n,i.state=x,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return nd(e,t,r,n,o,a)}function nd(e,t,r,n,a,o){cm(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Dh(t,r,!1),cn(e,t,o);n=t.stateNode,Jb.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Js(t,e.child,null,o),t.child=Js(t,null,l,o)):Ut(e,t,l,o),t.memoizedState=n.state,a&&Dh(t,r,!0),t.child}function dm(e){var t=e.stateNode;t.pendingContext?Mh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mh(e,t.context,!1),ou(e,t.containerInfo)}function Jh(e,t,r,n,a){return Ys(),eu(a),t.flags|=256,Ut(e,t,r,n),t.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function ad(e){return{baseLanes:e,cachePool:null,transitions:null}}function um(e,t,r){var n=t.pendingProps,a=nt.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Qe(nt,a&1),e===null)return Qc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=pl(i,n,0,null),e=Zn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ad(r),t.memoizedState=sd,e):fu(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Qb(e,t,i,n,l,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Pn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=Pn(l,o):(o=Zn(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?ad(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=sd,n}return o=e.child,e=o.sibling,n=Pn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function fu(e,t){return t=pl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bo(e,t,r,n){return n!==null&&eu(n),Js(t,e.child,null,r),e=fu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qb(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=tc(Error(Z(422))),Bo(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=pl({mode:"visible",children:n.children},a,0,null),o=Zn(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Js(t,e.child,null,i),t.child.memoizedState=ad(i),t.memoizedState=sd,o);if(!(t.mode&1))return Bo(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(Z(419)),n=tc(o,n,void 0),Bo(e,t,i,n)}if(l=(i&e.childLanes)!==0,Jt||l){if(n=jt,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ln(e,a),Ir(n,e,a,-1))}return vu(),n=tc(Error(Z(421))),Bo(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=dv.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ir=En(a.nextSibling),lr=t,tt=!0,Mr=null,e!==null&&(fr[mr++]=tn,fr[mr++]=rn,fr[mr++]=ts,tn=e.id,rn=e.overflow,ts=t),t=fu(t,n.children),t.flags|=4096,t)}function Qh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Xc(e.return,t,r)}function rc(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function hm(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(Ut(e,t,n.children,r),n=nt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,r,t);else if(e.tag===19)Qh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Qe(nt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ui(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),rc(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ui(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}rc(t,!0,r,null,o);break;case"together":rc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ns|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,r=Pn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xb(e,t,r){switch(t.tag){case 3:dm(t),Ys();break;case 5:Lf(t);break;case 1:Zt(t.type)&&Ri(t);break;case 4:ou(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Qe(Li,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Qe(nt,nt.current&1),t.flags|=128,null):r&t.child.childLanes?um(e,t,r):(Qe(nt,nt.current&1),e=cn(e,t,r),e!==null?e.sibling:null);Qe(nt,nt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return hm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Qe(nt,nt.current),n)break;return null;case 22:case 23:return t.lanes=0,lm(e,t,r)}return cn(e,t,r)}var gm,od,fm,mm;gm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};od=function(){};fm=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Jn(Vr.current);var o=null;switch(r){case"input":a=Cc(e,a),n=Cc(e,n),o=[];break;case"select":a=at({},a,{value:void 0}),n=at({},n,{value:void 0}),o=[];break;case"textarea":a=Pc(e,a),n=Pc(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Mi)}Mc(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wa.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ze("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};mm=function(e,t,r,n){r!==n&&(t.flags|=4)};function ba(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zb(e,t,r){var n=t.pendingProps;switch(Zd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Zt(t.type)&&Di(),Ot(t),null;case 3:return n=t.stateNode,Qs(),et(Xt),et(It),lu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mr!==null&&(fd(Mr),Mr=null))),od(e,t),Ot(t),null;case 5:iu(t);var a=Jn(ro.current);if(r=t.type,e!==null&&t.stateNode!=null)fm(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Z(166));return Ot(t),null}if(e=Jn(Vr.current),Fo(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Hr]=t,n[eo]=o,e=(t.mode&1)!==0,r){case"dialog":Ze("cancel",n),Ze("close",n);break;case"iframe":case"object":case"embed":Ze("load",n);break;case"video":case"audio":for(a=0;a<_a.length;a++)Ze(_a[a],n);break;case"source":Ze("error",n);break;case"img":case"image":case"link":Ze("error",n),Ze("load",n);break;case"details":Ze("toggle",n);break;case"input":oh(n,o),Ze("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",n);break;case"textarea":lh(n,o),Ze("invalid",n)}Mc(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&zo(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&zo(n.textContent,l,e),a=["children",""+l]):Wa.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ze("scroll",n)}switch(r){case"input":Po(n),ih(n,o,!0);break;case"textarea":Po(n),ch(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Mi)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bg(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Hr]=t,e[eo]=n,gm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Dc(r,n),r){case"dialog":Ze("cancel",e),Ze("close",e),a=n;break;case"iframe":case"object":case"embed":Ze("load",e),a=n;break;case"video":case"audio":for(a=0;a<_a.length;a++)Ze(_a[a],e);a=n;break;case"source":Ze("error",e),a=n;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),a=n;break;case"details":Ze("toggle",e),a=n;break;case"input":oh(e,n),a=Cc(e,n),Ze("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=at({},n,{value:void 0}),Ze("invalid",e);break;case"textarea":lh(e,n),a=Pc(e,n),Ze("invalid",e);break;default:a=n}Mc(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?qg(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Hg(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qa(e,c):typeof c=="number"&&qa(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Wa.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ze("scroll",e):c!=null&&Ld(e,o,c,i))}switch(r){case"input":Po(e),ih(e,n,!1);break;case"textarea":Po(e),ch(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Mn(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?zs(e,!!n.multiple,o,!1):n.defaultValue!=null&&zs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Mi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ot(t),null;case 6:if(e&&t.stateNode!=null)mm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Z(166));if(r=Jn(ro.current),Jn(Vr.current),Fo(t)){if(n=t.stateNode,r=t.memoizedProps,n[Hr]=t,(o=n.nodeValue!==r)&&(e=lr,e!==null))switch(e.tag){case 3:zo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zo(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Hr]=t,t.stateNode=n}return Ot(t),null;case 13:if(et(nt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&ir!==null&&t.mode&1&&!(t.flags&128))Mf(),Ys(),t.flags|=98560,o=!1;else if(o=Fo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[Hr]=t}else Ys(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),o=!1}else Mr!==null&&(fd(Mr),Mr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?wt===0&&(wt=3):vu())),t.updateQueue!==null&&(t.flags|=4),Ot(t),null);case 4:return Qs(),od(e,t),e===null&&Xa(t.stateNode.containerInfo),Ot(t),null;case 10:return nu(t.type._context),Ot(t),null;case 17:return Zt(t.type)&&Di(),Ot(t),null;case 19:if(et(nt),o=t.memoizedState,o===null)return Ot(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)ba(o,!1);else{if(wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ui(e),i!==null){for(t.flags|=128,ba(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Qe(nt,nt.current&1|2),t.child}e=e.sibling}o.tail!==null&&gt()>Zs&&(t.flags|=128,n=!0,ba(o,!1),t.lanes=4194304)}else{if(!n)if(e=Ui(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ba(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!tt)return Ot(t),null}else 2*gt()-o.renderingStartTime>Zs&&r!==1073741824&&(t.flags|=128,n=!0,ba(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=gt(),t.sibling=null,r=nt.current,Qe(nt,n?r&1|2:r&1),t):(Ot(t),null);case 22:case 23:return bu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?sr&1073741824&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function ev(e,t){switch(Zd(t),t.tag){case 1:return Zt(t.type)&&Di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),et(Xt),et(It),lu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(et(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(nt),null;case 4:return Qs(),null;case 10:return nu(t.type._context),null;case 22:case 23:return bu(),null;case 24:return null;default:return null}}var Ho=!1,Dt=!1,tv=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ds(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ct(e,t,n)}else r.current=null}function id(e,t,r){try{r()}catch(n){ct(e,t,n)}}var Xh=!1;function rv(e,t){if(Wc=Ai,e=vf(),Qd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,p=e,h=null;t:for(;;){for(var y;p!==r||a!==0&&p.nodeType!==3||(l=i+a),p!==o||n!==0&&p.nodeType!==3||(c=i+n),p.nodeType===3&&(i+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===e)break t;if(h===r&&++d===a&&(l=i),h===o&&++u===n&&(c=i),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(qc={focusedElem:e,selectionRange:r},Ai=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,w=x.memoizedState,f=t.stateNode,g=f.getSnapshotBeforeUpdate(t.elementType===t.type?v:Tr(t.type,v),w);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(b){ct(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return x=Xh,Xh=!1,x}function Ra(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&id(t,r,o)}a=a.next}while(a!==n)}}function fl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ld(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function pm(e){var t=e.alternate;t!==null&&(e.alternate=null,pm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hr],delete t[eo],delete t[Kc],delete t[Lb],delete t[zb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ym(e){return e.tag===5||e.tag===3||e.tag===4}function Zh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ym(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Mi));else if(n!==4&&(e=e.child,e!==null))for(cd(e,t,r),e=e.sibling;e!==null;)cd(e,t,r),e=e.sibling}function dd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(dd(e,t,r),e=e.sibling;e!==null;)dd(e,t,r),e=e.sibling}var _t=null,Pr=!1;function hn(e,t,r){for(r=r.child;r!==null;)xm(e,t,r),r=r.sibling}function xm(e,t,r){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(ol,r)}catch{}switch(r.tag){case 5:Dt||Ds(r,t);case 6:var n=_t,a=Pr;_t=null,hn(e,t,r),_t=n,Pr=a,_t!==null&&(Pr?(e=_t,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_t.removeChild(r.stateNode));break;case 18:_t!==null&&(Pr?(e=_t,r=r.stateNode,e.nodeType===8?Yl(e.parentNode,r):e.nodeType===1&&Yl(e,r),Ya(e)):Yl(_t,r.stateNode));break;case 4:n=_t,a=Pr,_t=r.stateNode.containerInfo,Pr=!0,hn(e,t,r),_t=n,Pr=a;break;case 0:case 11:case 14:case 15:if(!Dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&id(r,t,i),a=a.next}while(a!==n)}hn(e,t,r);break;case 1:if(!Dt&&(Ds(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ct(r,t,l)}hn(e,t,r);break;case 21:hn(e,t,r);break;case 22:r.mode&1?(Dt=(n=Dt)||r.memoizedState!==null,hn(e,t,r),Dt=n):hn(e,t,r);break;default:hn(e,t,r)}}function e0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new tv),t.forEach(function(n){var a=uv.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function _r(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,Pr=!1;break e;case 3:_t=l.stateNode.containerInfo,Pr=!0;break e;case 4:_t=l.stateNode.containerInfo,Pr=!0;break e}l=l.return}if(_t===null)throw Error(Z(160));xm(o,i,a),_t=null,Pr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ct(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bm(t,e),t=t.sibling}function bm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_r(t,e),Fr(e),n&4){try{Ra(3,e,e.return),fl(3,e)}catch(v){ct(e,e.return,v)}try{Ra(5,e,e.return)}catch(v){ct(e,e.return,v)}}break;case 1:_r(t,e),Fr(e),n&512&&r!==null&&Ds(r,r.return);break;case 5:if(_r(t,e),Fr(e),n&512&&r!==null&&Ds(r,r.return),e.flags&32){var a=e.stateNode;try{qa(a,"")}catch(v){ct(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Fg(a,o),Dc(l,i);var d=Dc(l,o);for(i=0;i<c.length;i+=2){var u=c[i],p=c[i+1];u==="style"?qg(a,p):u==="dangerouslySetInnerHTML"?Hg(a,p):u==="children"?qa(a,p):Ld(a,u,p,d)}switch(l){case"input":Tc(a,o);break;case"textarea":Ug(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?zs(a,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?zs(a,!!o.multiple,o.defaultValue,!0):zs(a,!!o.multiple,o.multiple?[]:"",!1))}a[eo]=o}catch(v){ct(e,e.return,v)}}break;case 6:if(_r(t,e),Fr(e),n&4){if(e.stateNode===null)throw Error(Z(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){ct(e,e.return,v)}}break;case 3:if(_r(t,e),Fr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ya(t.containerInfo)}catch(v){ct(e,e.return,v)}break;case 4:_r(t,e),Fr(e);break;case 13:_r(t,e),Fr(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(yu=gt())),n&4&&e0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Dt=(d=Dt)||u,_r(t,e),Dt=d):_r(t,e),Fr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(pe=e,u=e.child;u!==null;){for(p=pe=u;pe!==null;){switch(h=pe,y=h.child,h.tag){case 0:case 11:case 14:case 15:Ra(4,h,h.return);break;case 1:Ds(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){ct(n,r,v)}}break;case 5:Ds(h,h.return);break;case 22:if(h.memoizedState!==null){r0(p);continue}}y!==null?(y.return=h,pe=y):r0(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{a=p.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,c=p.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wg("display",i))}catch(v){ct(e,e.return,v)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(v){ct(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:_r(t,e),Fr(e),n&4&&e0(e);break;case 21:break;default:_r(t,e),Fr(e)}}function Fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ym(r)){var n=r;break e}r=r.return}throw Error(Z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(qa(a,""),n.flags&=-33);var o=Zh(e);dd(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Zh(e);cd(e,l,i);break;default:throw Error(Z(161))}}catch(c){ct(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nv(e,t,r){pe=e,vm(e)}function vm(e,t,r){for(var n=(e.mode&1)!==0;pe!==null;){var a=pe,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Ho;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=Ho;var d=Dt;if(Ho=i,(Dt=c)&&!d)for(pe=a;pe!==null;)i=pe,c=i.child,i.tag===22&&i.memoizedState!==null?n0(a):c!==null?(c.return=i,pe=c):n0(a);for(;o!==null;)pe=o,vm(o),o=o.sibling;pe=a,Ho=l,Dt=d}t0(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,pe=o):t0(e)}}function t0(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||fl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Dt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Tr(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&zh(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zh(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Ya(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Dt||t.flags&512&&ld(t)}catch(h){ct(t,t.return,h)}}if(t===e){pe=null;break}if(r=t.sibling,r!==null){r.return=t.return,pe=r;break}pe=t.return}}function r0(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pe=r;break}pe=t.return}}function n0(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fl(4,t)}catch(c){ct(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ct(t,a,c)}}var o=t.return;try{ld(t)}catch(c){ct(t,o,c)}break;case 5:var i=t.return;try{ld(t)}catch(c){ct(t,i,c)}}}catch(c){ct(t,t.return,c)}if(t===e){pe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pe=l;break}pe=t.return}}var sv=Math.ceil,Wi=dn.ReactCurrentDispatcher,mu=dn.ReactCurrentOwner,yr=dn.ReactCurrentBatchConfig,We=0,jt=null,yt=null,St=0,sr=0,Rs=In(0),wt=0,oo=null,ns=0,ml=0,pu=0,Ia=null,Yt=null,yu=0,Zs=1/0,Xr=null,qi=!1,ud=null,Tn=null,Wo=!1,jn=null,Vi=0,$a=0,hd=null,xi=-1,bi=0;function Wt(){return We&6?gt():xi!==-1?xi:xi=gt()}function An(e){return e.mode&1?We&2&&St!==0?St&-St:Ub.transition!==null?(bi===0&&(bi=nf()),bi):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:uf(e.type)),e):1}function Ir(e,t,r,n){if(50<$a)throw $a=0,hd=null,Error(Z(185));bo(e,r,n),(!(We&2)||e!==jt)&&(e===jt&&(!(We&2)&&(ml|=r),wt===4&&vn(e,St)),er(e,n),r===1&&We===0&&!(t.mode&1)&&(Zs=gt()+500,ul&&$n()))}function er(e,t){var r=e.callbackNode;Ux(e,t);var n=Ti(e,e===jt?St:0);if(n===0)r!==null&&hh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&hh(r),t===1)e.tag===0?Fb(s0.bind(null,e)):Af(s0.bind(null,e)),Ib(function(){!(We&6)&&$n()}),r=null;else{switch(sf(n)){case 1:r=Hd;break;case 4:r=tf;break;case 16:r=Ci;break;case 536870912:r=rf;break;default:r=Ci}r=Cm(r,wm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function wm(e,t){if(xi=-1,bi=0,We&6)throw Error(Z(327));var r=e.callbackNode;if(Ws()&&e.callbackNode!==r)return null;var n=Ti(e,e===jt?St:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Gi(e,n);else{t=n;var a=We;We|=2;var o=jm();(jt!==e||St!==t)&&(Xr=null,Zs=gt()+500,Xn(e,t));do try{iv();break}catch(l){km(e,l)}while(1);ru(),Wi.current=o,We=a,yt!==null?t=0:(jt=null,St=0,t=wt)}if(t!==0){if(t===2&&(a=zc(e),a!==0&&(n=a,t=gd(e,a))),t===1)throw r=oo,Xn(e,0),vn(e,n),er(e,gt()),r;if(t===6)vn(e,n);else{if(a=e.current.alternate,!(n&30)&&!av(a)&&(t=Gi(e,n),t===2&&(o=zc(e),o!==0&&(n=o,t=gd(e,o))),t===1))throw r=oo,Xn(e,0),vn(e,n),er(e,gt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Z(345));case 2:Bn(e,Yt,Xr);break;case 3:if(vn(e,n),(n&130023424)===n&&(t=yu+500-gt(),10<t)){if(Ti(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Wt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gc(Bn.bind(null,e,Yt,Xr),t);break}Bn(e,Yt,Xr);break;case 4:if(vn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Rr(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sv(n/1960))-n,10<n){e.timeoutHandle=Gc(Bn.bind(null,e,Yt,Xr),n);break}Bn(e,Yt,Xr);break;case 5:Bn(e,Yt,Xr);break;default:throw Error(Z(329))}}}return er(e,gt()),e.callbackNode===r?wm.bind(null,e):null}function gd(e,t){var r=Ia;return e.current.memoizedState.isDehydrated&&(Xn(e,t).flags|=256),e=Gi(e,t),e!==2&&(t=Yt,Yt=r,t!==null&&fd(t)),e}function fd(e){Yt===null?Yt=e:Yt.push.apply(Yt,e)}function av(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!$r(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~pu,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Rr(t),n=1<<r;e[r]=-1,t&=~n}}function s0(e){if(We&6)throw Error(Z(327));Ws();var t=Ti(e,0);if(!(t&1))return er(e,gt()),null;var r=Gi(e,t);if(e.tag!==0&&r===2){var n=zc(e);n!==0&&(t=n,r=gd(e,n))}if(r===1)throw r=oo,Xn(e,0),vn(e,t),er(e,gt()),r;if(r===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bn(e,Yt,Xr),er(e,gt()),null}function xu(e,t){var r=We;We|=1;try{return e(t)}finally{We=r,We===0&&(Zs=gt()+500,ul&&$n())}}function ss(e){jn!==null&&jn.tag===0&&!(We&6)&&Ws();var t=We;We|=1;var r=yr.transition,n=Ke;try{if(yr.transition=null,Ke=1,e)return e()}finally{Ke=n,yr.transition=r,We=t,!(We&6)&&$n()}}function bu(){sr=Rs.current,et(Rs)}function Xn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Rb(r)),yt!==null)for(r=yt.return;r!==null;){var n=r;switch(Zd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Di();break;case 3:Qs(),et(Xt),et(It),lu();break;case 5:iu(n);break;case 4:Qs();break;case 13:et(nt);break;case 19:et(nt);break;case 10:nu(n.type._context);break;case 22:case 23:bu()}r=r.return}if(jt=e,yt=e=Pn(e.current,null),St=sr=t,wt=0,oo=null,pu=ml=ns=0,Yt=Ia=null,Yn!==null){for(t=0;t<Yn.length;t++)if(r=Yn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}Yn=null}return e}function km(e,t){do{var r=yt;try{if(ru(),mi.current=Hi,Bi){for(var n=st.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Bi=!1}if(rs=0,kt=vt=st=null,Da=!1,no=0,mu.current=null,r===null||r.return===null){wt=1,oo=t,yt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=qh(i);if(y!==null){y.flags&=-257,Vh(y,i,l,o,t),y.mode&1&&Wh(o,d,t),t=y,c=d;var x=t.updateQueue;if(x===null){var v=new Set;v.add(c),t.updateQueue=v}else x.add(c);break e}else{if(!(t&1)){Wh(o,d,t),vu();break e}c=Error(Z(426))}}else if(tt&&l.mode&1){var w=qh(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vh(w,i,l,o,t),eu(Xs(c,l));break e}}o=c=Xs(c,l),wt!==4&&(wt=2),Ia===null?Ia=[o]:Ia.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=am(o,c,t);Lh(o,f);break e;case 1:l=c;var g=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tn===null||!Tn.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=om(o,l,t);Lh(o,b);break e}}o=o.return}while(o!==null)}_m(r)}catch(_){t=_,yt===r&&r!==null&&(yt=r=r.return);continue}break}while(1)}function jm(){var e=Wi.current;return Wi.current=Hi,e===null?Hi:e}function vu(){(wt===0||wt===3||wt===2)&&(wt=4),jt===null||!(ns&268435455)&&!(ml&268435455)||vn(jt,St)}function Gi(e,t){var r=We;We|=2;var n=jm();(jt!==e||St!==t)&&(Xr=null,Xn(e,t));do try{ov();break}catch(a){km(e,a)}while(1);if(ru(),We=r,Wi.current=n,yt!==null)throw Error(Z(261));return jt=null,St=0,wt}function ov(){for(;yt!==null;)Nm(yt)}function iv(){for(;yt!==null&&!Ox();)Nm(yt)}function Nm(e){var t=Em(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?_m(e):yt=t,mu.current=null}function _m(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ev(r,t),r!==null){r.flags&=32767,yt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wt=6,yt=null;return}}else if(r=Zb(r,t,sr),r!==null){yt=r;return}if(t=t.sibling,t!==null){yt=t;return}yt=t=e}while(t!==null);wt===0&&(wt=5)}function Bn(e,t,r){var n=Ke,a=yr.transition;try{yr.transition=null,Ke=1,lv(e,t,r,n)}finally{yr.transition=a,Ke=n}return null}function lv(e,t,r,n){do Ws();while(jn!==null);if(We&6)throw Error(Z(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Bx(e,o),e===jt&&(yt=jt=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Wo||(Wo=!0,Cm(Ci,function(){return Ws(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=yr.transition,yr.transition=null;var i=Ke;Ke=1;var l=We;We|=4,mu.current=null,rv(e,r),bm(r,e),Cb(qc),Ai=!!Wc,qc=Wc=null,e.current=r,nv(r),Mx(),We=l,Ke=i,yr.transition=o}else e.current=r;if(Wo&&(Wo=!1,jn=e,Vi=a),o=e.pendingLanes,o===0&&(Tn=null),Ix(r.stateNode),er(e,gt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(qi)throw qi=!1,e=ud,ud=null,e;return Vi&1&&e.tag!==0&&Ws(),o=e.pendingLanes,o&1?e===hd?$a++:($a=0,hd=e):$a=0,$n(),null}function Ws(){if(jn!==null){var e=sf(Vi),t=yr.transition,r=Ke;try{if(yr.transition=null,Ke=16>e?16:e,jn===null)var n=!1;else{if(e=jn,jn=null,Vi=0,We&6)throw Error(Z(331));var a=We;for(We|=4,pe=e.current;pe!==null;){var o=pe,i=o.child;if(pe.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(pe=d;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:Ra(8,u,o)}var p=u.child;if(p!==null)p.return=u,pe=p;else for(;pe!==null;){u=pe;var h=u.sibling,y=u.return;if(pm(u),u===d){pe=null;break}if(h!==null){h.return=y,pe=h;break}pe=y}}}var x=o.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}pe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,pe=i;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ra(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,pe=f;break e}pe=o.return}}var g=e.current;for(pe=g;pe!==null;){i=pe;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,pe=m;else e:for(i=g;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fl(9,l)}}catch(_){ct(l,l.return,_)}if(l===i){pe=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,pe=b;break e}pe=l.return}}if(We=a,$n(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(ol,e)}catch{}n=!0}return n}finally{Ke=r,yr.transition=t}}return!1}function a0(e,t,r){t=Xs(r,t),t=am(e,t,1),e=Cn(e,t,1),t=Wt(),e!==null&&(bo(e,1,t),er(e,t))}function ct(e,t,r){if(e.tag===3)a0(e,e,r);else for(;t!==null;){if(t.tag===3){a0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tn===null||!Tn.has(n))){e=Xs(r,e),e=om(t,e,1),t=Cn(t,e,1),e=Wt(),t!==null&&(bo(t,1,e),er(t,e));break}}t=t.return}}function cv(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&r,jt===e&&(St&r)===r&&(wt===4||wt===3&&(St&130023424)===St&&500>gt()-yu?Xn(e,0):pu|=r),er(e,t)}function Sm(e,t){t===0&&(e.mode&1?(t=Do,Do<<=1,!(Do&130023424)&&(Do=4194304)):t=1);var r=Wt();e=ln(e,t),e!==null&&(bo(e,t,r),er(e,r))}function dv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sm(e,r)}function uv(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(t),Sm(e,r)}var Em;Em=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Jt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Jt=!1,Xb(e,t,r);Jt=!!(e.flags&131072)}else Jt=!1,tt&&t.flags&1048576&&Pf(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yi(e,t),e=t.pendingProps;var a=Ks(t,It.current);Hs(t,r),a=du(null,t,n,e,a,r);var o=uu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(n)?(o=!0,Ri(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,au(t),a.updater=gl,t.stateNode=a,a._reactInternals=t,ed(t,n,e,r),t=nd(null,t,n,!0,o,r)):(t.tag=0,tt&&o&&Xd(t),Ut(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=gv(n),e=Tr(n,e),a){case 0:t=rd(null,t,n,e,r);break e;case 1:t=Yh(null,t,n,e,r);break e;case 11:t=Gh(null,t,n,e,r);break e;case 14:t=Kh(null,t,n,Tr(n.type,e),r);break e}throw Error(Z(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Tr(n,a),rd(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Tr(n,a),Yh(e,t,n,a,r);case 3:e:{if(dm(t),e===null)throw Error(Z(387));n=t.pendingProps,o=t.memoizedState,a=o.element,$f(e,t),Fi(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Xs(Error(Z(423)),t),t=Jh(e,t,n,r,a);break e}else if(n!==a){a=Xs(Error(Z(424)),t),t=Jh(e,t,n,r,a);break e}else for(ir=En(t.stateNode.containerInfo.firstChild),lr=t,tt=!0,Mr=null,r=Rf(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ys(),n===a){t=cn(e,t,r);break e}Ut(e,t,n,r)}t=t.child}return t;case 5:return Lf(t),e===null&&Qc(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Vc(n,a)?i=null:o!==null&&Vc(n,o)&&(t.flags|=32),cm(e,t),Ut(e,t,i,r),t.child;case 6:return e===null&&Qc(t),null;case 13:return um(e,t,r);case 4:return ou(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Js(t,null,n,r):Ut(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Tr(n,a),Gh(e,t,n,a,r);case 7:return Ut(e,t,t.pendingProps,r),t.child;case 8:return Ut(e,t,t.pendingProps.children,r),t.child;case 12:return Ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Qe(Li,n._currentValue),n._currentValue=i,o!==null)if($r(o.value,i)){if(o.children===a.children&&!Xt.current){t=cn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=nn(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Xc(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Z(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Xc(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ut(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Hs(t,r),a=xr(a),n=n(a),t.flags|=1,Ut(e,t,n,r),t.child;case 14:return n=t.type,a=Tr(n,t.pendingProps),a=Tr(n.type,a),Kh(e,t,n,a,r);case 15:return im(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Tr(n,a),yi(e,t),t.tag=1,Zt(n)?(e=!0,Ri(t)):e=!1,Hs(t,r),sm(t,n,a),ed(t,n,a,r),nd(null,t,n,!0,e,r);case 19:return hm(e,t,r);case 22:return lm(e,t,r)}throw Error(Z(156,t.tag))};function Cm(e,t){return ef(e,t)}function hv(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(e,t,r,n){return new hv(e,t,r,n)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gv(e){if(typeof e=="function")return wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fd)return 11;if(e===Ud)return 14}return 2}function Pn(e,t){var r=e.alternate;return r===null?(r=pr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function vi(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")wu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case _s:return Zn(r.children,a,o,t);case zd:i=8,a|=8;break;case Nc:return e=pr(12,r,t,a|2),e.elementType=Nc,e.lanes=o,e;case _c:return e=pr(13,r,t,a),e.elementType=_c,e.lanes=o,e;case Sc:return e=pr(19,r,t,a),e.elementType=Sc,e.lanes=o,e;case $g:return pl(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rg:i=10;break e;case Ig:i=9;break e;case Fd:i=11;break e;case Ud:i=14;break e;case pn:i=16,n=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=pr(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function Zn(e,t,r,n){return e=pr(7,e,n,t),e.lanes=r,e}function pl(e,t,r,n){return e=pr(22,e,n,t),e.elementType=$g,e.lanes=r,e.stateNode={isHidden:!1},e}function nc(e,t,r){return e=pr(6,e,null,t),e.lanes=r,e}function sc(e,t,r){return t=pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fv(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ku(e,t,r,n,a,o,i,l,c){return e=new fv(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=pr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},au(o),e}function mv(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Tm(e){if(!e)return Dn;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var r=e.type;if(Zt(r))return Tf(e,r,t)}return t}function Am(e,t,r,n,a,o,i,l,c){return e=ku(r,n,!0,e,a,o,i,l,c),e.context=Tm(null),r=e.current,n=Wt(),a=An(r),o=nn(n,a),o.callback=t??null,Cn(r,o,a),e.current.lanes=a,bo(e,a,n),er(e,n),e}function yl(e,t,r,n){var a=t.current,o=Wt(),i=An(a);return r=Tm(r),t.context===null?t.context=r:t.pendingContext=r,t=nn(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cn(a,t,i),e!==null&&(Ir(e,a,i,o),fi(e,a,i)),i}function Ki(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function o0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ju(e,t){o0(e,t),(e=e.alternate)&&o0(e,t)}function pv(){return null}var Pm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nu(e){this._internalRoot=e}xl.prototype.render=Nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));yl(e,t,null,null)};xl.prototype.unmount=Nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ss(function(){yl(null,e,null,null)}),t[on]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=lf();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bn.length&&t!==0&&t<bn[r].priority;r++);bn.splice(r,0,e),r===0&&df(e)}};function _u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i0(){}function yv(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var d=Ki(i);o.call(d)}}var i=Am(t,n,e,0,null,!1,!1,"",i0);return e._reactRootContainer=i,e[on]=i.current,Xa(e.nodeType===8?e.parentNode:e),ss(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Ki(c);l.call(d)}}var c=ku(e,0,!1,null,null,!1,!1,"",i0);return e._reactRootContainer=c,e[on]=c.current,Xa(e.nodeType===8?e.parentNode:e),ss(function(){yl(t,c,r,n)}),c}function vl(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=Ki(i);l.call(c)}}yl(t,i,e,a)}else i=yv(r,t,e,a,n);return Ki(i)}af=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Na(t.pendingLanes);r!==0&&(Wd(t,r|1),er(t,gt()),!(We&6)&&(Zs=gt()+500,$n()))}break;case 13:ss(function(){var n=ln(e,1);if(n!==null){var a=Wt();Ir(n,e,1,a)}}),ju(e,1)}};qd=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var r=Wt();Ir(t,e,134217728,r)}ju(e,134217728)}};of=function(e){if(e.tag===13){var t=An(e),r=ln(e,t);if(r!==null){var n=Wt();Ir(r,e,t,n)}ju(e,t)}};lf=function(){return Ke};cf=function(e,t){var r=Ke;try{return Ke=e,t()}finally{Ke=r}};Ic=function(e,t,r){switch(t){case"input":if(Tc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=dl(n);if(!a)throw Error(Z(90));zg(n),Tc(n,a)}}}break;case"textarea":Ug(e,r);break;case"select":t=r.value,t!=null&&zs(e,!!r.multiple,t,!1)}};Kg=xu;Yg=ss;var xv={usingClientEntryPoint:!1,Events:[wo,Ts,dl,Vg,Gg,xu]},va={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bv={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xg(e),e===null?null:e.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{ol=qo.inject(bv),qr=qo}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xv;ur.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_u(t))throw Error(Z(200));return mv(e,t,null,r)};ur.createRoot=function(e,t){if(!_u(e))throw Error(Z(299));var r=!1,n="",a=Pm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ku(e,1,!1,null,null,r,!1,n,a),e[on]=t.current,Xa(e.nodeType===8?e.parentNode:e),new Nu(t)};ur.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=Xg(t),e=e===null?null:e.stateNode,e};ur.flushSync=function(e){return ss(e)};ur.hydrate=function(e,t,r){if(!bl(t))throw Error(Z(200));return vl(null,e,t,!0,r)};ur.hydrateRoot=function(e,t,r){if(!_u(e))throw Error(Z(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=Pm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Am(t,null,e,1,r??null,a,!1,o,i),e[on]=t.current,Xa(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new xl(t)};ur.render=function(e,t,r){if(!bl(t))throw Error(Z(200));return vl(null,e,t,!1,r)};ur.unmountComponentAtNode=function(e){if(!bl(e))throw Error(Z(40));return e._reactRootContainer?(ss(function(){vl(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};ur.unstable_batchedUpdates=xu;ur.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bl(r))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return vl(e,t,r,!1,n)};ur.version="18.3.1-next-f1338f8080-20240426";function Om(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Om)}catch(e){console.error(e)}}Om(),Pg.exports=ur;var jo=Pg.exports,l0=jo;kc.createRoot=l0.createRoot,kc.hydrateRoot=l0.hydrateRoot;function Mm(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Mm(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Wr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Mm(e))&&(n&&(n+=" "),n+=t);return n}const vv=Object.freeze(Object.defineProperty({__proto__:null,clsx:Wr,default:Wr},Symbol.toStringTag,{value:"Module"})),La=e=>typeof e=="number"&&!isNaN(e),as=e=>typeof e=="string",Qt=e=>typeof e=="function",wi=e=>as(e)||Qt(e)?e:null,ac=e=>k.isValidElement(e)||as(e)||Qt(e)||La(e);function wv(e,t,r){r===void 0&&(r=300);const{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function wl(e){let{enter:t,exit:r,appendPosition:n=!1,collapse:a=!0,collapseDuration:o=300}=e;return function(i){let{children:l,position:c,preventExitTransition:d,done:u,nodeRef:p,isIn:h}=i;const y=n?`${t}--${c}`:t,x=n?`${r}--${c}`:r,v=k.useRef(0);return k.useLayoutEffect(()=>{const w=p.current,f=y.split(" "),g=m=>{m.target===p.current&&(w.dispatchEvent(new Event("d")),w.removeEventListener("animationend",g),w.removeEventListener("animationcancel",g),v.current===0&&m.type!=="animationcancel"&&w.classList.remove(...f))};w.classList.add(...f),w.addEventListener("animationend",g),w.addEventListener("animationcancel",g)},[]),k.useEffect(()=>{const w=p.current,f=()=>{w.removeEventListener("animationend",f),a?wv(w,u,o):u()};h||(d?f():(v.current=1,w.className+=` ${x}`,w.addEventListener("animationend",f)))},[h]),He.createElement(He.Fragment,null,l)}}function c0(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const gr={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const r=this.list.get(e).filter(n=>n!==t);return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const r=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(r)})}},Vo=e=>{let{theme:t,type:r,...n}=e;return He.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...n})},oc={info:function(e){return He.createElement(Vo,{...e},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return He.createElement(Vo,{...e},He.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return He.createElement(Vo,{...e},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return He.createElement(Vo,{...e},He.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return He.createElement("div",{className:"Toastify__spinner"})}};function kv(e){const[,t]=k.useReducer(y=>y+1,0),[r,n]=k.useState([]),a=k.useRef(null),o=k.useRef(new Map).current,i=y=>r.indexOf(y)!==-1,l=k.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:i,getToast:y=>o.get(y)}).current;function c(y){let{containerId:x}=y;const{limit:v}=l.props;!v||x&&l.containerId!==x||(l.count-=l.queue.length,l.queue=[])}function d(y){n(x=>y==null?[]:x.filter(v=>v!==y))}function u(){const{toastContent:y,toastProps:x,staleId:v}=l.queue.shift();h(y,x,v)}function p(y,x){let{delay:v,staleId:w,...f}=x;if(!ac(y)||function(I){return!a.current||l.props.enableMultiContainer&&I.containerId!==l.props.containerId||o.has(I.toastId)&&I.updateId==null}(f))return;const{toastId:g,updateId:m,data:b}=f,{props:_}=l,j=()=>d(g),N=m==null;N&&l.count++;const E={..._,style:_.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(f).filter(I=>{let[ee,le]=I;return le!=null})),toastId:g,updateId:m,data:b,closeToast:j,isIn:!1,className:wi(f.className||_.toastClassName),bodyClassName:wi(f.bodyClassName||_.bodyClassName),progressClassName:wi(f.progressClassName||_.progressClassName),autoClose:!f.isLoading&&($=f.autoClose,O=_.autoClose,$===!1||La($)&&$>0?$:O),deleteToast(){const I=c0(o.get(g),"removed");o.delete(g),gr.emit(4,I);const ee=l.queue.length;if(l.count=g==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),ee>0){const le=g==null?l.props.limit:1;if(ee===1||le===1)l.displayedToast++,u();else{const re=le>ee?ee:le;l.displayedToast=re;for(let W=0;W<re;W++)u()}}else t()}};var $,O;E.iconOut=function(I){let{theme:ee,type:le,isLoading:re,icon:W}=I,L=null;const z={theme:ee,type:le};return W===!1||(Qt(W)?L=W(z):k.isValidElement(W)?L=k.cloneElement(W,z):as(W)||La(W)?L=W:re?L=oc.spinner():(A=>A in oc)(le)&&(L=oc[le](z))),L}(E),Qt(f.onOpen)&&(E.onOpen=f.onOpen),Qt(f.onClose)&&(E.onClose=f.onClose),E.closeButton=_.closeButton,f.closeButton===!1||ac(f.closeButton)?E.closeButton=f.closeButton:f.closeButton===!0&&(E.closeButton=!ac(_.closeButton)||_.closeButton);let K=y;k.isValidElement(y)&&!as(y.type)?K=k.cloneElement(y,{closeToast:j,toastProps:E,data:b}):Qt(y)&&(K=y({closeToast:j,toastProps:E,data:b})),_.limit&&_.limit>0&&l.count>_.limit&&N?l.queue.push({toastContent:K,toastProps:E,staleId:w}):La(v)?setTimeout(()=>{h(K,E,w)},v):h(K,E,w)}function h(y,x,v){const{toastId:w}=x;v&&o.delete(v);const f={content:y,props:x};o.set(w,f),n(g=>[...g,w].filter(m=>m!==v)),gr.emit(4,c0(f,f.props.updateId==null?"added":"updated"))}return k.useEffect(()=>(l.containerId=e.containerId,gr.cancelEmit(3).on(0,p).on(1,y=>a.current&&d(y)).on(5,c).emit(2,l),()=>{o.clear(),gr.emit(3,l)}),[]),k.useEffect(()=>{l.props=e,l.isToastActive=i,l.displayedToast=r.length}),{getToastToRender:function(y){const x=new Map,v=Array.from(o.values());return e.newestOnTop&&v.reverse(),v.forEach(w=>{const{position:f}=w.props;x.has(f)||x.set(f,[]),x.get(f).push(w)}),Array.from(x,w=>y(w[0],w[1]))},containerRef:a,isToastActive:i}}function d0(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function u0(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function jv(e){const[t,r]=k.useState(!1),[n,a]=k.useState(!1),o=k.useRef(null),i=k.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=k.useRef(e),{autoClose:c,pauseOnHover:d,closeToast:u,onClick:p,closeOnClick:h}=e;function y(b){if(e.draggable){b.nativeEvent.type==="touchstart"&&b.nativeEvent.preventDefault(),i.didMove=!1,document.addEventListener("mousemove",f),document.addEventListener("mouseup",g),document.addEventListener("touchmove",f),document.addEventListener("touchend",g);const _=o.current;i.canCloseOnClick=!0,i.canDrag=!0,i.boundingRect=_.getBoundingClientRect(),_.style.transition="",i.x=d0(b.nativeEvent),i.y=u0(b.nativeEvent),e.draggableDirection==="x"?(i.start=i.x,i.removalDistance=_.offsetWidth*(e.draggablePercent/100)):(i.start=i.y,i.removalDistance=_.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function x(b){if(i.boundingRect){const{top:_,bottom:j,left:N,right:E}=i.boundingRect;b.nativeEvent.type!=="touchend"&&e.pauseOnHover&&i.x>=N&&i.x<=E&&i.y>=_&&i.y<=j?w():v()}}function v(){r(!0)}function w(){r(!1)}function f(b){const _=o.current;i.canDrag&&_&&(i.didMove=!0,t&&w(),i.x=d0(b),i.y=u0(b),i.delta=e.draggableDirection==="x"?i.x-i.start:i.y-i.start,i.start!==i.x&&(i.canCloseOnClick=!1),_.style.transform=`translate${e.draggableDirection}(${i.delta}px)`,_.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance)))}function g(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",g);const b=o.current;if(i.canDrag&&i.didMove&&b){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return a(!0),void e.closeToast();b.style.transition="transform 0.2s, opacity 0.2s",b.style.transform=`translate${e.draggableDirection}(0)`,b.style.opacity="1"}}k.useEffect(()=>{l.current=e}),k.useEffect(()=>(o.current&&o.current.addEventListener("d",v,{once:!0}),Qt(e.onOpen)&&e.onOpen(k.isValidElement(e.children)&&e.children.props),()=>{const b=l.current;Qt(b.onClose)&&b.onClose(k.isValidElement(b.children)&&b.children.props)}),[]),k.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",v),window.addEventListener("blur",w)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",v),window.removeEventListener("blur",w))}),[e.pauseOnFocusLoss]);const m={onMouseDown:y,onTouchStart:y,onMouseUp:x,onTouchEnd:x};return c&&d&&(m.onMouseEnter=w,m.onMouseLeave=v),h&&(m.onClick=b=>{p&&p(b),i.canCloseOnClick&&u()}),{playToast:v,pauseToast:w,isRunning:t,preventExitTransition:n,toastRef:o,eventHandlers:m}}function Dm(e){let{closeToast:t,theme:r,ariaLabel:n="close"}=e;return He.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:a=>{a.stopPropagation(),t(a)},"aria-label":n},He.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},He.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Nv(e){let{delay:t,isRunning:r,closeToast:n,type:a="default",hide:o,className:i,style:l,controlledProgress:c,progress:d,rtl:u,isIn:p,theme:h}=e;const y=o||c&&d===0,x={...l,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused",opacity:y?0:1};c&&(x.transform=`scaleX(${d})`);const v=Wr("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":u}),w=Qt(i)?i({rtl:u,type:a,defaultClassName:v}):Wr(v,i);return He.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:w,style:x,[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{p&&n()}})}const _v=e=>{const{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:a}=jv(e),{closeButton:o,children:i,autoClose:l,onClick:c,type:d,hideProgressBar:u,closeToast:p,transition:h,position:y,className:x,style:v,bodyClassName:w,bodyStyle:f,progressClassName:g,progressStyle:m,updateId:b,role:_,progress:j,rtl:N,toastId:E,deleteToast:$,isIn:O,isLoading:K,iconOut:I,closeOnClick:ee,theme:le}=e,re=Wr("Toastify__toast",`Toastify__toast-theme--${le}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":ee}),W=Qt(x)?x({rtl:N,position:y,type:d,defaultClassName:re}):Wr(re,x),L=!!j||!l,z={closeToast:p,type:d,theme:le};let A=null;return o===!1||(A=Qt(o)?o(z):k.isValidElement(o)?k.cloneElement(o,z):Dm(z)),He.createElement(h,{isIn:O,done:$,position:y,preventExitTransition:r,nodeRef:n},He.createElement("div",{id:E,onClick:c,className:W,...a,style:v,ref:n},He.createElement("div",{...O&&{role:_},className:Qt(w)?w({type:d}):Wr("Toastify__toast-body",w),style:f},I!=null&&He.createElement("div",{className:Wr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!K})},I),He.createElement("div",null,i)),A,He.createElement(Nv,{...b&&!L?{key:`pb-${b}`}:{},rtl:N,theme:le,delay:l,isRunning:t,isIn:O,closeToast:p,hide:u,type:d,style:m,className:g,controlledProgress:L,progress:j||0})))},kl=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Sv=wl(kl("bounce",!0));wl(kl("slide",!0));wl(kl("zoom"));wl(kl("flip"));const md=k.forwardRef((e,t)=>{const{getToastToRender:r,containerRef:n,isToastActive:a}=kv(e),{className:o,style:i,rtl:l,containerId:c}=e;function d(u){const p=Wr("Toastify__toast-container",`Toastify__toast-container--${u}`,{"Toastify__toast-container--rtl":l});return Qt(o)?o({position:u,rtl:l,defaultClassName:p}):Wr(p,wi(o))}return k.useEffect(()=>{t&&(t.current=n.current)},[]),He.createElement("div",{ref:n,className:"Toastify",id:c},r((u,p)=>{const h=p.length?{...i}:{...i,pointerEvents:"none"};return He.createElement("div",{className:d(u),style:h,key:`container-${u}`},p.map((y,x)=>{let{content:v,props:w}=y;return He.createElement(_v,{...w,isIn:a(w.toastId),style:{...w.style,"--nth":x+1,"--len":p.length},key:`toast-${w.key}`},v)}))}))});md.displayName="ToastContainer",md.defaultProps={position:"top-right",transition:Sv,autoClose:5e3,closeButton:Dm,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let ic,Hn=new Map,Sa=[],Ev=1;function Rm(){return""+Ev++}function Cv(e){return e&&(as(e.toastId)||La(e.toastId))?e.toastId:Rm()}function za(e,t){return Hn.size>0?gr.emit(0,e,t):Sa.push({content:e,options:t}),t.toastId}function Yi(e,t){return{...t,type:t&&t.type||e,toastId:Cv(t)}}function Go(e){return(t,r)=>za(t,Yi(e,r))}function F(e,t){return za(e,Yi("default",t))}F.loading=(e,t)=>za(e,Yi("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),F.promise=function(e,t,r){let n,{pending:a,error:o,success:i}=t;a&&(n=as(a)?F.loading(a,r):F.loading(a.render,{...r,...a}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(u,p,h)=>{if(p==null)return void F.dismiss(n);const y={type:u,...l,...r,data:h},x=as(p)?{render:p}:p;return n?F.update(n,{...y,...x}):F(x.render,{...y,...x}),h},d=Qt(e)?e():e;return d.then(u=>c("success",i,u)).catch(u=>c("error",o,u)),d},F.success=Go("success"),F.info=Go("info"),F.error=Go("error"),F.warning=Go("warning"),F.warn=F.warning,F.dark=(e,t)=>za(e,Yi("default",{theme:"dark",...t})),F.dismiss=e=>{Hn.size>0?gr.emit(1,e):Sa=Sa.filter(t=>e!=null&&t.options.toastId!==e)},F.clearWaitingQueue=function(e){return e===void 0&&(e={}),gr.emit(5,e)},F.isActive=e=>{let t=!1;return Hn.forEach(r=>{r.isToastActive&&r.isToastActive(e)&&(t=!0)}),t},F.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const r=function(n,a){let{containerId:o}=a;const i=Hn.get(o||ic);return i&&i.getToast(n)}(e,t);if(r){const{props:n,content:a}=r,o={delay:100,...n,...t,toastId:t.toastId||e,updateId:Rm()};o.toastId!==e&&(o.staleId=e);const i=o.render||a;delete o.render,za(i,o)}},0)},F.done=e=>{F.update(e,{progress:1})},F.onChange=e=>(gr.on(4,e),()=>{gr.off(4,e)}),F.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},F.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},gr.on(2,e=>{ic=e.containerId||e,Hn.set(ic,e),Sa.forEach(t=>{gr.emit(0,t.content,t.options)}),Sa=[]}).on(3,e=>{Hn.delete(e.containerId||e),Hn.size===0&&gr.off(0).off(1).off(5)});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>k.createElement("svg",{ref:u,...Tv,width:a,height:a,stroke:n,strokeWidth:i?Number(o)*24/Number(a):o,className:["lucide",`lucide-${Av(e)}`,l].join(" "),...d},[...t.map(([p,h])=>k.createElement(p,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=de("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=de("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=de("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=de("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=de("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=de("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=de("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=de("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=de("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=de("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=de("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=de("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=de("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=de("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=de("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=de("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=de("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=de("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=de("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=de("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=de("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=de("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=de("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=de("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=de("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=de("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=de("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=de("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=de("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=de("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=de("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=de("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var yd=function(e,t){return yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},yd(e,t)};function Km(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var el=function(){return el=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},el.apply(this,arguments)};function ia(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Ym(e,t,r,n){var a=arguments.length,o=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function Jm(e,t){return function(r,n){t(r,n,e)}}function Qm(e,t,r,n,a,o){function i(f){if(f!==void 0&&typeof f!="function")throw new TypeError("Function expected");return f}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p,h=!1,y=r.length-1;y>=0;y--){var x={};for(var v in n)x[v]=v==="access"?{}:n[v];for(var v in n.access)x.access[v]=n.access[v];x.addInitializer=function(f){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(f||null))};var w=(0,r[y])(l==="accessor"?{get:u.get,set:u.set}:u[c],x);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(p=i(w.get))&&(u.get=p),(p=i(w.set))&&(u.set=p),(p=i(w.init))&&a.unshift(p)}else(p=i(w))&&(l==="field"?a.unshift(p):u[c]=p)}d&&Object.defineProperty(d,n.name,u),h=!0}function Xm(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function Zm(e){return typeof e=="symbol"?e:"".concat(e)}function ep(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function tp(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ke(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(p){i(p)}}function c(u){try{d(n.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function rp(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var jl=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function np(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jl(t,e,r)}function tl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function sp(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Pu(arguments[t]));return e}function ap(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,a++)n[a]=o[i];return n}function op(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function ra(e){return this instanceof ra?(this.v=e,this):new ra(e)}function ip(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),a[Symbol.asyncIterator]=function(){return this},a;function i(y){return function(x){return Promise.resolve(x).then(y,p)}}function l(y,x){n[y]&&(a[y]=function(v){return new Promise(function(w,f){o.push([y,v,w,f])>1||c(y,v)})},x&&(a[y]=x(a[y])))}function c(y,x){try{d(n[y](x))}catch(v){h(o[0][3],v)}}function d(y){y.value instanceof ra?Promise.resolve(y.value.v).then(u,p):h(o[0][2],y)}function u(y){c("next",y)}function p(y){c("throw",y)}function h(y,x){y(x),o.shift(),o.length&&c(o[0][0],o[0][1])}}function lp(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,o){t[a]=e[a]?function(i){return(r=!r)?{value:ra(e[a](i)),done:!1}:o?o(i):i}:o}}function cp(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof tl=="function"?tl(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(i){return new Promise(function(l,c){i=e[o](i),a(l,c,i.done,i.value)})}}function a(o,i,l,c){Promise.resolve(c).then(function(d){o({value:d,done:l})},i)}}function dp(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Xv=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},xd=function(e){return xd=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},xd(e)};function up(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=xd(e),n=0;n<r.length;n++)r[n]!=="default"&&jl(t,e,r[n]);return Xv(t,e),t}function hp(e){return e&&e.__esModule?e:{default:e}}function gp(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function fp(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function mp(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function pp(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Zv=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function yp(e){function t(o){e.error=e.hasError?new Zv(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(a,function(i){return t(i),a()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function xp(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,o,i){return n?t?".jsx":".js":a&&(!o||!i)?r:a+o+"."+i.toLowerCase()+"js"}):e}const ew={__extends:Km,__assign:el,__rest:ia,__decorate:Ym,__param:Jm,__esDecorate:Qm,__runInitializers:Xm,__propKey:Zm,__setFunctionName:ep,__metadata:tp,__awaiter:ke,__generator:rp,__createBinding:jl,__exportStar:np,__values:tl,__read:Pu,__spread:sp,__spreadArrays:ap,__spreadArray:op,__await:ra,__asyncGenerator:ip,__asyncDelegator:lp,__asyncValues:cp,__makeTemplateObject:dp,__importStar:up,__importDefault:hp,__classPrivateFieldGet:gp,__classPrivateFieldSet:fp,__classPrivateFieldIn:mp,__addDisposableResource:pp,__disposeResources:yp,__rewriteRelativeImportExtension:xp},tw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pp,get __assign(){return el},__asyncDelegator:lp,__asyncGenerator:ip,__asyncValues:cp,__await:ra,__awaiter:ke,__classPrivateFieldGet:gp,__classPrivateFieldIn:mp,__classPrivateFieldSet:fp,__createBinding:jl,__decorate:Ym,__disposeResources:yp,__esDecorate:Qm,__exportStar:np,__extends:Km,__generator:rp,__importDefault:hp,__importStar:up,__makeTemplateObject:dp,__metadata:tp,__param:Jm,__propKey:Zm,__read:Pu,__rest:ia,__rewriteRelativeImportExtension:xp,__runInitializers:Xm,__setFunctionName:ep,__spread:sp,__spreadArray:op,__spreadArrays:ap,__values:tl,default:ew},Symbol.toStringTag,{value:"Module"})),rw="modulepreload",nw=function(e){return"/DatSer/"+e},x0={},la=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=nw(o),o in x0)return;x0[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const p=a[u];if(p.href===o&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":rw,i||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),i)return new Promise((u,p)=>{d.addEventListener("load",u),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},sw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>la(()=>Promise.resolve().then(()=>ds),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Ou extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class b0 extends Ou{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class v0 extends Ou{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class w0 extends Ou{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bd||(bd={}));class aw{constructor(t,{headers:r={},customFetch:n,region:a=bd.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=sw(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ke(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:o,method:i,body:l,signal:c}=n;let d={},{region:u}=n;u||(u=this.region);const p=new URL(`${this.url}/${r}`);u&&u!=="any"&&(d["x-region"]=u,p.searchParams.set("forceFunctionRegion",u));let h;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(d["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(d["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const y=yield this.fetch(p.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:h,signal:c}).catch(f=>{throw f.name==="AbortError"?f:new b0(f)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new v0(y);if(!y.ok)throw new w0(y);let v=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield y.json():v==="application/octet-stream"||v==="application/pdf"?w=yield y.blob():v==="text/event-stream"?w=y:v==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new b0(o)}:{data:null,error:o,response:o instanceof w0||o instanceof v0?o.context:void 0}}})}}var Bt={};const ca=Pd(tw);var Ko={},Yo={},Jo={},Qo={},Xo={},ow=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},na=ow();const iw=na.fetch,bp=na.fetch.bind(na),vp=na.Headers,lw=na.Request,cw=na.Response,ds=Object.freeze(Object.defineProperty({__proto__:null,Headers:vp,Request:lw,Response:cw,default:bp,fetch:iw},Symbol.toStringTag,{value:"Module"})),dw=Pd(ds);var Zo={},k0;function wp(){if(k0)return Zo;k0=1,Object.defineProperty(Zo,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Zo.default=e,Zo}var j0;function kp(){if(j0)return Xo;j0=1,Object.defineProperty(Xo,"__esModule",{value:!0});const e=ca,t=e.__importDefault(dw),r=e.__importDefault(wp());class n{constructor(o){var i,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(i=o.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=new Headers(this.headers),this.headers.set(o,i),this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,p,h,y;let x=null,v=null,w=null,f=d.status,g=d.statusText;if(d.ok){if(this.method!=="HEAD"){const j=await d.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=j:v=JSON.parse(j))}const b=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),_=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&_&&_.length>1&&(w=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(x={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,f=406,g="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const b=await d.text();try{x=JSON.parse(b),Array.isArray(x)&&d.status===404&&(v=[],x=null,f=200,g="OK")}catch{d.status===404&&b===""?(f=204,g="No Content"):x={message:b}}if(x&&this.isMaybeSingle&&(!((y=x==null?void 0:x.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,f=200,g="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:v,count:w,status:f,statusText:g}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,p,h;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(p=d==null?void 0:d.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,i)}returns(){return this}overrideTypes(){return this}}return Xo.default=n,Xo}var N0;function jp(){if(N0)return Qo;N0=1,Object.defineProperty(Qo,"__esModule",{value:!0});const t=ca.__importDefault(kp());class r extends t.default{select(a){let o=!1;const i=(a??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:i=o}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,o,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const p=[a?"analyze":null,o?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${h}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Qo.default=r,Qo}var _0;function Mu(){if(_0)return Jo;_0=1,Object.defineProperty(Jo,"__esModule",{value:!0});const t=ca.__importDefault(jp()),r=new RegExp("[,()]");class n extends t.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${l})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(o,`${d}fts${u}.${i}`),this}match(o){return Object.entries(o).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(o,i,l){return this.url.searchParams.append(o,`not.${i}.${l}`),this}or(o,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,i,l){return this.url.searchParams.append(o,`${i}.${l}`),this}}return Jo.default=n,Jo}var S0;function Np(){if(S0)return Yo;S0=1,Object.defineProperty(Yo,"__esModule",{value:!0});const t=ca.__importDefault(Mu());class r{constructor(a,{headers:o={},schema:i,fetch:l}){this.url=a,this.headers=new Headers(o),this.schema=i,this.fetch=l}select(a,o){const{head:i=!1,count:l}=o??{},c=i?"HEAD":"GET";let d=!1;const u=(a??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:i=!0}={}){var l;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((h,y)=>h.concat(Object.keys(y)),[]);if(p.length>0){const h=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:o}={}){var i;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:a}={}){var o;const i="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Yo.default=r,Yo}var E0;function uw(){if(E0)return Ko;E0=1,Object.defineProperty(Ko,"__esModule",{value:!0});const e=ca,t=e.__importDefault(Np()),r=e.__importDefault(Mu());class n{constructor(o,{headers:i={},schema:l,fetch:c}={}){this.url=o,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(o){const i=new URL(`${this.url}/${o}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:l=!1,get:c=!1,count:d}={}){var u;let p;const h=new URL(`${this.url}/rpc/${o}`);let y;l||c?(p=l?"HEAD":"GET",Object.entries(i).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{h.searchParams.append(v,w)})):(p="POST",y=i);const x=new Headers(this.headers);return d&&x.set("Prefer",`count=${d}`),new r.default({method:p,url:h,headers:x,schema:this.schemaName,body:y,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Ko.default=n,Ko}Object.defineProperty(Bt,"__esModule",{value:!0});var _p=Bt.PostgrestError=Rp=Bt.PostgrestBuilder=Mp=Bt.PostgrestTransformBuilder=Pp=Bt.PostgrestFilterBuilder=Tp=Bt.PostgrestQueryBuilder=Ep=Bt.PostgrestClient=void 0;const da=ca,Sp=da.__importDefault(uw());var Ep=Bt.PostgrestClient=Sp.default;const Cp=da.__importDefault(Np());var Tp=Bt.PostgrestQueryBuilder=Cp.default;const Ap=da.__importDefault(Mu());var Pp=Bt.PostgrestFilterBuilder=Ap.default;const Op=da.__importDefault(jp());var Mp=Bt.PostgrestTransformBuilder=Op.default;const Dp=da.__importDefault(kp());var Rp=Bt.PostgrestBuilder=Dp.default;const Ip=da.__importDefault(wp());_p=Bt.PostgrestError=Ip.default;var $p=Bt.default={PostgrestClient:Sp.default,PostgrestQueryBuilder:Cp.default,PostgrestFilterBuilder:Ap.default,PostgrestTransformBuilder:Op.default,PostgrestBuilder:Dp.default,PostgrestError:Ip.default};const hw=Ky({__proto__:null,get PostgrestBuilder(){return Rp},get PostgrestClient(){return Ep},get PostgrestError(){return _p},get PostgrestFilterBuilder(){return Pp},get PostgrestQueryBuilder(){return Tp},get PostgrestTransformBuilder(){return Mp},default:$p},[Bt]),{PostgrestClient:gw,PostgrestQueryBuilder:WN,PostgrestFilterBuilder:qN,PostgrestTransformBuilder:VN,PostgrestBuilder:GN,PostgrestError:KN}=$p||hw;class fw{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mw="2.78.0",pw=`realtime-js/${mw}`,yw="1.0.0",vd=1e4,xw=1e3,bw=100;var Fa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fa||(Fa={}));var xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xt||(xt={}));var Or;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Or||(Or={}));var wd;(function(e){e.websocket="websocket"})(wd||(wd={}));var Vn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vn||(Vn={}));class vw{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+a));i=i+a;const c=n.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Lp{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Je||(Je={}));const C0=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((o,i)=>(o[i]=ww(i,e,t,a),o),{}):{}},ww=(e,t,r,n)=>{const a=t.find(l=>l.name===e),o=a==null?void 0:a.type,i=r[e];return o&&!n.includes(o)?zp(o,i):kd(i)},zp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _w(t,r)}switch(e){case Je.bool:return kw(t);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return jw(t);case Je.json:case Je.jsonb:return Nw(t);case Je.timestamp:return Sw(t);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return kd(t);default:return kd(t)}},kd=e=>e,kw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Nw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_w=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>zp(t,l))}return e},Sw=e=>typeof e=="string"?e.replace(" ","T"):e,Fp=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class lc{constructor(t,r,n={},a=vd){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var T0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(T0||(T0={}));class Ua{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ua.syncState(this.state,a,o,i),this.pendingDiffs.forEach(c=>{this.state=Ua.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ua.syncDiff(this.state,a,o,i),l())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const p=o[d];if(p){const h=u.map(w=>w.presence_ref),y=p.map(w=>w.presence_ref),x=u.filter(w=>y.indexOf(w.presence_ref)<0),v=p.filter(w=>h.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const p=t[l].map(y=>y.presence_ref),h=u.filter(y=>p.indexOf(y.presence_ref)<0);t[l].unshift(...h)}n(l,u,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var A0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(A0||(A0={}));var Ba;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ba||(Ba={}));var Zr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zr||(Zr={}));class Du{constructor(t,r={config:{}},n){var a,o;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new lc(this,Or.join,this.params,this.timeout),this.rejoinTimer=new Lp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Or.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Ua(this),this.broadcastEndpointURL=Fp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Ba.PRESENCE]&&this.bindings[Ba.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},h={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Zr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Zr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){t==null||t(Zr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(x=v==null?void 0:v.length)!==null&&x!==void 0?x:0,f=[];for(let g=0;g<w;g++){const m=v[g],{filter:{event:b,schema:_,table:j,filter:N}}=m,E=y&&y[g];if(E&&E.event===b&&E.schema===_&&E.table===j&&E.filter===N)f.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=xt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,t&&t(Zr.SUBSCRIBED);return}}).receive("error",y=>{this.state=xt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xt.joined&&t===Ba.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Or.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new lc(this,Or.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new lc(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Or;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var x,v,w;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(v=y.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(y=>y.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(y=>{var x,v,w,f,g,m;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in y){const b=y.id,_=(x=y.filter)===null||x===void 0?void 0:x.event;return b&&((v=r.ids)===null||v===void 0?void 0:v.includes(b))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(g=(f=y==null?void 0:y.filter)===null||f===void 0?void 0:f.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return b==="*"||b===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===i}).map(y=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:v,table:w,commit_timestamp:f,type:g,errors:m}=x;h=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:f,eventType:g,new:{},old:{},errors:m}),this._getPayloadRecords(x))}y.callback(h,n)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Du.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Or.close,{},t)}_onError(t){this._on(Or.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=C0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=C0(t.columns,t.old_record)),r}}const cc=()=>{},ei={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ew=[1e3,2e3,5e3,1e4],Cw=1e4,Tw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Aw{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vd,this.transport=null,this.heartbeatIntervalMs=ei.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cc,this.ref=0,this.reconnectTimer=null,this.logger=cc,this.conn=null,this.sendBuffer=[],this.serializer=new vw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...i)=>la(()=>Promise.resolve().then(()=>ds),void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${wd.websocket}`,this.httpEndpoint=Fp(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fw.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yw}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fa.connecting:return Vn.Connecting;case Fa.open:return Vn.Open;case Fa.closing:return Vn.Closing;default:return Vn.Closed}}isConnected(){return this.connectionState()===Vn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new Du(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:a,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(xw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ei.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Or.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Tw],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:pw};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Or.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Lp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ei.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,o,i,l,c,d,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:vd,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:ei.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:cc,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:p=>Ew[p-1]||Cw,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(p,h)=>h(JSON.stringify(p)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ru extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function rt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Pw extends Ru{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jd extends Ru{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Iu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>la(()=>Promise.resolve().then(()=>ds),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Ow=()=>ke(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield la(()=>Promise.resolve().then(()=>ds),void 0)).Response:Response}),Nd=e=>{if(Array.isArray(e))return e.map(r=>Nd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Nd(n)}),t},Mw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},dc=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Dw=(e,t,r)=>ke(void 0,void 0,void 0,function*(){const n=yield Ow();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,i=(a==null?void 0:a.statusCode)||o+"";t(new Pw(dc(a),o,i))}).catch(a=>{t(new jd(dc(a),a))}):t(new jd(dc(e),e))}),Rw=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Mw(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function _o(e,t,r,n,a,o){return ke(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Rw(t,n,a,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Dw(c,l,n))})})}function go(e,t,r,n){return ke(this,void 0,void 0,function*(){return _o(e,"GET",t,r,n)})}function Ar(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return _o(e,"POST",t,n,a,r)})}function _d(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return _o(e,"PUT",t,n,a,r)})}function Iw(e,t,r,n){return ke(this,void 0,void 0,function*(){return _o(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function $u(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return _o(e,"DELETE",t,n,a,r)})}class $w{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(rt(t))return{data:null,error:t};throw t}})}}var Up;class Lw{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[Up]="BlobDownloadBuilder",this.promise=null}asStream(){return new $w(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(rt(t))return{data:null,error:t};throw t}})}}Up=Symbol.toStringTag;const zw=Lw,Fw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},P0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uw{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Iu(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return ke(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},P0),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),p=yield(t=="PUT"?_d:Ar)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(rt(o))return{data:null,error:o};throw o}})}upload(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return ke(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:P0.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const p=yield _d(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Ar(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Ru("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}update(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return ke(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield Ar(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return ke(this,void 0,void 0,function*(){try{const a=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>go(this.fetch,`${this.url}/${a}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new zw(c,this.shouldThrowOnError)}info(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield go(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nd(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}exists(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Iw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n)&&n instanceof jd){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return ke(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}list(t,r,n){return ke(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Fw),r),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}listV2(t,r){return ke(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Bp="2.78.0",Hp={"X-Client-Info":`storage-js/${Bp}`};class Bw{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hp),r),this.fetch=Iu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield go(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}createBucket(t){return ke(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return ke(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class Hw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hp),r),this.fetch=Iu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield go(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}})}}const Lu={"X-Client-Info":`storage-js/${Bp}`,"Content-Type":"application/json"};class Wp extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ar(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class uc extends Wp{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ww extends Wp{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var O0;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(O0||(O0={}));const zu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>la(()=>Promise.resolve().then(()=>ds),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},qw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vw=(e,t,r)=>ke(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,o=e;if(typeof o.json=="function")o.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||a+"";t(new uc(M0(i),a,l))}).catch(()=>{const i=a+"",l=o.statusText||`HTTP ${a} error`;t(new uc(l,a,i))});else{const i=a+"",l=o.statusText||`HTTP ${a} error`;t(new uc(l,a,i))}}else t(new Ww(M0(e),e))}),Gw=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(qw(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r))};function Kw(e,t,r,n,a,o){return ke(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Gw(t,n,a,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>Vw(c,l,n))})})}function or(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return Kw(e,"POST",t,n,a,r)})}class Yw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lu),r),this.fetch=zu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ke(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ar(n))return{data:null,error:n};throw n}})}listIndexes(t){return ke(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ke(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ar(n))return{data:null,error:n};throw n}})}}class Jw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lu),r),this.fetch=zu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield or(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}listVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield or(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}queryVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield or(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}}class Qw{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lu),r),this.fetch=zu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}listBuckets(){return ke(this,arguments,void 0,function*(t={}){try{return{data:yield or(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ar(r))return{data:null,error:r};throw r}})}}class Xw extends Qw{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Zw(this.url,this.headers,t,this.fetch)}}class Zw extends Yw{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ke(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ke(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ke(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ke(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new ek(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class ek extends Jw{constructor(t,r,n,a,o){super(t,r,o),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ke(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ke(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ke(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ke(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ke(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class tk extends Bw{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new Uw(this.url,this.headers,t,this.fetch)}get vectors(){return new Xw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hw(this.url+"/iceberg",this.headers,this.fetch)}}const rk="2.78.0";let Ea="";typeof Deno<"u"?Ea="deno":typeof document<"u"?Ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ea="react-native":Ea="node";const nk={"X-Client-Info":`supabase-js-${Ea}/${rk}`},sk={headers:nk},ak={schema:"public"},ok={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ik={},lk=e=>{let t;return e?t=e:typeof fetch>"u"?t=bp:t=fetch,(...r)=>t(...r)},ck=()=>typeof Headers>"u"?vp:Headers,dk=(e,t,r)=>{const n=lk(r),a=ck();return async(o,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:d}))}};function uk(e){return e.endsWith("/")?e:e+"/"}function hk(e,t){var r,n;const{db:a,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:u,global:p}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function gk(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uk(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qp="2.78.0",ks=30*1e3,Sd=3,hc=Sd*ks,fk="http://localhost:9999",mk="supabase.auth.token",pk={"X-Client-Info":`gotrue-js/${qp}`},Ed="X-Supabase-Api-Version",Vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xk=10*60*1e3;class fo extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ee(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class bk extends fo{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function vk(e){return Ee(e)&&e.name==="AuthApiError"}class Gn extends fo{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ln extends fo{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Sr extends Ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wk(e){return Ee(e)&&e.name==="AuthSessionMissingError"}class fs extends Ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ti extends Ln{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ri extends Ln{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kk(e){return Ee(e)&&e.name==="AuthImplicitGrantRedirectError"}class D0 extends Ln{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cd extends Ln{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gc(e){return Ee(e)&&e.name==="AuthRetryableFetchError"}class R0 extends Ln{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Td extends Ln{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),I0=` 	
\r=`.split(""),jk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<I0.length;t+=1)e[I0[t].charCodeAt(0)]=-2;for(let t=0;t<rl.length;t+=1)e[rl[t].charCodeAt(0)]=t;return e})();function $0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(rl[n]),t.queuedBits-=6}}function Gp(e,t,r){const n=jk[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function L0(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=i=>{Sk(i,n,r)};for(let i=0;i<e.length;i+=1)Gp(e.charCodeAt(i),a,o);return t.join("")}function Nk(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _k(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Nk(n,t)}}function Sk(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vs(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Gp(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Ek(e){const t=[];return _k(e,r=>t.push(r)),new Uint8Array(t)}function Qn(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>$0(a,r,n)),$0(null,r,n),t.join("")}function Ck(e){return Math.round(Date.now()/1e3)+e}function Tk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const zt=()=>typeof window<"u"&&typeof document<"u",zn={tested:!1,writable:!1},Kp=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zn.tested)return zn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zn.tested=!0,zn.writable=!0}catch{zn.tested=!0,zn.writable=!1}return zn.writable};function Ak(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Yp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>la(()=>Promise.resolve().then(()=>ds),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Pk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",js=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Fn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gn=async(e,t)=>{await e.removeItem(t)};class Nl{constructor(){this.promise=new Nl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Nl.promiseConstructor=Promise;function fc(e){const t=e.split(".");if(t.length!==3)throw new Td("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!yk.test(t[n]))throw new Td("JWT not in base64url format");return{header:JSON.parse(L0(t[0])),payload:JSON.parse(L0(t[1])),signature:Vs(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ok(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Mk(e,t){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){a(i);return}}})()})}function Dk(e){return("0"+e.toString(16)).substr(-2)}function Rk(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Dk).join("")}async function Ik(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function $k(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Ik(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ms(e,t,r=!1){const n=Rk();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await js(e,`${t}-code-verifier`,a);const o=await $k(n);return[o,n===o?"plain":"s256"]}const Lk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zk(e){const t=e.headers.get(Ed);if(!t||!t.match(Lk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Fk(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Uk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ps(e){if(!Bk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mc(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hk(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function z0(e){return JSON.parse(JSON.stringify(e))}const qn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wk=[502,503,504];async function F0(e){var t;if(!Pk(e))throw new Cd(qn(e),0);if(Wk.includes(e.status))throw new Cd(qn(e),e.status);let r;try{r=await e.json()}catch(o){throw new Gn(qn(o),o)}let n;const a=zk(e);if(a&&a.getTime()>=Vp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new R0(qn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Sr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new R0(qn(r),e.status,r.weak_password.reasons);throw new bk(qn(r),e.status||500,n)}const qk=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Pe(e,t,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[Ed]||(o[Ed]=Vp["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Vk(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Vk(e,t,r,n,a,o){const i=qk(t,n,a,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Cd(qn(c),0)}if(l.ok||await F0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await F0(c)}}function Er(e){var t;let r=null;Yk(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Ck(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function U0(e){const t=Er(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function wn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Gk(e){return{data:e,error:null}}function Kk(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=e,i=ia(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function B0(e){return e}function Yk(e){return e.access_token&&e.refresh_token&&e.expires_in}const pc=["global","local","others"];class Jk{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Yp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=pc[0]){if(pc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pc.join(", ")}`);try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wn})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ia(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Kk,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wn})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:B0});if(u.error)throw u.error;const p=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,y=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=v}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ee(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){ps(t);try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wn})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ps(t);try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wn})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ps(t);try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wn})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ps(t.userId);try{const{data:r,error:n}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ps(t.userId),ps(t.id);try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:B0});if(u.error)throw u.error;const p=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,y=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=v}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Ee(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}}function H0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ys={debug:!!(globalThis&&Kp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Qk extends Jp{}async function Xk(e,t,r){ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Qk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ys.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Zk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qp(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function e1(e){return parseInt(e,16)}function t1(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function r1(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:u,uri:p,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=Qp(e.address),x=u?`${u}://${n}`:n,v=e.statement?`${e.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${y}

${v}`;let f=`URI: ${p}
Version: ${h}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(a&&(f+=`
Expiration Time: ${a.toISOString()}`),l&&(f+=`
Not Before: ${l.toISOString()}`),c&&(f+=`
Request ID: ${c}`),d){let g=`
Resources:`;for(const m of d){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);g+=`
- ${m}`}f+=g}return`${w}
${f}`}class pt extends Error{constructor({message:t,code:r,cause:n,name:a}){var o;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class nl extends pt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function n1({error:e,options:t}){var r,n,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Xp(i)){if(o.rp.id!==i)return new pt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function s1({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Xp(n)){if(r.rpId!==n)return new pt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class a1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const o1=new a1;function i1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=ia(e,["challenge","user","excludeCredentials"]),o=Vs(t).buffer,i=Object.assign(Object.assign({},r),{id:Vs(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:o,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Vs(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function l1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ia(e,["challenge","allowCredentials"]),a=Vs(t).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Vs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function c1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function d1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qn(new Uint8Array(a.authenticatorData)),clientDataJSON:Qn(new Uint8Array(a.clientDataJSON)),signature:Qn(new Uint8Array(a.signature)),userHandle:a.userHandle?Qn(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Xp(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function W0(){var e,t;return!!(zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function u1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",t)}:{data:null,error:new nl("Empty credential response",t)}}catch(t){return{data:null,error:n1({error:t,options:e})}}}async function h1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",t)}:{data:null,error:new nl("Empty credential response",t)}}catch(t){return{data:null,error:s1({error:t,options:e})}}}const g1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},f1={userVerification:"preferred",hints:["security-key"]};function sl(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const o in a){const i=a[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(t(i)){const l=n[o];t(l)?n[o]=sl(l,i):n[o]=sl(i)}else n[o]=i}return n}function m1(e,t){return sl(g1,e,t||{})}function p1(e,t){return sl(f1,e,t||{})}class y1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},o){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:l};const c=a??o1.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:d}=i.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(i.webauthn.type){case"create":{const d=m1(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:p}=await u1({publicKey:d,signal:c});return u?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:p}}case"request":{const d=p1(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:p}=await h1(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:p}}}}catch(i){return Ee(i)?{data:null,error:i}:{data:null,error:new Gn("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!r)return{data:null,error:new fo("rpId is required for WebAuthn authentication")};try{if(!W0())return{data:null,error:new Gn("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:o});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return Ee(i)?{data:null,error:i}:{data:null,error:new Gn("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!r)return{data:null,error:new fo("rpId is required for WebAuthn registration")};try{if(!W0())return{data:null,error:new Gn("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(u=>{var p;return(p=u.data)===null||p===void 0?void 0:p.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return Ee(i)?{data:null,error:i}:{data:null,error:new Gn("Unexpected error in register",i)}}}}Zk();const x1={url:fk,storageKey:mk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function q0(e,t,r){return await r()}const xs={};class mo{get jwks(){var t,r;return(r=(t=xs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=xs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mo.nextInstanceID,mo.nextInstanceID+=1,this.instanceID>0&&zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},x1),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Jk({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Yp(a.fetch),this.lock=a.lock||q0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:zt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Xk:this.lock=q0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new y1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Kp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=H0(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Ak(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),zt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),kk(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ee(r)?{error:r}:{error:new Gn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Er}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ee(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,a;try{let o;if("email"in t){const{email:u,password:p,options:h}=t;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await ms(this.storage,this.storageKey)),o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:y,code_challenge_method:x},xform:Er})}else if("phone"in t){const{phone:u,password:p,options:h}=t;o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Er})}else throw new ti("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ee(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:U0})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:U0})}else throw new ti("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,o,i,l,c,d,u,p,h;let y,x;if("message"in t)y=t.message,x=t.signature;else{const{chain:v,wallet:w,statement:f,options:g}=t;let m;if(zt())if(typeof w=="object")m=w;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")m=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=w}const b=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),_=await m.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Qp(_[0]);let N=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const $=await m.request({method:"eth_chainId"});N=e1($)}const E={domain:b.host,address:j,statement:f,uri:b.href,version:"1",chainId:N,nonce:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(i=(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.resources};y=r1(E),x=await m.request({method:"personal_sign",params:[t1(y),j]})}try{const{data:v,error:w}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:x},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Er});if(w)throw w;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new fs}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:w})}catch(v){if(Ee(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,n,a,o,i,l,c,d,u,p,h,y;let x,v;if("message"in t)x=t.message,v=t.signature;else{const{chain:w,wallet:f,statement:g,options:m}=t;let b;if(zt())if(typeof f=="object")b=f;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))b=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=f}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const j=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let N;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")N=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)N=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((d=m==null?void 0:m.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((p=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||p===void 0)&&p.length?["Resources",...m.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const j=await b.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:w,error:f}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Qn(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Er});if(f)throw f;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new fs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:f})}catch(w){if(Ee(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Fn(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:i}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Er});if(await gn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new fs}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}catch(o){if(Ee(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:o,nonce:i}=t,l=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Er}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ms(this.storage,this.storageKey));const{error:p}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ti("You must provide either an email or phone number.")}catch(l){if(Ee(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Er});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Ee(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await ms(this.storage,this.storageKey)),await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Gk})}catch(o){if(Ee(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Sr;const{error:a}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ee(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:o}=t,{error:i}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:a,options:o}=t,{data:i,error:l}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new ti("You must provide either an email or phone number and a type")}catch(r){if(Ee(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<hc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Fn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=mc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=Hk(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wn}):await this._useSession(async r=>{var n,a,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:wn})})}catch(r){if(Ee(r))return wk(r)&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new Sr;const i=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ms(this.storage,this.storageKey));const{data:d,error:u}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:wn});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Sr;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:i}=fc(t.access_token);if(i.exp&&(n=i.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Ee(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Sr;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ee(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!zt())throw new ri("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ri(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new D0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ri("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new D0("No code detected.");const{data:g,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new ri("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(l);let h=u+p;c&&(h=parseInt(c));const y=h-u;y*1e3<=ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const x=h-p;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,u);const{data:v,error:w}=await this._getUser(o);if(w)throw w;const f={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:h,refresh_token:i,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:t.type},error:null}}catch(n){if(Ee(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Fn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{error:o};const i=(n=a.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(vk(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Tk(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await ms(this.storage,this.storageKey,!0));try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Ee(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var i,l,c,d,u;const{data:p,error:h}=o;if(h)throw h;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Pe(this.fetch,"GET",y,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return zt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ee(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:i,provider:l,token:c,access_token:d,nonce:u}=t,p=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Er}),{data:h,error:y}=p;return y?{data:{user:null,session:null},error:y}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new fs}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:y})}catch(a){if(Ee(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)throw i;return await Pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Mk(async a=>(a>0&&await Ok(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Er})),(a,o)=>{const i=200*Math.pow(2,a);return o&&gc(o)&&Date.now()+i-n<ks})}catch(n){if(this._debug(r,"error",n),Ee(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),zt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Fn(this.storage,this.storageKey);if(a&&this.userStorage){let i=await Fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:a.user},await js(this.userStorage,this.storageKey+"-user",i)),a.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:mc()}else if(a&&!a.user&&!a.user){const i=await Fn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(a.user=i.user,await gn(this.storage,this.storageKey+"-user"),await js(this.storage,this.storageKey,a)):a.user=mc()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hc;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${hc}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),gc(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(a.access_token);!l&&(i!=null&&i.user)?(a.user=i.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Nl;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Sr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(a,"error",o),Ee(o)){const i={data:null,error:o};return gc(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await js(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=z0(a);await js(this.storage,this.storageKey,o)}else{const a=z0(r);await js(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await gn(this.storage,this.storageKey),await gn(this.storage,this.storageKey+"-code-verifier"),await gn(this.storage,this.storageKey+"-user"),this.userStorage&&await gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ks);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/ks);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ks}ms, refresh threshold is ${Sd} ticks`),a<=Sd&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await ms(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?{data:null,error:o}:await Pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?c1(t.webauthn.credential_response):d1(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{data:null,error:o};const i=await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:i1(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:l1(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=fc(n.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?{data:null,error:a}:n?await Pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new Sr}})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return{data:null,error:o};if(!a)return{data:null,error:new Sr};const i=await Pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&zt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;if(o)return{data:null,error:o};if(!a)return{data:null,error:new Sr};const i=await Pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&zt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+xk>a)return n;const{data:o,error:i}=await Pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};n=y.session.access_token}const{header:a,payload:o,signature:i,raw:{header:l,payload:c}}=fc(n);r!=null&&r.allowExpired||Fk(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:o,header:a,signature:i},error:null}}const u=Uk(a.alg),p=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,i,Ek(`${l}.${c}`)))throw new Td("Invalid JWT signature");return{data:{claims:o,header:a,signature:i},error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}}mo.nextInstanceID=0;const b1=mo;class v1 extends b1{constructor(t){super(t)}}class w1{constructor(t,r,n){var a,o,i;this.supabaseUrl=t,this.supabaseKey=r;const l=gk(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:ak,realtime:ik,auth:Object.assign(Object.assign({},ok),{storageKey:c}),global:sk},u=hk(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=dk(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new gw(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new tk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new aw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},u,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,flowType:l,lock:c,debug:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Aw(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const k1=(e,t,r)=>new w1(e,t,r);function j1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}j1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zp=" https://znuxahdqxencqtsvxvja.supabase.co",N1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpudXhhaGRxeGVuY3F0c3Z4dmphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MDQzNjUsImV4cCI6MjA1MzM4MDM2NX0.8evCXHMfkn1yhsVB8lQ62BL3b6-j4KZ_oszTuYLT6G0",Ca=Zp!=="https://placeholder.supabase.co",Ae=Ca?k1(Zp,N1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"tmh-teen-auth",flowType:"pkce"},global:{headers:{"x-client-info":"tmht-checkin"}},realtime:{params:{eventsPerSecond:2}}}):null,_1=()=>{try{const e=localStorage.getItem("tmh-teen-auth");if(!e)return!1;const t=JSON.parse(e);return!!(t!=null&&t.access_token&&(t==null?void 0:t.expires_at)>Date.now()/1e3)}catch{return!1}},ey=k.createContext(null),Lr=()=>{const e=k.useContext(ey);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},S1=({children:e})=>{const[t,r]=k.useState(null),[n,a]=k.useState(!0),[o,i]=k.useState(null),l=k.useRef(!1),c=k.useCallback(g=>{(window.requestIdleCallback||(b=>setTimeout(b,50)))(()=>d(g))},[]);k.useEffect(()=>{let g=!0;_1()&&(l.current=!0);const b=async()=>{try{if(window.location.hash&&window.location.hash.includes("access_token")){l.current=!1;const{data:E,error:$}=await Ae.auth.getSession();$&&console.error("Error processing OAuth callback:",$),window.history.replaceState(null,"",window.location.pathname);return}const{data:{session:j},error:N}=await Ae.auth.getSession();N&&console.error("Error getting session:",N),g&&(r((j==null?void 0:j.user)??null),a(!1),j!=null&&j.user&&c(j.user.id))}catch(j){console.error("Error getting session:",j),g&&a(!1)}},{data:{subscription:_}}=Ae.auth.onAuthStateChange((j,N)=>{var E,$;console.log("Auth state changed:",j,(E=N==null?void 0:N.user)==null?void 0:E.email),g&&(r((N==null?void 0:N.user)??null),a(!1),j==="SIGNED_IN"&&(N!=null&&N.user)?(c(N.user.id),l.current||(l.current=!0,F.success(`Welcome, ${(($=N.user.user_metadata)==null?void 0:$.full_name)||N.user.email}!`))):j==="SIGNED_OUT"&&(i(null),l.current=!1,F.info("Signed out successfully")))});return b(),()=>{g=!1,_==null||_.unsubscribe()}},[c]);const d=async g=>{try{const{data:m,error:b}=await Ae.from("user_preferences").select("*").eq("user_id",g).single();if(b&&b.code!=="PGRST116"){console.error("Error loading preferences:",b);return}m&&(i(m),m.selected_month_table&&!localStorage.getItem("selectedMonthTable")&&localStorage.setItem("selectedMonthTable",m.selected_month_table),m.badge_filter&&!localStorage.getItem("badgeFilter")&&localStorage.setItem("badgeFilter",JSON.stringify(m.badge_filter)))}catch(m){console.error("Error loading preferences:",m)}},u=async g=>{if(t)try{const{data:m,error:b}=await Ae.from("user_preferences").upsert({user_id:t.id,...g,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select().single();if(b)throw b;return i(m),m}catch(m){throw console.error("Error saving preferences:",m),m}},f={user:t,loading:n,preferences:o,signInWithGoogle:async()=>{try{const g=`${window.location.origin}${window.location.pathname}`;console.log("Redirect URL:",g);const{data:m,error:b}=await Ae.auth.signInWithOAuth({provider:"google",options:{redirectTo:g,skipBrowserRedirect:!1}});if(b)throw b;return m}catch(g){throw console.error("Error signing in with Google:",g),F.error("Failed to sign in with Google"),g}},signUpWithEmail:async(g,m,b)=>{var _,j,N;try{const E=`${window.location.origin}${window.location.pathname}`,{data:$,error:O}=await Ae.auth.signUp({email:g,password:m,options:{emailRedirectTo:E,data:{full_name:b}}});if(O)throw O;return((j=(_=$==null?void 0:$.user)==null?void 0:_.identities)==null?void 0:j.length)===0?(F.info("This email is already registered. Please sign in instead."),{needsSignIn:!0}):$!=null&&$.user&&!($!=null&&$.session)?(F.success("Check your email for a confirmation link!"),{needsConfirmation:!0}):$}catch(E){throw console.error("Error signing up:",E),(N=E.message)!=null&&N.includes("already registered")?F.error("This email is already registered. Please sign in."):F.error(E.message||"Failed to sign up"),E}},signInWithEmail:async(g,m)=>{var b,_;try{const{data:j,error:N}=await Ae.auth.signInWithPassword({email:g,password:m});if(N)throw N;return j}catch(j){throw console.error("Error signing in:",j),(b=j.message)!=null&&b.includes("Invalid login credentials")?F.error("Invalid email or password"):(_=j.message)!=null&&_.includes("Email not confirmed")?F.error("Please check your email and confirm your account first"):F.error(j.message||"Failed to sign in"),j}},resetPassword:async g=>{try{const m=`${window.location.origin}${window.location.pathname}`,{error:b}=await Ae.auth.resetPasswordForEmail(g,{redirectTo:m});if(b)throw b;return F.success("Password reset email sent! Check your inbox."),!0}catch(m){throw console.error("Error resetting password:",m),F.error(m.message||"Failed to send reset email"),m}},signOut:async()=>{try{if(t&&o){const m={selected_month_table:localStorage.getItem("selectedMonthTable"),badge_filter:JSON.parse(localStorage.getItem("badgeFilter")||"[]"),dashboard_tab:"all"};await u(m)}const{error:g}=await Ae.auth.signOut();if(g)throw g}catch(g){console.error("Error signing out:",g);const m=((g==null?void 0:g.message)||"").toLowerCase();if(!(m.includes("auth session missing")||m.includes("session not found")||m.includes("session_missing")))throw F.error("Failed to sign out"),g}finally{r(null),i(null),l.current=!1}},saveUserPreferences:u,updatePreference:async(g,m)=>{if(t)try{await u({...o,[g]:m})}catch(b){console.error("Error updating preference:",b)}},loadUserPreferences:d,isAuthenticated:!!t};return s.jsx(ey.Provider,{value:f,children:e})},ty=k.createContext(),E1=()=>{const e=new Date,r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=e.getFullYear();return`${r}_${n}`},ji=["January_2025","February_2025","March_2025","April_2025","May_2025","June_2025","July_2025","August_2025","September_2025","October_2025","November_2025","December_2025"],C1={November_2025:"2025-11-23"},Qr=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},T1=()=>{const e=E1();return ji.includes(e)?e:ji[ji.length-1]||"December_2025"},ni=[{id:"1","Full Name":"John Doe",Gender:"Male","Phone Number":1234567890,Age:"16","Current Level":"SHS1",inserted_at:new Date().toISOString()},{id:"2","Full Name":"Jane Smith",Gender:"Female","Phone Number":987654321,Age:"15","Current Level":"JHS3",inserted_at:new Date().toISOString()},{id:"3","Full Name":"Michael Johnson",Gender:"Male","Phone Number":555123456,Age:"17","Current Level":"SHS2",inserted_at:new Date().toISOString()}],Ct=()=>{const e=k.useContext(ty);if(!e)throw new Error("useApp must be used within an AppProvider");return e},A1=({children:e})=>{const t=Lr(),r=t==null?void 0:t.user,n=t==null?void 0:t.loading,[a,o]=k.useState([]),[i,l]=k.useState(!0),[c,d]=k.useState(""),[u,p]=k.useState(null),h=k.useRef(new Map),y=k.useRef(new Map),[x,v]=k.useState({}),[w,f]=k.useState(()=>localStorage.getItem("selectedMonthTable")||T1()),[g,m]=k.useState(ji),[b,_]=k.useState(null),[j,N]=k.useState([]),[E,$]=k.useState("all"),[O,K]=k.useState(()=>{const S=localStorage.getItem("badgeFilter");return S?JSON.parse(S):[]}),I=()=>Ae&&" https://znuxahdqxencqtsvxvja.supabase.co"&&!0&&!0,ee=async(S=w)=>{var T,D,R;try{if(l(!0),console.log(`Fetching members from table: ${S} for user: ${r==null?void 0:r.id}`),!I()){console.log("Using mock data - Supabase not configured"),o(ni),l(!1);return}const{data:{session:C}}=await Ae.auth.getSession();if(console.log("Current session:",C?`authenticated as ${(T=C.user)==null?void 0:T.id}`:"not authenticated"),!C){console.warn("No active session - user may need to log in again"),F.error("Session expired. Please refresh and log in again."),o([]),l(!1);return}console.log(`Querying ${S} with session user: ${(D=C.user)==null?void 0:D.id}`);const{data:V,error:ne}=await Ae.from(S).select("*");if(console.log(`Query result: ${(V==null?void 0:V.length)||0} rows, error: ${(ne==null?void 0:ne.message)||"none"}`),ne)console.error("Error fetching members:",ne),console.log("Error details:",ne.message,ne.code),F.error(`Database error: ${ne.message}`,{autoClose:1e4}),ne.code==="PGRST116"||(R=ne.message)!=null&&R.includes("does not exist")?(F.error(`Table ${S} does not exist in database. Using mock data.`),console.log(`Table ${S} not found, using mock data`),o(ni)):(F.error(`Failed to fetch members from ${S}: ${ne.message}`),console.warn("Fetch members failed; preserving current member list."));else{const Ne=(V||[]).filter(Te=>Te.full_name||Te["Full Name"]).map(Te=>{const ce=typeof Te.full_name=="string"&&Te.full_name.trim()?Te.full_name:typeof Te["Full Name"]=="string"?Te["Full Name"]:"";return{...Te,full_name:ce,"Full Name":ce}});o(Ne),console.log(`Successfully loaded ${Ne.length} members from ${S}`),console.log("First few members:",Ne.slice(0,3)),console.log("Sample member structure:",Ne[0])}}catch(C){console.error("Unexpected error in fetchMembers:",C),console.log(`Setting mock members (${ni.length} members) due to error`),o(ni)}finally{l(!1)}},le=async S=>{var T;try{if(!I()){const se={id:Date.now().toString(),"Full Name":S.full_name||S.fullName||S["Full Name"],Gender:S.gender||S.Gender,"Phone Number":S.phone_number||S.phoneNumber||S["Phone Number"],Age:S.age||S.Age,"Current Level":S.current_level||S.currentLevel||S["Current Level"],"Member Status":"New","Badge Type":"newcomer","Join Date":new Date().toISOString().split("T")[0],"Manual Badge":null,inserted_at:new Date().toISOString()};return o(ze=>[se,...ze]),F.success("Member added successfully! (Demo Mode)"),se}const D=se=>{if(se==null)return null;const ze=String(se).replace(/\D+/g,"");if(!ze)return null;const Xe=ze.slice(-9),be=Number.parseInt(Xe,10);return Number.isFinite(be)?be:null},R=S.gender||S.Gender,C=typeof R=="string"?R.trim().toLowerCase()==="male"?"Male":R.trim().toLowerCase()==="female"?"Female":R:R,V=S.age||S.Age,ne=V==null||V===""?null:Number.parseInt(V,10),ae=((T=t==null?void 0:t.preferences)==null?void 0:T.workspace_name)||null,Ne={"Full Name":S.full_name||S.fullName||S["Full Name"],Gender:C,"Phone Number":D(S.phone_number??S.phoneNumber??S["Phone Number"]),Age:Number.isFinite(ne)?ne:null,"Current Level":S.current_level||S.currentLevel||S["Current Level"],workspace:ae,parent_name_1:S.parent_name_1||null,parent_phone_1:S.parent_phone_1||null,parent_name_2:S.parent_name_2||null,parent_phone_2:S.parent_phone_2||null,notes:S.notes||null,ministry:S.ministry||null,is_visitor:S.is_visitor||!1,user_id:r==null?void 0:r.id},{data:Te,error:ce}=await Ae.from(w).insert([Ne]).select();if(ce)throw ce;return o(se=>[Te[0],...se]),F.success(`Member added successfully to ${w}!`),Te[0]}catch(D){throw console.error("Error adding member:",D),F.error("Failed to add member"),D}},re=async()=>{try{if(!I())return[];const{data:S,error:T}=await Ae.rpc("get_table_columns",{table_name:w});return T?(console.error("Error getting table columns:",T),[]):(S==null?void 0:S.filter(D=>{const R=D.column_name,C=R.toLowerCase(),V=R.startsWith("Attendance "),ne=/^attendance_\d{4}_\d{2}_\d{2}$/.test(C);return V||ne}))||[]}catch(S){return console.error("Error getting attendance columns:",S),[]}},W=async()=>{try{return(await re()).map(D=>{const C=D.column_name.toLowerCase().match(/attendance_(\d{4})_(\d{2})_(\d{2})/);if(C)return parseInt(C[3]);const V=D.column_name.match(/[Aa]ttendance[_ ](\d+)(st|nd|rd|th)?/);return V?parseInt(V[1]):null}).filter(D=>D!==null).sort((D,R)=>D-R)}catch(S){return console.error("Error getting available attendance dates:",S),[]}},L=(S,T)=>{const D=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(S);if(D===-1)throw new Error(`Invalid month name: ${S}`);const R=[],C=new Date(T,D,1);for(;C.getDay()!==0;)C.setDate(C.getDate()+1);for(;C.getMonth()===D;)R.push(new Date(C)),C.setDate(C.getDate()+7);return R},z=async()=>{try{const[S,T]=w.split("_"),D=parseInt(T);if(!S||isNaN(D))return console.error("Invalid table format:",w),[];const R=L(S,D);return console.log(`Found ${R.length} Sundays in ${S} ${D}:`,R.map(C=>C.getDate())),R}catch(S){return console.error("Error getting available Sunday dates:",S),[]}},A=async()=>{const S=await z();if(N(S),S.length>0){const T=`selectedAttendanceDate_${w}`,D=localStorage.getItem(T);if(D){const ae=new Date(D),Ne=S.find(Te=>Te.getFullYear()===ae.getFullYear()&&Te.getMonth()===ae.getMonth()&&Te.getDate()===ae.getDate());if(Ne){_(Ne);return}}const R=S.find(ae=>ae.getDate()===23)||null,C=S.find(ae=>ae.getDate()===30)||null,V=C1[w];let ne=null;if(V){const ae=new Date(V);ne=S.find(Ne=>Ne.getFullYear()===ae.getFullYear()&&Ne.getMonth()===ae.getMonth()&&Ne.getDate()===ae.getDate())||null}ne||(ne=C||R||(S.length>=2?S[1]:S[0])),kr(ne)}},B=S=>{const T=Object.keys(S).filter(R=>{const C=R.toLowerCase(),V=S[R]!==null&&S[R]!==void 0,ne=R.startsWith("Attendance ")&&V,ae=/^attendance_\d{4}_\d{2}_\d{2}$/.test(C)&&V;return ne||ae});if(T.length===0)return 0;const D=T.filter(R=>S[R]==="Present"||S[R]===!0).length;return Math.round(D/T.length*100)},U=S=>{const T=new Date(S["Join Date"]||S.inserted_at),R=Math.floor((new Date-T)/(1e3*60*60*24)),C=B(S);return S["Manual Badge"]?S["Manual Badge"]:R<30?"newcomer":C>=75?"regular":C>=50?"member":"newcomer"},G=()=>{o(S=>S.map(T=>({...T,"Badge Type":T["Manual Badge"]||U(T),"Attendance Rate":B(T)})))},ye=async(S,T,D={})=>{try{const{suppressToast:R=!1}=D;console.log(`Toggling ${T} badge for member ${S}`),console.log("Supabase configured:",I()),console.log("Current table:",w);const C=a.find(se=>se.id===S),V=C?C["Full Name"]||C.full_name:"Member";if(console.log("Member found:",V),console.log("Current badge values:",{Member:C==null?void 0:C.Member,Regular:C==null?void 0:C.Regular,Newcomer:C==null?void 0:C.Newcomer,"Manual Badges":C==null?void 0:C["Manual Badges"]}),!I())return o(se=>se.map(ze=>{if(ze.id===S){const Xe=ze["Manual Badges"]||[];let be;return Xe.includes(T)?be=Xe.filter(lt=>lt!==T):be=[...Xe,T],{...ze,"Manual Badges":be}}return ze})),{success:!0};const ne=a.find(se=>se.id===S),ae=Ge(ne,T);console.log(`Current badge status for ${T}:`,ae);const Ne={};T==="member"?Ne.Member=ae?null:"Yes":T==="regular"?Ne.Regular=ae?null:"Yes":T==="newcomer"&&(Ne.Newcomer=ae?null:"Yes"),console.log("Update data:",Ne),console.log("Updating member ID:",S);const{data:Te,error:ce}=await Ae.from(w).update(Ne).eq("id",S).select();if(console.log("Supabase update result:",{data:Te,error:ce}),ce)throw ce;return o(se=>se.map(ze=>{if(ze.id===S){const Xe={...ze};return T==="member"?Xe.Member=ae?null:"Yes":T==="regular"?Xe.Regular=ae?null:"Yes":T==="newcomer"&&(Xe.Newcomer=ae?null:"Yes"),Xe}return ze})),R||(ae?F.success(`${T.charAt(0).toUpperCase()+T.slice(1)} badge removed for: ${V}`,{style:{background:"#f3f4f6",color:"#374151"}}):F.success(`${T.charAt(0).toUpperCase()+T.slice(1)} badge assigned to: ${V}`,{style:{background:"#10b981",color:"#ffffff"}})),{success:!0}}catch(R){return console.error("Error toggling badge:",R),F.error("Failed to update badge. Please try again."),{success:!1,error:R}}},_e=async S=>{try{const T=await re(),D=S.getDate(),R=S.getMonth()+1,C=S.getFullYear(),V=T.find(ne=>{const Ne=ne.column_name.toLowerCase().match(/attendance_(\d{4})_(\d{2})_(\d{2})/);if(Ne){const[,ce,se,ze]=Ne;return parseInt(ce)===C&&parseInt(se)===R&&parseInt(ze)===D}const Te=ne.column_name.match(/[Aa]ttendance[_ ](\d+)(st|nd|rd|th)?/);return Te?parseInt(Te[1])===D:!1});return V?V.column_name:null}catch(T){return console.error("Error finding attendance column for date:",T),null}},Me=async S=>{var T;try{if(!I())return{success:!0};const D=S.getFullYear(),R=String(S.getMonth()+1).padStart(2,"0"),C=String(S.getDate()).padStart(2,"0"),V=`attendance_${D}_${R}_${C}`;console.log(`Creating attendance column: ${V} in table ${w}`);const{data:ne,error:ae}=await Ae.rpc("add_attendance_column",{table_name:w,column_name:V});if(ae)throw console.error("Error creating attendance column:",ae),((T=ae.message)!=null&&T.includes("function")||ae.code==="42883")&&F.error("Please create the add_attendance_column function in Supabase. See documentation."),ae;return console.log(`Successfully created column: ${V}`),{success:!0,columnName:V}}catch(D){return console.error("Failed to create attendance column:",D),{success:!1,error:D}}},Oe=async(S,T,D)=>{try{if(!I()){const ce=Qr(T);return v(se=>({...se,[ce]:{...se[ce],[S]:D}})),F.success("Attendance marked! (Demo Mode)"),{success:!0}}let R=await _e(T);if(!R){console.log("Attendance column not found for date, creating it...");const ce=await Me(T);if(!ce.success)return F.error("Failed to create attendance column for this date"),{success:!1,error:"Failed to create column"};R=ce.columnName,await ee(w)}const{data:C,error:V}=await Ae.from(w).update({[R]:D===null?null:D?"Present":"Absent"}).eq("id",S);if(V)throw V;o(ce=>ce.map(se=>se.id===S?{...se,[R]:D===null?null:D?"Present":"Absent"}:se));const ne=T.getFullYear(),ae=String(T.getMonth()+1).padStart(2,"0"),Ne=String(T.getDate()).padStart(2,"0"),Te=`${ne}-${ae}-${Ne}`;return v(ce=>({...ce,[Te]:{...ce[Te],[S]:D}})),setTimeout(()=>De(),500),{success:!0}}catch(R){return console.error("Error marking attendance:",R),F.error("Failed to mark attendance"),{success:!1,error:R}}},X=()=>{if(j.length===0)return!1;for(const S of j){const T=Qr(S),D=x[T];if(!D||Object.keys(D).length===0)return console.log(`Month not complete: Sunday ${T} has no attendance data`),!1}return console.log(`Month attendance complete: All ${j.length} Sundays have attendance data`),!0},$e=S=>{var R;if(j.length<3)return!1;const T=[...j].sort((C,V)=>C-V);let D=0;for(const C of T){const V=Qr(C),ne=(R=x[V])==null?void 0:R[S];if(ne===!0){if(D++,D>=3)return!0}else D=0}return!1},De=async()=>{try{if(!I())return;if(!X()){console.log("Month attendance not complete yet, skipping badge assignment");return}console.log("Processing end-of-month badges for",w);let S=0;for(const T of a)$e(T.id)&&T["Badge Type"]!=="regular"&&T["Badge Type"]!=="vip"&&(await Y(T.id,{"Badge Type":"regular","Member Status":"Member"},{silent:!0}),S++,console.log(`Assigned regular badge to ${T.full_name||T["Full Name"]}`));S>0&&F.success(` End of month: ${S} member${S>1?"s":""} earned Regular Member badge!`)}catch(S){console.error("Error processing end-of-month badges:",S)}},Ue=async(S,T,D)=>{try{if(!I()){const ce=Qr(T),se={};return S.forEach(ze=>{se[ze]=D}),v(ze=>({...ze,[ce]:{...ze[ce],...se}})),F.success("Bulk attendance marked! (Demo Mode)"),{success:!0}}const R=await _e(T);if(!R)return F.error(`No attendance column found for this date in ${w}`),{success:!1,error:"Column does not exist"};const C=D?"Present":"Absent",V=S.map(ce=>Ae.from(w).update({[R]:C}).eq("id",ce)),ae=(await Promise.all(V)).filter(ce=>ce.error);if(ae.length>0)throw new Error(`Failed to update ${ae.length} records`);o(ce=>ce.map(se=>S.includes(se.id)?{...se,[R]:C}:se));const Ne=Qr(T),Te={};return S.forEach(ce=>{Te[ce]=D}),v(ce=>({...ce,[Ne]:{...ce[Ne],...Te}})),setTimeout(()=>De(),500),F.success(`Bulk attendance marked successfully for ${S.length} members!`),{success:!0}}catch(R){return console.error("Error marking bulk attendance:",R),F.error("Failed to mark bulk attendance"),{success:!1,error:R}}},M=async S=>{try{if(!I()){const V=Qr(S);return x[V]||{}}const T=await _e(S);if(!T)return console.log(`No attendance column found for this date in ${w}`),{};const{data:D,error:R}=await Ae.from(w).select(`id, "${T}"`);if(R)throw R;const C={};return D.forEach(V=>{const ne=V[T];ne==="Present"?C[V.id]=!0:ne==="Absent"&&(C[V.id]=!1)}),C}catch(T){return console.error("Error fetching attendance:",T),{}}},Y=async(S,T,D={})=>{const{silent:R=!1}=D;try{if(!I()){const ie={...a.find(Lt=>Lt.id===S)||{},...T},lt=typeof T.full_name=="string"&&T.full_name.trim()?T.full_name:typeof T["Full Name"]=="string"?T["Full Name"]:void 0;return lt!==void 0&&(ie.full_name=lt,ie["Full Name"]=lt),o(Lt=>Lt.map(zr=>zr.id===S?ie:zr)),R||F.success("Member updated successfully! (Demo Mode)"),ie}let C={...T};const V=await we(w);console.log("[updateMember] Resolved name column:",V);const ne=typeof C.full_name=="string"&&C.full_name.trim()?C.full_name:typeof C["Full Name"]=="string"?C["Full Name"]:void 0;console.log("[updateMember] Incoming name value:",ne),ne!==void 0&&(C={...C,[V]:ne},V!=="full_name"&&delete C.full_name,V!=="Full Name"&&delete C["Full Name"]),console.log("[updateMember] Normalized updates to send:",C);const ae=C.gender??C.Gender;if(typeof ae=="string"){const be=ae.trim().toLowerCase()==="male"?"Male":ae.trim().toLowerCase()==="female"?"Female":ae;C={...C,Gender:be},delete C.gender}const Ne=C.phone_number??C["Phone Number"];if(Ne!==void 0){const be=String(Ne).replace(/\D+/g,""),ie=be?be.slice(-9):"",lt=ie?Number.parseInt(ie,10):null;C={...C,"Phone Number":Number.isFinite(lt)?lt:null},delete C.phone_number}const Te=C.age??C.Age;if(Te!==void 0){const be=typeof Te=="string"?Te.trim():Te,ie=be===""||be===null?null:Number.parseInt(be,10);C={...C,Age:Number.isFinite(ie)?ie:null},delete C.age}const ce=C.current_level??C["Current Level"];ce!==void 0&&(C={...C,"Current Level":ce},delete C.current_level);let se=null;try{const{data:be}=await Ae.from(w).select("*").limit(1);be&&be.length>0&&(se=new Set(Object.keys(be[0])),console.log("[updateMember] Valid columns in table:",Array.from(se)))}catch(be){console.warn("Could not fetch table schema, proceeding with all fields:",be)}if(se||(C["Phone Number"]!==void 0&&(C.phone_number=C["Phone Number"],delete C["Phone Number"]),C.Age!==void 0&&(C.age=C.Age,delete C.Age),C.Gender!==void 0&&(C.gender=C.Gender,delete C.Gender),C["Current Level"]!==void 0&&(C.current_level=C["Current Level"],delete C["Current Level"]),C["Full Name"]!==void 0&&(C.full_name=C["Full Name"],delete C["Full Name"])),se){const be={};for(const ie of Object.keys(C))se.has(ie)?be[ie]=C[ie]:ie==="Full Name"&&se.has("full_name")?(be.full_name=C[ie],console.log('[updateMember] Mapped "Full Name" to "full_name"')):ie==="full_name"&&se.has("Full Name")?(be["Full Name"]=C[ie],console.log('[updateMember] Mapped "full_name" to "Full Name"')):(ie==="Full Name"||ie==="full_name")&&se.has("name")?(be.name=C[ie],console.log('[updateMember] Mapped to "name"')):(ie==="Full Name"||ie==="full_name")&&se.has("Name")?(be.Name=C[ie],console.log('[updateMember] Mapped to "Name"')):ie==="Phone Number"&&se.has("phone_number")?(be.phone_number=C[ie],console.log('[updateMember] Mapped "Phone Number" to "phone_number"')):ie==="phone_number"&&se.has("Phone Number")?(be["Phone Number"]=C[ie],console.log('[updateMember] Mapped "phone_number" to "Phone Number"')):ie==="Age"&&se.has("age")?(be.age=C[ie],console.log('[updateMember] Mapped "Age" to "age"')):ie==="age"&&se.has("Age")?(be.Age=C[ie],console.log('[updateMember] Mapped "age" to "Age"')):ie==="Gender"&&se.has("gender")?(be.gender=C[ie],console.log('[updateMember] Mapped "Gender" to "gender"')):ie==="gender"&&se.has("Gender")?(be.Gender=C[ie],console.log('[updateMember] Mapped "gender" to "Gender"')):ie==="Current Level"&&se.has("current_level")?(be.current_level=C[ie],console.log('[updateMember] Mapped "Current Level" to "current_level"')):ie==="current_level"&&se.has("Current Level")?(be["Current Level"]=C[ie],console.log('[updateMember] Mapped "current_level" to "Current Level"')):ie==="parent_name_1"&&se.has("Parent Name 1")?be["Parent Name 1"]=C[ie]:ie==="parent_phone_1"&&se.has("Parent Phone 1")?be["Parent Phone 1"]=C[ie]:ie==="parent_name_2"&&se.has("Parent Name 2")?be["Parent Name 2"]=C[ie]:ie==="parent_phone_2"&&se.has("Parent Phone 2")?be["Parent Phone 2"]=C[ie]:ie==="notes"&&se.has("notes")?(be.notes=C[ie],console.log("[updateMember] Including notes field")):ie==="ministry"&&se.has("ministry")?(be.ministry=C[ie],console.log("[updateMember] Including ministry field")):ie==="is_visitor"&&se.has("is_visitor")?(be.is_visitor=C[ie],console.log("[updateMember] Including is_visitor field")):console.warn(`Skipping field "${ie}" - column does not exist in table ${w}`);C=be}if(console.log("[updateMember] Final normalized data to send:",C),Object.keys(C).length===0)return console.warn("No valid fields to update after filtering"),R||F.info("No changes to save"),a.find(be=>be.id===S);const{data:ze,error:Xe}=await Ae.from(w).update(C).eq("id",S).select();if(Xe)throw Xe;return o(be=>{const ie=ze[0]||{},lt=typeof ie.full_name=="string"&&ie.full_name.trim()?ie.full_name:typeof ie["Full Name"]=="string"?ie["Full Name"]:void 0;console.log("Updating member in state:",S,"with name:",lt),console.log("Updated row data:",ie);const Lt=be.map(zr=>{if(zr.id!==S)return zr;const un={...zr,...ie};return lt!==void 0&&(un.full_name=lt,un["Full Name"]=lt),console.log("Merged member after update:",un),un});return console.log("Updated members array:",Lt),Lt}),Ce(),R||F.success(`Member updated successfully in ${w}!`),ze[0]}catch(C){throw console.error("Error updating member:",C),F.error("Failed to update member"),C}},te=async S=>{if(!I())return o(T=>T.filter(D=>D.id!==S)),v(T=>{const D={};return Object.entries(T).forEach(([R,C])=>{const{[S]:V,...ne}=C||{};D[R]=ne}),D}),Ce(),F.success("Member deleted (Demo Mode)"),{success:!0};l(!0);try{const{error:T}=await Ae.from(w).delete().eq("id",S);if(T)throw T;o(D=>D.filter(R=>R.id!==S)),Ce(),console.log(`Member with ID ${S} deleted successfully.`),F.success("Member deleted")}catch(T){console.error("Error deleting member:",T.message),F.error("Error deleting member: "+T.message)}finally{l(!1)}},Se=async({month:S,year:T,monthName:D,sundays:R})=>{try{const C=`${D}_${T}`;if(!I())return F.success(`${C} created successfully! (Demo Mode)`),{success:!0,tableName:C};let V=w;if(!V||g.length>0){const ce=[...g].sort((se,ze)=>{const[Xe,be]=se.split("_"),[ie,lt]=ze.split("_");if(be!==lt)return parseInt(lt)-parseInt(be);const Lt=["January","February","March","April","May","June","July","August","September","October","November","December"],zr=Lt.indexOf(Xe);return Lt.indexOf(ie)-zr});ce.length>0&&(V=ce[0])}console.log(`Creating new month table: ${C}`),console.log(`Copying from most recent table: ${V}`),console.log(`New month will have ${R.length} Sundays:`,R.map(ce=>ce.toISOString().split("T")[0]));const ne=R.map(ce=>ce.toISOString().split("T")[0]),{data:ae,error:Ne}=await Ae.rpc("create_month_from_current",{source_table:V,new_table_name:C,sunday_dates:ne});if(Ne)throw console.error("Error creating month table:",Ne),new Error(`Failed to create month table: ${Ne.message}`);console.log("Month table creation result:",ae);const{error:Te}=await Ae.from("user_month_tables").insert({user_id:r==null?void 0:r.id,table_name:C,month_year:`${D} ${T}`});return Te&&console.warn("Could not register month table for user:",Te),F.success(`Month ${D} ${T} created successfully! Copied ${(ae==null?void 0:ae.members_copied)||0} members from ${V}. RLS enabled with all policies.`),await H(),Re(C),console.log(`Successfully created month: ${C}`),{success:!0,tableName:C,result:ae}}catch(C){console.error("Error creating new month:",C);let V="Failed to create new month";throw C.message?V+=`: ${C.message}`:C.error&&(V+=`: ${C.error}`),F.error(V),C}},H=async()=>{try{if(!I()){console.log("Using fallback monthly tables - Supabase not configured");return}const S=["January","February","March","April","May","June","July","August","September","October","November","December"],T=["2025"],D=[];for(const R of T)for(const C of S){const V=`${C}_${R}`;try{const{data:ne,error:ae}=await Ae.from(V).select("id").limit(1);ae||D.push(V)}catch{continue}}D.length>0?(D.sort((R,C)=>{const[V,ne]=R.split("_"),[ae,Ne]=C.split("_");return ne!==Ne?parseInt(ne)-parseInt(Ne):S.indexOf(V)-S.indexOf(ae)}),m(D),console.log("Found monthly tables with user data:",D)):(m([]),console.log("No monthly tables found for user - new user"))}catch(S){console.error("Error fetching monthly tables:",S)}},xe=k.useMemo(()=>{if(!c.trim())return a;if(u)return u.slice(0,20);const T=c.toLowerCase().trim().split(/\s+/).filter(Boolean);return a.filter(R=>{const C=((typeof R.full_name=="string"?R.full_name:"")||(typeof R["Full Name"]=="string"?R["Full Name"]:"")||"").toLowerCase();return T.every(V=>C.includes(V))}).slice(0,20)},[a,c,u]),we=k.useCallback(async S=>{const T=y.current.get(S);if(T)return T;if(!I())return"Full Name";let D="Full Name";try{const{data:R,error:C}=await Ae.from(S).select("*").limit(1);if(!C&&R&&R.length){const V=R[0];Object.prototype.hasOwnProperty.call(V,"Full Name")?D="Full Name":Object.prototype.hasOwnProperty.call(V,"full_name")?D="full_name":Object.prototype.hasOwnProperty.call(V,"name")?D="name":Object.prototype.hasOwnProperty.call(V,"Name")&&(D="Name")}}catch(R){console.warn("resolveNameColumn fallback due to error:",R)}return y.current.set(S,D),D},[I]),oe=k.useCallback(async S=>{const T=S.trim();if(!T){p(null);return}if(!I()){p(null);return}const D=T.toLowerCase();if(D==="present"||D==="absent"){await he(D),p(null);return}const R=10*60*1e3,C=`${w}::${T}`,V=h.current.get(C),ne=Date.now();if(V&&ne-V.timestamp<R){p(V.data||[]);return}const ae=await we(w),Ne=/^\d{1,3}$/.test(T);if(T.split(/\s+/).filter(Boolean).length>1&&!Ne){p(null);return}let ce=Ae.from(w).select("*");if(Ne)ce=ce.eq("Age",parseInt(T,10));else{const be=T.replace(/%/g,"").replace(/_/g,"").replace(/\s+/g," ").trim(),ie=`"${ae}".ilike.%${be}%,"${ae}".ilike.${be}%,"${ae}".ilike.% ${be}%`;ce=ce.or(ie)}const{data:se,error:ze}=await ce;if(ze){console.error("Server search error",ze),p(null);return}const Xe=(se||[]).slice().sort((be,ie)=>{const lt=(be[ae]||"").toString().toLowerCase(),Lt=(ie[ae]||"").toString().toLowerCase();return lt<Lt?-1:lt>Lt?1:0});h.current.set(C,{timestamp:ne,data:Xe}),p(Xe)},[w,I,we]);k.useEffect(()=>{oe(c)},[c,w,oe]);const he=k.useCallback(async S=>{const T=u&&u.length>0?u:xe,D=T&&T.length?T[0]:null;if(!D)return;const R=S==="present";try{const C=b?new Date(b):new Date;await Oe(D.id,C,R),await ee(w)}catch(C){console.error("Quick mark attendance failed",C)}},[u,xe,b,Oe,ee,w]),Ce=k.useCallback(()=>{},[c]),je=k.useCallback(async()=>{console.log("Force refreshing members from database..."),F.info("Refreshing member data...");try{await ee(w),F.success("Member data refreshed successfully!"),console.log("Members refreshed, new count:",a.length)}catch(S){console.error("Error refreshing members:",S),F.error("Failed to refresh member data")}},[w,ee,a.length]),Le=k.useCallback(async()=>{console.log("Force refreshing members (silent) ...");try{await ee(w),console.log("Members refreshed silently, new count:",a.length)}catch(S){console.error("Error refreshing members (silent):",S)}},[w,ee,a.length]),qe=k.useCallback(async S=>{console.log("=== SEARCHING ACROSS ALL TABLES ==="),console.log("Looking for:",S);const T=S.toLowerCase().trim(),D=[];for(const R of g)try{if(console.log(`Checking table: ${R}`),I()){const{data:C,error:V}=await Ae.from(R).select("*");if(V){console.log(`Error accessing ${R}:`,V.message);continue}const ne=(C==null?void 0:C.filter(ae=>((typeof ae.full_name=="string"?ae.full_name:"")||(typeof ae["Full Name"]=="string"?ae["Full Name"]:"")||"").toLowerCase().includes(T)))||[];ne.length>0&&(console.log(`Found ${ne.length} matches in ${R}:`),ne.forEach(ae=>{console.log(`  - ${ae["Full Name"]||ae.full_name}`)}),D.push({table:R,members:ne}))}}catch(C){console.log(`Error searching ${R}:`,C.message)}return console.log("=== SEARCH RESULTS ==="),D.length===0?(console.log("Member not found in any table"),F.error(`"${S}" not found in any monthly table`)):(console.log(`Found in ${D.length} table(s):`),D.forEach(({table:R,members:C})=>{console.log(`  ${R}: ${C.length} match(es)`)}),F.success(`Found "${S}" in ${D.length} table(s)`)),D},[g,I]),Ve=k.useCallback(S=>{const T=[];return(!S["Phone Number"]||S["Phone Number"]===null)&&T.push("Phone Number"),(!S.Gender||S.Gender===null||S.Gender==="")&&T.push("Gender"),(!S.Age||S.Age===null||S.Age==="")&&T.push("Age"),(!S["Current Level"]||S["Current Level"]===null||S["Current Level"]==="")&&T.push("Current Level"),(!S.parent_name_1||S.parent_name_1===null||S.parent_name_1==="")&&T.push("Parent Name 1"),(!S.parent_phone_1||S.parent_phone_1===null)&&T.push("Parent Phone 1"),T},[]),ot=k.useCallback(()=>{try{const[S,T]=w.split("_"),D=parseInt(T);if(!S||isNaN(D))return console.error("Invalid table format:",w),[];const R=L(S,D),C=new Date;return C.setHours(0,0,0,0),R.filter(V=>V<=C)}catch(S){return console.error("Error getting past Sundays:",S),[]}},[w,L]),wr=k.useCallback((S,T)=>{const D=[];return T.forEach(R=>{const C=Qr(R),ne=(x[C]||{})[S];ne==null&&D.push(R)}),D},[x]),kr=k.useCallback(S=>{_(S);const T=`selectedAttendanceDate_${w}`;localStorage.setItem(T,S.toISOString())},[w]);k.useEffect(()=>{H()},[]);const ue=k.useRef(!1);k.useEffect(()=>{if(g.length>0&&!ue.current){ue.current=!0;const S=localStorage.getItem("selectedMonthTable");if(S&&g.includes(S))w!==S&&f(S);else if(!S&&g.length>0){const T=g[g.length-1];f(T),localStorage.setItem("selectedMonthTable",T)}}},[g]),k.useEffect(()=>{n||ee()},[w,n]),k.useEffect(()=>{A()},[w]),k.useEffect(()=>{Object.keys(x).length>0&&setTimeout(()=>{X()&&(console.log("Month has 40+ members marked, processing badges..."),De())},1e3)},[x]);const Re=S=>{f(S),localStorage.setItem("selectedMonthTable",S)},ht=S=>{K(T=>{const D=T.includes(S)?T.filter(R=>R!==S):[...T,S];return localStorage.setItem("badgeFilter",JSON.stringify(D)),D})},Ge=(S,T)=>{if(!S)return console.warn("memberHasBadge: member is undefined for badgeType",T),!1;let D=!1,R=!1;switch(T){case"member":D=S.Member==="Yes",R=(S["Manual Badges"]||[]).includes("member");break;case"regular":D=S.Regular==="Yes",R=(S["Manual Badges"]||[]).includes("regular");break;case"newcomer":D=S.Newcomer==="Yes",R=(S["Manual Badges"]||[]).includes("newcomer");break;default:return!1}const C=D||R;return console.log(`memberHasBadge(${(S==null?void 0:S["Full Name"])||(S==null?void 0:S.full_name)}, ${T}):`,{hasSupabaseBadge:D,hasManualBadge:R,result:C,supabaseValue:S==null?void 0:S[T==="member"?"Member":T==="regular"?"Regular":"Newcomer"],manualBadges:S==null?void 0:S["Manual Badges"]}),C},it=async()=>{try{if(!I()){console.log("Demo mode - attendance data will be managed locally");return}const S=await re();if(S.length===0){console.log("No attendance columns found in current table");return}const T=["id",...S.map(V=>`"${V.column_name}"`)],{data:D,error:R}=await Ae.from(w).select(T.join(", "));if(R)throw R;const C={};S.forEach(V=>{const ne=V.column_name,ae=ne.toLowerCase();let Ne=null;const Te=ae.match(/attendance_(\d{4})_(\d{2})_(\d{2})/);if(Te){const ce=parseInt(Te[1]),se=parseInt(Te[2])-1,ze=parseInt(Te[3]),Xe=new Date(ce,se,ze);Ne=Qr(Xe)}if(!Ne){const ce=ne.match(/(\d+)(st|nd|rd|th)/);if(ce){const se=parseInt(ce[1]),[ze,Xe]=w.split("_"),be=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(ze);if(be!==-1){const ie=new Date(parseInt(Xe),be,se);Ne=Qr(ie)}}}Ne&&(C[Ne]={},D.forEach(ce=>{ce[ne]&&(C[Ne][ce.id]=ce[ne]==="Present")}))}),v(C),console.log("Loaded attendance data for all dates:",Object.keys(C))}catch(S){console.error("Error loading attendance data:",S)}},jr=async()=>{try{if(!I()){console.log("Demo mode - badge data will be managed locally");return}console.log("Loading badge data from Supabase...");const{data:S,error:T}=await Ae.from(w).select('id, "Member", "Regular", "Newcomer", "Manual Badge", "Badge Type"');if(T){console.error("Error loading badge data:",T);return}console.log("Badge data loaded:",S==null?void 0:S.slice(0,3)),o(D=>D.map(R=>{const C=S.find(V=>V.id===R.id);return C?{...R,Member:C.Member,Regular:C.Regular,Newcomer:C.Newcomer,"Manual Badge":C["Manual Badge"],"Badge Type":C["Badge Type"]}:R}))}catch(S){console.error("Error loading badge data:",S)}};k.useEffect(()=>{w&&(it(),jr())},[w]),k.useEffect(()=>{if(!(typeof window>"u"))try{const S=new URLSearchParams(window.location.search),T=S.get("qr_mark"),D=S.get("date");if(!T)return;(async()=>{try{let R=null;if(D){const C=new Date(D);isNaN(C.getTime())||(R=C)}if(!R&&w)try{const[C,V]=w.split("_"),ae=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(C);ae!==-1&&(R=new Date(parseInt(V,10),ae,30))}catch{R=new Date}R||(R=new Date),await Oe(T,R,!0);try{F.success("Attendance marked via QR")}catch{}try{const C=new URL(window.location.href);C.searchParams.delete("qr_mark"),C.searchParams.delete("date"),window.history.replaceState({},document.title,C.toString())}catch{}}catch(R){console.error("QR mark processing failed",R)}})()}catch(S){console.error("Failed to parse QR params",S)}},[w,Oe]),k.useEffect(()=>{if(!I())return;const S=Ae.channel("public:members").on("postgres_changes",{event:"*",schema:"public",table:w},T=>{console.log("Change received!",T),T.eventType==="INSERT"?o(D=>[...D,T.new]):T.eventType==="UPDATE"?o(D=>D.map(R=>R.id===T.new.id?T.new:R)):T.eventType==="DELETE"&&o(D=>D.filter(R=>R.id!==T.old.id))}).subscribe();return()=>{Ae.removeChannel(S)}},[w]);const[ge,Be]=k.useState(null),rr={updateWorkspaceForAllTables:async S=>{var T;try{if(!I())return F.info("Workspace updated (Demo Mode)"),!0;console.log(`Updating workspace to "${S}" across all tables...`);const{error:D}=await Ae.rpc("update_user_workspace_name",{new_name:S});if(D)throw(T=D.message)!=null&&T.includes("function")||D.code==="42883"?new Error('Please run the "Complete Workspace Features" migration first'):D;return F.success("Workspace updated across all records!"),!0}catch(D){return console.error("Error updating workspace:",D),F.error(D.message||"Failed to update workspace records"),!1}},members:a,filteredMembers:xe,loading:i,searchTerm:c,setSearchTerm:d,refreshSearch:Ce,serverSearchResults:u,forceRefreshMembers:je,forceRefreshMembersSilent:Le,searchMemberAcrossAllTables:qe,addMember:le,updateMember:Y,deleteMember:te,fetchMembers:ee,attendanceData:x,setAttendanceData:v,markAttendance:Oe,bulkAttendance:Ue,fetchAttendanceForDate:M,loadAllAttendanceData:it,loadAllBadgeData:jr,currentTable:w,monthlyTables:g,setCurrentTable:Re,createNewMonth:Se,fetchMonthlyTables:H,getAttendanceColumns:re,getAvailableAttendanceDates:W,findAttendanceColumnForDate:_e,calculateAttendanceRate:B,calculateMemberBadge:U,updateMemberBadges:G,processEndOfMonthBadges:De,isMonthAttendanceComplete:X,toggleMemberBadge:ye,memberHasBadge:Ge,selectedAttendanceDate:b,setSelectedAttendanceDate:_,setAndSaveAttendanceDate:kr,availableSundayDates:j,getAvailableSundayDates:z,initializeAttendanceDates:A,getSundaysInMonth:L,badgeFilter:O,toggleBadgeFilter:ht,isSupabaseConfigured:I,dashboardTab:E,setDashboardTab:$,uiAction:ge,focusDateSelector:()=>{Be({type:"focusDateSelector",ts:Date.now()})},validateMemberData:Ve,getPastSundays:ot,getMissingAttendance:wr};return s.jsx(ty.Provider,{value:rr,children:e})},ry=k.createContext(),vr=()=>{const e=k.useContext(ry);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},P1=({children:e})=>{const[t,r]=k.useState(()=>{const o=localStorage.getItem("theme");return o?o==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});k.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const a={isDarkMode:t,toggleTheme:()=>{r(o=>!o)},theme:t?"dark":"light"};return s.jsx(ry.Provider,{value:a,children:e})},O1=({variant:e="icon"})=>{const{selectedAttendanceDate:t,setAndSaveAttendanceDate:r,availableSundayDates:n}=Ct(),{isDarkMode:a}=vr(),[o,i]=k.useState(!1),l=k.useRef(null);k.useEffect(()=>{const h=y=>{l.current&&!l.current.contains(y.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const c=h=>{if(!h)return"Select Date";const y=e==="menu"?{month:"short",day:"numeric"}:{month:"short",day:"numeric",year:"numeric"};return h.toLocaleDateString("en-US",y)},d=h=>{if(h>3&&h<21)return"th";switch(h%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},u=h=>{const y=h.getDate(),x=d(y),v={month:"long",year:"numeric"},w=h.toLocaleDateString("en-US",v);return`${y}${x} ${w}`},p=h=>{r(h),i(!1)};return s.jsxs("div",{className:"relative",ref:l,children:[e==="menu"?s.jsxs("button",{onClick:()=>i(!o),className:"w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600",title:t?`Selected: ${c(t)}`:"Select Attendance Date",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(dt,{className:"w-4 h-4"}),s.jsx("span",{children:t?c(t):"Select Attendance Date"})]}),t&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:"Selected"})]}):s.jsx("button",{onClick:()=>i(!o),className:`flex items-center justify-center w-10 h-10 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 ${o?"bg-blue-700 ring-2 ring-blue-300":"bg-blue-600 hover:bg-blue-700"}`,title:t?`Selected: ${c(t)}`:"Select Attendance Date",children:s.jsx(dt,{className:"w-5 h-5"})}),o&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>i(!1),children:s.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-hidden transform transition-all duration-300 scale-100`,onClick:h=>h.stopPropagation(),children:[s.jsxs("div",{className:`bg-gradient-to-r ${a?"from-blue-700 to-blue-800":"from-blue-600 to-blue-700"} text-white px-6 py-4 relative`,children:[s.jsx("button",{onClick:()=>i(!1),className:`absolute top-4 right-4 p-1 rounded-full transition-colors ${a?"hover:bg-white hover:bg-opacity-10":"hover:bg-white hover:bg-opacity-20"}`,children:s.jsx(Ye,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-lg font-semibold pr-8",children:"Select Attendance Date"}),s.jsx("p",{className:`text-sm mt-1 ${a?"text-blue-200":"text-blue-100"}`,children:"Choose a Sunday for marking attendance"})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx(dt,{className:`w-12 h-12 mx-auto mb-4 ${a?"text-gray-500":"text-gray-300"}`}),s.jsx("p",{className:`text-base mb-2 ${a?"text-gray-300":"text-gray-500"}`,children:"No attendance dates available"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Please check your current month table"})]}):s.jsx("div",{className:"py-4",children:n.map((h,y)=>{const x=t&&h.getTime()===t.getTime(),v=x;return s.jsx("button",{onClick:()=>p(h),className:`w-full text-left px-6 py-4 transition-all duration-200 border-l-4 hover:shadow-sm ${x?a?"bg-blue-900 bg-opacity-30 border-l-blue-400 text-blue-300 shadow-sm":"bg-blue-50 border-l-blue-500 text-blue-700 shadow-sm":a?"border-l-transparent hover:bg-gray-700 hover:border-l-gray-500 text-gray-200":"border-l-transparent hover:bg-gray-50 hover:border-l-gray-300 text-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:`text-base ${x?"font-semibold":"font-medium"}`,children:u(h)}),s.jsx("div",{className:`text-sm mt-1 ${a?"text-gray-400":"text-gray-500"}`,children:"Sunday Service"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[x&&s.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-blue-400":"bg-blue-500"}`}),!x&&v&&s.jsx("div",{className:`text-sm font-medium ${a?"text-blue-400":"text-blue-600"}`,children:"Default"})]})]})},y)})})}),s.jsx("div",{className:`px-6 py-4 border-t ${a?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:s.jsx("p",{className:`text-sm text-center ${a?"text-gray-300":"text-gray-600"}`,children:"Selected date will apply to Present/Absent buttons"})})]})})})]})},M1=({isOpen:e,onClose:t,anchorRef:r})=>{const{monthlyTables:n,currentTable:a,setCurrentTable:o}=Ct(),i=k.useRef(null);k.useEffect(()=>{const p=h=>{i.current&&!i.current.contains(h.target)&&(r!=null&&r.current)&&!r.current.contains(h.target)&&t()};if(e)return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[e,t,r]),k.useEffect(()=>{const p=h=>{h.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[e,t]);const l=p=>{o(p),t()},c=p=>p?p.split("_")[0].slice(0,3):"",d=p=>p?p.split("_")[1]:"",u=(n==null?void 0:n.reduce((p,h)=>{const y=d(h);return p[y]||(p[y]=[]),p[y].push(h),p},{}))||{};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 backdrop-animate",onClick:t}),s.jsxs("div",{ref:i,className:"fixed left-1/2 top-1/2 z-50 w-[300px] max-w-[90vw] max-h-[70vh] bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden animate-scale-in-centered",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200/50 dark:border-gray-700/50 bg-gray-50/80 dark:bg-gray-900/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dt,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Select Month"})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors btn-press",children:s.jsx(Ye,{className:"w-4 h-4 text-gray-500"})})]}),s.jsxs("div",{className:"max-h-[50vh] overflow-y-auto overscroll-contain",children:[Object.entries(u).sort((p,h)=>h[0]-p[0]).map(([p,h])=>s.jsxs("div",{children:[s.jsx("div",{className:"sticky top-0 px-4 py-2 text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400 bg-gray-100/90 dark:bg-gray-900/90 backdrop-blur-sm",children:p}),s.jsx("div",{className:"p-2 grid grid-cols-3 gap-1.5",children:h.map(y=>{const x=y===a;return s.jsxs("button",{onClick:()=>l(y),className:`relative flex flex-col items-center justify-center p-3 rounded-xl text-sm font-medium btn-press transition-all duration-200 ${x?"bg-blue-500 text-white shadow-lg shadow-blue-500/30 scale-105":"bg-gray-100 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s.jsx("span",{className:"text-base font-semibold",children:c(y)}),x&&s.jsx(Ht,{className:"absolute top-1 right-1 w-3 h-3"})]},y)})})]},p)),(!n||n.length===0)&&s.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400 animate-fade-in",children:[s.jsx(dt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No months available"})]})]})]})]}):null},V0=()=>{var m,b,_,j,N,E,$,O,K,I,ee,le,re;const{user:e,loading:t,signInWithGoogle:r,signOut:n,isAuthenticated:a,preferences:o}=Lr(),{isDarkMode:i,toggleTheme:l}=vr();Ct();const[c,d]=k.useState(!1),[u,p]=k.useState(!1),h=k.useRef(null);k.useEffect(()=>{const W=L=>{h.current&&!h.current.contains(L.target)&&d(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const y=async()=>{p(!0);try{await r()}catch(W){console.error("Sign in error:",W)}finally{p(!1)}},x=async()=>{d(!1);try{await n()}catch(W){console.error("Sign out error:",W)}};if(t)return s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"});if(!a)return s.jsx("button",{onClick:y,disabled:u,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200",children:u?s.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{className:"hidden sm:inline",children:"Sign in"})]})});const w=(typeof window<"u"?localStorage.getItem("user_avatar_url"):null)||((m=e==null?void 0:e.user_metadata)==null?void 0:m.avatar_url)||((b=e==null?void 0:e.user_metadata)==null?void 0:b.picture)||((N=(j=(_=e==null?void 0:e.identities)==null?void 0:_[0])==null?void 0:j.identity_data)==null?void 0:N.avatar_url)||((O=($=(E=e==null?void 0:e.identities)==null?void 0:E[0])==null?void 0:$.identity_data)==null?void 0:O.picture),f=((K=e==null?void 0:e.user_metadata)==null?void 0:K.full_name)||((I=e==null?void 0:e.user_metadata)==null?void 0:I.name)||((ee=e==null?void 0:e.email)==null?void 0:ee.split("@")[0]),g=(o==null?void 0:o.workspace_name)||"My Workspace";return s.jsxs("div",{className:"relative",ref:h,children:[s.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 px-2 py-1 rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700",children:[w?s.jsx("img",{src:w,alt:f,className:"w-8 h-8 rounded-full object-cover aspect-square border-2 border-primary-500"}):s.jsx("div",{className:"w-8 h-8 rounded-full aspect-square bg-primary-500 flex items-center justify-center text-white font-semibold text-sm",children:((le=f==null?void 0:f.charAt(0))==null?void 0:le.toUpperCase())||"U"}),s.jsx("span",{className:"hidden md:inline text-sm font-medium text-gray-700 dark:text-gray-200 max-w-[100px] truncate",children:f}),s.jsx(tr,{className:`w-4 h-4 text-gray-500 transition-transform ${c?"rotate-180":""}`})]}),c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),s.jsxs("div",{className:"absolute right-0 mt-2 w-72 z-50 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-xl overflow-hidden animate-scale-in",children:[s.jsx("div",{className:"px-4 py-4 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-gray-800 dark:to-gray-750 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[w?s.jsx("img",{src:w,alt:f,className:"w-12 h-12 rounded-full object-cover aspect-square border-2 border-white shadow-sm"}):s.jsx("div",{className:"w-12 h-12 rounded-full aspect-square bg-primary-500 flex items-center justify-center text-white font-bold text-lg shadow-sm",children:((re=f==null?void 0:f.charAt(0))==null?void 0:re.toUpperCase())||"U"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:f}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e==null?void 0:e.email}),s.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400 truncate mt-0.5",children:g})]})]})}),s.jsxs("div",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("button",{onClick:()=>{l()},className:"w-full flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("span",{className:"flex items-center gap-3",children:[i?s.jsx(Hm,{className:"w-4 h-4"}):s.jsx(Gm,{className:"w-4 h-4"}),s.jsx("span",{children:"Dark Mode"})]}),s.jsx("div",{className:`w-9 h-5 rounded-full transition-colors ${i?"bg-primary-500":"bg-gray-300"}`,children:s.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform mt-0.5 ${i?"translate-x-4 ml-0.5":"translate-x-0.5"}`})})]}),s.jsxs("button",{onClick:()=>{d(!1),window.openSettings&&window.openSettings()},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(qs,{className:"w-4 h-4"}),s.jsx("span",{children:"Settings"}),s.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Account, Team, Data"})]})]}),s.jsx("div",{className:"px-2 py-2",children:s.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors btn-press",children:[s.jsx(Bm,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign Out"})]})}),s.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:s.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:"Datsar v1.0  TMH Teen Ministry"})})]})]})]})},D1=({currentView:e,setCurrentView:t,isAdmin:r,setIsAdmin:n,onAddMember:a,onCreateMonth:o,onToggleAIChat:i})=>{const{searchTerm:l,setSearchTerm:c,refreshSearch:d,forceRefreshMembers:u,loading:p,dashboardTab:h,setDashboardTab:y,filteredMembers:x,attendanceData:v,currentTable:w,isSupabaseConfigured:f,badgeFilter:g,toggleBadgeFilter:m,selectedAttendanceDate:b,setAndSaveAttendanceDate:_,focusDateSelector:j}=Ct(),[N,E]=k.useState(!1),[$,O]=k.useState(!1),[K,I]=k.useState(!1),ee=k.useRef(null),le=k.useRef(null),re=k.useRef(null),W=k.useRef(null),L=k.useRef(null);k.useEffect(()=>{const X=$e=>{$e.key==="Escape"&&E(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[]);const[z,A]=k.useState(l);k.useEffect(()=>{A(l)},[l]),k.useEffect(()=>{const X=setTimeout(()=>{z!==l&&c(z)},250);return()=>clearTimeout(X)},[z]),k.useEffect(()=>{const X=$e=>{var te,Se,H,xe;const De=(te=ee.current)==null?void 0:te.contains($e.target),Ue=(Se=le.current)==null?void 0:Se.contains($e.target),M=(H=L.current)==null?void 0:H.contains($e.target),Y=(xe=re.current)==null?void 0:xe.contains($e.target);!De&&!Ue&&!M&&!Y&&(E(!1),O(!1))};return document.addEventListener("mousedown",X),document.addEventListener("touchstart",X,{passive:!0}),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X)}},[]);const U=(X=>{if(!X)return[];try{const[$e,De]=X.split("_"),Ue=parseInt(De),Y=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf($e);if(Y===-1)return[];const te=[],Se=new Date(Ue,Y,1);for(;Se.getDay()!==0;)Se.setDate(Se.getDate()+1);for(;Se.getMonth()===Y;)te.push(Se.toISOString().split("T")[0]),Se.setDate(Se.getDate()+7);return te}catch{return[]}})(w),G=X=>{for(const $e of U){const Ue=(v[$e]||{})[X.id];if(Ue===!0||Ue===!1)return!0}return!1},ye=k.useMemo(()=>{const X=h==="edited"?x.filter(G):x,$e={};for(const De of U){const Ue=v[De]||{};let M=0;for(const Y of X)Ue[Y.id]===!0&&(M+=1);$e[De]=M}return $e},[x,v,U,h]),_e=k.useMemo(()=>{try{if(!x||x.length===0)return 0;if(!!(l&&l.trim())||h==="all")return x.length;const $e=Object.keys(v||{});if($e.length===0)return 0;const De=Ue=>{for(const M of $e){const te=(v[M]||{})[Ue.id];if(te===!0||te===!1)return!0}return!1};return x.filter(De).length}catch{return(x==null?void 0:x.length)??0}},[x,h,v,l]),Me=k.useMemo(()=>{try{if(!x||x.length===0)return 0;const X=Object.keys(v||{});if(X.length===0)return 0;let $e=0;for(const De of x){let Ue=!1;for(const M of X){const te=(v[M]||{})[De.id];if(te===!0||te===!1){Ue=!0;break}}Ue&&($e+=1)}return $e}catch{return 0}},[x,v]),Oe=[{id:"edited_members",label:`Marked (${Me})`,icon:g0,onClick:()=>{t("dashboard"),y("edited")}},{id:"duplicates",label:"Duplicate Names",icon:ft,onClick:()=>{t("dashboard"),y("duplicates")}},{id:"admin",label:"Admin Panel",icon:Zi,onClick:()=>{t("admin")}},{id:"create_month",label:"Create New Month",icon:dt,onClick:o},{id:"ai_assistant",label:"AI Assistant",icon:ta,onClick:i}];return s.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm md:border-b border-gray-200 dark:border-gray-700 z-50 w-full safe-area-top fixed top-0 left-0 right-0",children:[s.jsxs("div",{className:"mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-0 md:py-1 w-full",children:[s.jsxs("div",{className:"flex items-center justify-center md:justify-between min-h-[36px] md:min-h-[44px]",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("button",{onClick:()=>{t("dashboard"),y("all")},className:"text-xs sm:text-sm font-bold text-gray-900 dark:text-white hover:underline",title:"Go to Dashboard",children:"Datsar"})}),s.jsxs("div",{className:"hidden md:flex items-center flex-1 justify-between mx-2 lg:mx-4",children:[s.jsxs("nav",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{t("dashboard"),y("all")},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="dashboard"&&h==="all"?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Members"})]}),s.jsxs("button",{onClick:()=>{t("dashboard"),y("edited")},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="dashboard"&&h==="edited"?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(g0,{className:"w-4 h-4"}),s.jsx("span",{children:"Marked"}),Me>0&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full",children:Me})]}),s.jsxs("button",{onClick:()=>t("admin"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="admin"?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(Zi,{className:"w-4 h-4"}),s.jsx("span",{children:"Admin"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>t("settings"),className:"p-2 rounded-lg text-gray-400 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Help Center",children:s.jsx(No,{className:"w-4 h-4"})}),s.jsx(V0,{}),s.jsx("div",{className:"relative",ref:ee,children:s.jsx("button",{onClick:()=>E(!N),className:`flex items-center gap-1.5 p-2 rounded-lg text-sm font-medium transition-colors border border-gray-200 dark:border-gray-600 ${N?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"More options",children:s.jsx(p0,{className:"w-4 h-4"})})})]})]})]}),s.jsx("div",{className:"md:hidden py-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{t("dashboard"),y("all")},className:`flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="dashboard"&&h==="all"?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Members"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V0,{}),s.jsx("div",{className:"relative",ref:le,children:s.jsx("button",{onClick:()=>E(!N),className:`p-2 rounded-lg transition-colors border border-gray-200 dark:border-gray-600 ${N?"bg-gray-100 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Menu",children:s.jsx(p0,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})})]})]})})]}),e==="dashboard"&&s.jsx("div",{className:"md:border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"mx-auto px-3 sm:px-4 py-1.5 md:py-1",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-[11px] leading-4 text-gray-700 dark:text-gray-300 shadow-sm w-fit mx-auto",children:[b&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:b.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx("span",{className:"text-gray-400",children:""})]}),s.jsxs("span",{children:[_e," found"]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsxs("button",{ref:W,onClick:()=>I(!0),className:"flex items-center gap-0.5 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors",children:[w?w.replace("_"," "):"Select Month",s.jsx(tr,{className:"w-3 h-3"})]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:f()?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400",children:f()?"Live":"Demo"})]})})}),s.jsx(M1,{isOpen:K,onClose:()=>I(!1),anchorRef:W}),N&&s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-all",onClick:()=>E(!1)}),s.jsxs("div",{ref:L,className:"absolute right-0 top-0 z-10 h-full w-64 sm:w-72 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl",onClick:X=>X.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Menu"}),s.jsx("button",{onClick:()=>E(!1),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",title:"Close",children:s.jsx(Ye,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("div",{className:"p-2",ref:re,children:[s.jsx(O1,{variant:"menu"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Views"}),s.jsx("div",{className:"space-y-2",children:Oe.filter(X=>["all_members","edited_members","duplicates"].includes(X.id)).map(X=>{const $e=X.icon;let De=!1;return X.id==="all_members"?De=e==="dashboard"&&h==="all":X.id==="edited_members"?De=e==="dashboard"&&h==="edited":X.id==="duplicates"&&(De=e==="dashboard"&&h==="duplicates"),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{X.onClick?X.onClick():t(X.id),E(!1)},className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${De?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:X.label})]}),X.id==="edited_members"&&s.jsx("div",{role:"button",onClick:Ue=>{Ue.stopPropagation(),O(M=>!M)},className:"px-2 py-0.5 rounded-full text-xs bg-blue-600 text-white cursor-pointer hover:bg-blue-700 transition-colors",title:"View Sunday counts",children:Me})]}),X.id==="edited_members"&&$&&s.jsx("div",{className:"mt-1 rounded-md border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 p-2",children:U.length===0?s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"No Sundays"}):U.map(Ue=>{const M=new Date(Ue).toLocaleDateString("en-US",{month:"short",day:"numeric"}),Y=ye[Ue]||0,te=b&&Ue===b.toISOString().split("T")[0];return s.jsxs("button",{onClick:()=>{_(new Date(Ue))},className:`w-full flex items-center justify-between px-2 py-1 rounded text-xs ${te?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[s.jsx("span",{children:M}),s.jsx("span",{className:`${te?"px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300":"px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:Y})]},Ue)})})]},X.id)})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Insights"}),s.jsx("div",{className:"space-y-2",children:Oe.filter(X=>["analytics","ai_assistant"].includes(X.id)).map(X=>{const $e=X.icon,De=e===X.id;return s.jsx("button",{onClick:()=>{X.onClick?X.onClick():t(X.id),E(!1)},className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${De?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:X.label})]})},X.id)})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Actions"}),s.jsx("div",{className:"space-y-2",children:Oe.filter(X=>["create_month","export"].includes(X.id)).map(X=>{const $e=X.icon,De=e===X.id;return s.jsx("button",{onClick:()=>{X.onClick?X.onClick():t(X.id),E(!1)},className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${De?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:X.label})]})},X.id)})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Access"}),s.jsx("div",{className:"space-y-2",children:Oe.filter(X=>["admin"].includes(X.id)).map(X=>{const $e=X.icon,De=e===X.id;return s.jsx("button",{onClick:()=>{X.onClick?X.onClick():t(X.id),E(!1)},className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${De?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx($e,{className:"w-4 h-4"}),s.jsx("span",{children:X.label})]})},X.id)})})]})]})]})]})]})]})},R1=({isOpen:e,onClose:t,member:r})=>{var B,U,G,ye,_e,Me,Oe,X,$e,De,Ue,M,Y,te,Se,H,xe,we,oe,he,Ce,je,Le,qe,Ve,ot,wr,kr;const{updateMember:n,markAttendance:a,refreshSearch:o,currentTable:i,attendanceData:l,loadAllAttendanceData:c,members:d}=Ct(),u=k.useMemo(()=>r!=null&&r.id&&d.find(ue=>ue.id===r.id)||r,[d,r]);vr();const p=ue=>ue.replace("_"," "),[h,y]=k.useState(!1),[x,v]=k.useState({full_name:"",gender:"",phone_number:"",age:"",current_level:"",notes:"",ministry:[],is_visitor:!1}),w=["Choir","Ushers","Youth","Children","Media","Welfare","Protocol","Evangelism"],[f,g]=He.useState(()=>{const ue=localStorage.getItem("customMinistries");return ue?JSON.parse(ue):w});He.useEffect(()=>{const ue=Re=>{g(Re.detail)};return window.addEventListener("ministriesUpdated",ue),()=>window.removeEventListener("ministriesUpdated",ue)},[]);const m=ue=>{if(!ue)return[];try{const[Re,ht]=ue.split("_"),Ge=parseInt(ht),it=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(Re);if(it===-1)return[];const jr=[],ge=new Date(Ge,it,1);for(;ge.getDay()!==0;)ge.setDate(ge.getDate()+1);for(;ge.getMonth()===it;)jr.push(ge.toISOString().split("T")[0]),ge.setDate(ge.getDate()+7);return jr}catch(Re){return console.error("Error generating Sunday dates:",Re),[]}},b=k.useMemo(()=>m(i),[i]),[_,j]=k.useState({}),N=["SHS1","SHS2","SHS3","JHS1","JHS2","JHS3","COMPLETED","UNIVERSITY"];k.useEffect(()=>{if(u){const ue=u.Gender||"",Re=typeof ue=="string"?ue.toLowerCase():"";v({full_name:u.full_name||u["Full Name"]||"",gender:Re,phone_number:u["Phone Number"]||"",age:u.Age||"",current_level:u["Current Level"]||"",notes:u.notes||"",ministry:u.ministry||[],is_visitor:u.is_visitor||!1}),L({parent_name_1:u.parent_name_1||"",parent_phone_1:u.parent_phone_1||"",parent_name_2:u.parent_name_2||"",parent_phone_2:u.parent_phone_2||""}),(u.parent_name_1||u.parent_phone_1)&&re(!0)}},[u]),k.useEffect(()=>{if(!e||!u||b.length===0)return;const ue={};b.forEach(Re=>{var it;const Ge=(it=l[Re])==null?void 0:it[u.id];Ge!==void 0&&(ue[Re]=Ge)}),j(ue)},[e,u==null?void 0:u.id,i]),k.useEffect(()=>{if(u&&b.length>0){const ue={};b.forEach(Re=>{var it;const Ge=(it=l[Re])==null?void 0:it[u.id];Ge!==void 0&&(ue[Re]=Ge)}),j(Re=>({...Re,...ue}))}},[l,u==null?void 0:u.id,b]),k.useEffect(()=>(e?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.documentElement.style.overflow=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[e]);const[E,$]=k.useState(!1),[O,K]=k.useState(!1),[I,ee]=k.useState(!1),[le,re]=k.useState(!1),[W,L]=k.useState({parent_name_1:"",parent_phone_1:"",parent_name_2:"",parent_phone_2:""}),z=async ue=>{var rr,S,T,D;ue.preventDefault(),$(!0);const Re=x.full_name&&x.full_name.trim().length>0,ht=!!x.gender,Ge=!!x.current_level,ge=String(x.phone_number||"").replace(/\D/g,"").length===10,Be=parseInt(x.age),$t=x.age&&!isNaN(Be)&&Be>=1&&Be<=120,Tt=((rr=W.parent_name_1)==null?void 0:rr.trim())||((S=W.parent_phone_1)==null?void 0:S.trim())||((T=W.parent_name_2)==null?void 0:T.trim())||((D=W.parent_phone_2)==null?void 0:D.trim());if(I){if(!Re){F.error("Name is required even in override mode");return}}else{if(!Re||!ht||!Ge||!ge||!$t){F.error("Please fill in all required fields correctly");return}if(!Tt){$(!0),re(!0),F.error("Please provide at least one parent/guardian contact");return}}y(!0);try{await n(u.id,{full_name:x.full_name,Gender:x.gender,"Phone Number":x.phone_number||null,Age:x.age?parseInt(x.age):null,"Current Level":x.current_level,parent_name_1:W.parent_name_1||null,parent_phone_1:W.parent_phone_1||null,parent_name_2:W.parent_name_2||null,parent_phone_2:W.parent_phone_2||null,notes:x.notes||null,ministry:x.ministry||[],is_visitor:x.is_visitor||!1});for(const[R,C]of Object.entries(_))C!==null&&await a(u.id,new Date(R),C);t(),j({}),setTimeout(()=>o(),100)}catch(R){console.error("Error updating member:",R)}finally{y(!1)}},A=ue=>{const{name:Re,value:ht}=ue.target;v(Ge=>({...Ge,[Re]:ht}))};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50 backdrop-animate",children:s.jsxs("div",{className:`shadow-2xl ring-1 max-w-md w-full mx-4 max-h-[90vh] flex flex-col transition-all duration-300 animate-scale-in ${I?"bg-orange-50/90 dark:bg-orange-900/40 backdrop-blur-md ring-orange-300 dark:ring-orange-700 rounded-3xl":"bg-white dark:bg-gray-800 ring-gray-200 dark:ring-gray-700 rounded-xl"}`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b flex-shrink-0 transition-all duration-300 ${I?"bg-orange-100/80 dark:bg-orange-800/80 border-orange-200 dark:border-orange-700 rounded-t-3xl":"border-gray-200 dark:border-gray-700 rounded-t-xl"}`,children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Edit Member"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ee(!I),className:`px-3 py-1 rounded text-xs border transition-colors ${I?"bg-orange-200 dark:bg-orange-700 text-orange-800 dark:text-orange-200 border-orange-300 dark:border-orange-600 font-medium":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Toggle Override Mode (Bypass Validation)",children:I?"Override Active":"Override"}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})]}),s.jsxs("form",{onSubmit:z,className:"p-6 space-y-4 overflow-y-auto flex-1 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("input",{type:"text",name:"full_name",value:x.full_name,onChange:A,required:!0,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors ${E&&(!x.full_name||!x.full_name.trim())?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter full name"})]}),E&&(!x.full_name||!x.full_name.trim())&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Full name is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gender *"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-lg cursor-pointer transition-colors ${x.gender==="male"?"border-primary-500 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 ring-2 ring-primary-300 dark:ring-primary-800 shadow-sm font-semibold":E&&!x.gender?"border-red-500 ring-2 ring-red-400 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"gender",value:"male",checked:x.gender==="male",onChange:A,required:!0,className:"text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm",children:"Male"})]}),s.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-lg cursor-pointer transition-colors ${x.gender==="female"?"border-primary-500 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 ring-2 ring-primary-300 dark:ring-primary-800 shadow-sm font-semibold":E&&!x.gender?"border-red-500 ring-2 ring-red-400 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"gender",value:"female",checked:x.gender==="female",onChange:A,required:!0,className:"text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm",children:"Female"})]})]}),E&&!x.gender&&s.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:"Please select gender to continue"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(Dr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),s.jsx("input",{type:"tel",name:"phone_number",value:x.phone_number,onChange:A,inputMode:"numeric",pattern:"[0-9]*",maxLength:10,placeholder:"Enter phone number",className:"w-full pl-10 pr-20 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>v(ue=>({...ue,phone_number:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]}),E&&String(x.phone_number||"").replace(/\D/g,"").length!==10&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Phone number must be 10 digits"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("input",{type:"number",name:"age",value:x.age,onChange:A,min:"1",max:"120",inputMode:"numeric",pattern:"[0-9]*",step:"1",className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-colors ${E&&(!x.age||isNaN(parseInt(x.age)))?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}`,placeholder:"Enter age"})]}),E&&(!x.age||isNaN(parseInt(x.age)))&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Please enter age"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Level"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>K(!O),className:`w-full pl-3 pr-4 py-2 text-left rounded-lg focus:outline-none focus:ring-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-200 border flex items-center justify-between ${E&&!x.current_level?"border-red-500 ring-1 ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx($m,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("span",{className:x.current_level?"":"text-gray-500 dark:text-gray-400",children:x.current_level||"Select level"})]}),s.jsx(tr,{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${O?"transform rotate-180":""}`})]}),O&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto",children:N.map(ue=>s.jsx("button",{type:"button",onClick:()=>{A({target:{name:"current_level",value:ue}}),K(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors ${x.current_level===ue?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:ue},ue))})]}),E&&!x.current_level&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Please select current level"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[p(i)," Sunday Attendance (Optional)"]}),s.jsx("div",{className:"space-y-3",children:b.map(ue=>{const ht=new Date(ue).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 transition-colors",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:ht}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>j(Ge=>({...Ge,[ue]:!0})),className:`px-3 py-1 text-xs rounded-lg font-bold transition-all duration-200 ${_[ue]===!0?"bg-green-800 dark:bg-green-700 text-white shadow-xl ring-4 ring-green-300 dark:ring-green-400 border-2 border-green-900 dark:border-green-300 font-extrabold transform scale-110":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-500 hover:bg-green-50 dark:hover:bg-green-800"}`,children:"Present"}),s.jsx("button",{type:"button",onClick:()=>j(Ge=>({...Ge,[ue]:!1})),className:`px-3 py-1 text-xs rounded-lg font-bold transition-all duration-200 ${_[ue]===!1?"bg-red-800 dark:bg-red-700 text-white shadow-xl ring-4 ring-red-300 dark:ring-red-400 border-2 border-red-900 dark:border-red-300 font-extrabold transform scale-110":"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-500 hover:bg-red-50 dark:hover:bg-red-800"}`,children:"Absent"}),s.jsx("button",{type:"button",onClick:()=>j(Ge=>({...Ge,[ue]:null})),className:"px-3 py-1 text-xs rounded-lg bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-500 hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Clear"})]})]},ue)})})]}),s.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${E&&!I&&!((B=W.parent_name_1)!=null&&B.trim()||(U=W.parent_phone_1)!=null&&U.trim()||(G=W.parent_name_2)!=null&&G.trim()||(ye=W.parent_phone_2)!=null&&ye.trim())?"border-red-500 ring-4 ring-red-50 dark:ring-red-900/30":"border-gray-200 dark:border-gray-600"}`,children:[s.jsxs("button",{type:"button",onClick:()=>re(!le),className:`w-full flex items-center justify-between p-3 transition-colors ${E&&!I&&!((_e=W.parent_name_1)!=null&&_e.trim()||(Me=W.parent_phone_1)!=null&&Me.trim()||(Oe=W.parent_name_2)!=null&&Oe.trim()||(X=W.parent_phone_2)!=null&&X.trim())?"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:`w-4 h-4 ${E&&!I&&!(($e=W.parent_name_1)!=null&&$e.trim()||(De=W.parent_phone_1)!=null&&De.trim()||(Ue=W.parent_name_2)!=null&&Ue.trim()||(M=W.parent_phone_2)!=null&&M.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`}),s.jsx("span",{className:`text-sm font-medium ${E&&!I&&!((Y=W.parent_name_1)!=null&&Y.trim()||(te=W.parent_phone_1)!=null&&te.trim()||(Se=W.parent_name_2)!=null&&Se.trim()||(H=W.parent_phone_2)!=null&&H.trim())?"text-red-700 dark:text-red-300":"text-gray-700 dark:text-gray-300"}`,children:"Parent/Guardian Info"}),(W.parent_name_1||W.parent_phone_1)&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded",children:"Saved"}),E&&!I&&!((xe=W.parent_name_1)!=null&&xe.trim()||(we=W.parent_phone_1)!=null&&we.trim()||(oe=W.parent_name_2)!=null&&oe.trim()||(he=W.parent_phone_2)!=null&&he.trim())&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded font-medium",children:"Required"})]}),le?s.jsx(Eu,{className:`w-4 h-4 ${E&&!I&&!((Ce=W.parent_name_1)!=null&&Ce.trim()||(je=W.parent_phone_1)!=null&&je.trim()||(Le=W.parent_name_2)!=null&&Le.trim()||(qe=W.parent_phone_2)!=null&&qe.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`}):s.jsx(tr,{className:`w-4 h-4 ${E&&!I&&!((Ve=W.parent_name_1)!=null&&Ve.trim()||(ot=W.parent_phone_1)!=null&&ot.trim()||(wr=W.parent_name_2)!=null&&wr.trim()||(kr=W.parent_phone_2)!=null&&kr.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`})]}),le&&s.jsxs("div",{className:"p-3 space-y-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Parent/Guardian 1 *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:W.parent_name_1,onChange:ue=>L(Re=>({...Re,parent_name_1:ue.target.value})),placeholder:"Name",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:W.parent_phone_1,onChange:ue=>L(Re=>({...Re,parent_phone_1:ue.target.value.replace(/\D/g,"").slice(0,10)})),placeholder:"Phone Number",className:"w-full pl-10 pr-20 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>L(ue=>({...ue,parent_phone_1:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Parent/Guardian 2 (Optional)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:W.parent_name_2,onChange:ue=>L(Re=>({...Re,parent_name_2:ue.target.value})),placeholder:"Name",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:W.parent_phone_2,onChange:ue=>L(Re=>({...Re,parent_phone_2:ue.target.value.replace(/\D/g,"").slice(0,10)})),placeholder:"Phone Number",className:"w-full pl-10 pr-20 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>L(ue=>({...ue,parent_phone_2:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ministry/Groups (Optional)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(ue=>s.jsx("button",{type:"button",onClick:()=>{v(Re=>({...Re,ministry:Re.ministry.includes(ue)?Re.ministry.filter(ht=>ht!==ue):[...Re.ministry,ue]}))},className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${x.ministry.includes(ue)?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:ue},ue))})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mark as Visitor"}),s.jsx("button",{type:"button",onClick:()=>v(ue=>({...ue,is_visitor:!ue.is_visitor})),className:`relative w-11 h-6 rounded-full transition-colors ${x.is_visitor?"bg-amber-500":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${x.is_visitor?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Au,{className:"w-4 h-4"}),"Notes (Optional)"]})}),s.jsx("textarea",{name:"notes",value:x.notes,onChange:A,rows:2,placeholder:"Add any notes about this member...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 focus:ring-primary-500 text-sm resize-none"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 transition-colors btn-press",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:h||!x.full_name,className:`flex-1 px-4 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors btn-press ${I?"bg-orange-600 hover:bg-orange-700":"bg-primary-600 hover:bg-primary-700"}`,children:h?"Updating...":I?"Update (Override)":"Update Member"})]})]})]})})},ny=({isOpen:e,onClose:t})=>{var Oe,X,$e,De,Ue,M,Y,te,Se,H,xe,we,oe,he,Ce,je,Le,qe,Ve,ot,wr,kr,ue,Re,ht,Ge,it,jr;const{addMember:r,markAttendance:n,currentTable:a,toggleMemberBadge:o,updateMemberBadges:i,updateMember:l}=Ct();vr();const c=ge=>ge.replace("_"," "),[d,u]=k.useState(!1),[p,h]=k.useState(!1);k.useState(!1);const[y,x]=k.useState(!1),[v,w]=k.useState(null),[f,g]=k.useState({full_name:"",gender:"",phone_number:"",age:"",current_level:"",notes:"",ministry:[],is_visitor:!1}),m=["Choir","Ushers","Youth","Children","Media","Welfare","Protocol","Evangelism"],[b,_]=He.useState(()=>{const ge=localStorage.getItem("customMinistries");return ge?JSON.parse(ge):m});He.useEffect(()=>{const ge=Be=>{_(Be.detail)};return window.addEventListener("ministriesUpdated",ge),()=>window.removeEventListener("ministriesUpdated",ge)},[]);const N=(ge=>{if(!ge)return[];try{const[Be,$t]=ge.split("_"),Tt=parseInt($t),rr=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(Be);if(rr===-1)return[];const S=[],T=new Date(Tt,rr,1);for(;T.getDay()!==0;)T.setDate(T.getDate()+1);for(;T.getMonth()===rr;)S.push(T.toISOString().split("T")[0]),T.setDate(T.getDate()+7);return S}catch(Be){return console.error("Error generating Sunday dates:",Be),[]}})(a),E=()=>{const ge={};return N.forEach(Be=>{ge[Be]=null}),ge},[$,O]=k.useState(()=>E()),[K,I]=k.useState(!1),[ee,le]=k.useState([]);k.useState(!1);const[re,W]=k.useState(!1),[L,z]=k.useState({parent_name_1:"",parent_phone_1:"",parent_name_2:"",parent_phone_2:""});He.useEffect(()=>{e&&!K&&O(E()),I(e)},[e,a]),He.useEffect(()=>(e?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.documentElement.style.overflow=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[e]);const A=["SHS1","SHS2","SHS3","JHS1","JHS2","JHS3","COMPLETED","UNIVERSITY"],[B,U]=k.useState(!1),[G,ye]=k.useState(!1),_e=async ge=>{var C,V,ne,ae,Ne;ge.preventDefault(),U(!0);const Be=f.full_name&&f.full_name.trim().length>0,$t=!!f.gender,Tt=!!f.current_level,S=(f.phone_number||"").replace(/\D/g,"").length===10,T=parseInt(f.age),D=f.age&&!isNaN(T)&&T>=1&&T<=120,R=((C=L.parent_name_1)==null?void 0:C.trim())||((V=L.parent_phone_1)==null?void 0:V.trim())||((ne=L.parent_name_2)==null?void 0:ne.trim())||((ae=L.parent_phone_2)==null?void 0:ae.trim());if(!G){if(!Be||!$t||!Tt||!S||!D){h(!0),F.error("Please fill in all required fields correctly");return}if(!R){h(!0),W(!0),F.error("Please provide at least one parent/guardian contact");return}}u(!0);try{const Te=await r({...f,...L,age:f.age?parseInt(f.age):null,phone_number:f.phone_number||null,notes:f.notes||null,ministry:((Ne=f.ministry)==null?void 0:Ne.length)>0?f.ministry:null,is_visitor:f.is_visitor||!1});if(ee.length>0&&(Te!=null&&Te.id)){for(const ce of ee)try{await o(Te.id,ce,{suppressToast:!0})}catch(se){console.error(`Error assigning ${ce} badge:`,se)}try{await i()}catch(ce){console.warn("Badge update recalculation failed:",ce)}}for(const[ce,se]of Object.entries($))if(se!==null)try{await n(Te.id,new Date(ce),se)}catch(ze){console.error(`Error marking attendance for ${ce}:`,ze)}g({full_name:"",gender:"",phone_number:"",age:"",current_level:""}),O(E()),le([]),z({parent_name_1:"",parent_phone_1:"",parent_name_2:"",parent_phone_2:""}),h(!1),w(Te.id),h(!1),w(Te.id),t(),ye(!1)}catch(Te){console.error("Error adding member:",Te)}finally{u(!1)}},Me=ge=>{const{name:Be,value:$t}=ge.target;g(Tt=>({...Tt,[Be]:$t}))};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50 backdrop-animate",children:s.jsxs("div",{className:`shadow-2xl ring-1 max-w-md w-full mx-4 max-h-[90vh] flex flex-col transition-all duration-300 animate-scale-in ${G?"bg-orange-50/90 dark:bg-orange-900/40 backdrop-blur-md ring-orange-300 dark:ring-orange-700 rounded-3xl":"bg-white dark:bg-gray-800 ring-gray-200 dark:ring-gray-700 rounded-xl"}`,children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b flex-shrink-0 transition-all duration-300 ${G?"bg-orange-100/80 dark:bg-orange-800/80 border-orange-200 dark:border-orange-700 rounded-t-3xl":"border-gray-200 dark:border-gray-700 rounded-t-xl"}`,children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Member"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ye(!G),className:`px-3 py-1 rounded text-xs border transition-colors ${G?"bg-orange-200 dark:bg-orange-700 text-orange-800 dark:text-orange-200 border-orange-300 dark:border-orange-600 font-medium":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Toggle Override Mode (Bypass Validation)",children:G?"Override Active":"Override"}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})]}),s.jsx("div",{className:"overflow-y-auto no-scrollbar",children:s.jsx("form",{onSubmit:_e,noValidate:!0,className:"p-6 space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(Um,{className:"w-4 h-4"}),s.jsx("span",{children:"Basic information"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(sn,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),s.jsx("input",{type:"text",name:"full_name",value:f.full_name,onChange:Me,className:`w-full pl-10 pr-4 py-2 rounded-lg shadow-sm focus:outline-none focus:ring-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200 border ${p&&(!f.full_name||!f.full_name.trim())?"border-red-500 ring-1 ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter full name"})]}),p&&(!f.full_name||!f.full_name.trim())&&s.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:"Please enter full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gender *"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-lg cursor-pointer transition-colors duration-200 ${f.gender==="male"?"border-primary-500 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 ring-1 ring-primary-300 dark:ring-primary-800 shadow-sm font-semibold":p&&!f.gender?"border-red-500 ring-1 ring-red-400 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"gender",value:"male",checked:f.gender==="male",onChange:Me,className:"text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm",children:"Male"})]}),s.jsxs("label",{className:`flex items-center space-x-2 p-3 border rounded-lg cursor-pointer transition-colors duration-200 ${f.gender==="female"?"border-primary-500 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 ring-1 ring-primary-300 dark:ring-primary-800 shadow-sm font-semibold":p&&!f.gender?"border-red-500 ring-1 ring-red-400 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"gender",value:"female",checked:f.gender==="female",onChange:Me,className:"text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm",children:"Female"})]})]}),p&&!f.gender&&s.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:"Please select gender to continue"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:s.jsx(Dr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),s.jsx("input",{type:"tel",name:"phone_number",value:f.phone_number,onChange:Me,inputMode:"numeric",pattern:"[0-9]*",maxLength:10,className:`w-full pl-10 pr-20 py-2 rounded-lg focus:outline-none focus:ring-1 transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border ${p&&(f.phone_number||"").replace(/\D/g,"").length!==10?"border-red-500 ring-1 ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter phone number"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>g(ge=>({...ge,phone_number:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]}),p&&(f.phone_number||"").replace(/\D/g,"").length!==10&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Phone number must be 10 digits"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("input",{type:"number",name:"age",value:f.age,onChange:Me,min:"1",max:"120",inputMode:"numeric",pattern:"[0-9]*",step:"1",className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200 border ${p&&(!f.age||isNaN(parseInt(f.age)))?"border-red-500 ring-1 ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter age"})]}),p&&(!f.age||isNaN(parseInt(f.age)))&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Please enter age"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Level"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>x(!y),className:`w-full pl-3 pr-4 py-2 text-left rounded-lg focus:outline-none focus:ring-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-200 border flex items-center justify-between ${p&&!f.current_level?"border-red-500 ring-1 ring-red-400":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx($m,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("span",{className:f.current_level?"":"text-gray-500 dark:text-gray-400",children:f.current_level||"Select level"})]}),s.jsx(tr,{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${y?"transform rotate-180":""}`})]}),y&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto",children:A.map(ge=>s.jsx("button",{type:"button",onClick:()=>{Me({target:{name:"current_level",value:ge}}),x(!1)},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors ${f.current_level===ge?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium":"text-gray-700 dark:text-gray-300"}`,children:ge},ge))})]}),p&&!f.current_level&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Please select current level"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[c(a)," Sunday Attendance (Optional)"]}),s.jsx("div",{className:"space-y-3",children:N.map(ge=>{const $t=new Date(ge).toLocaleDateString("en-US",{month:"long",day:"numeric"});return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 hover:border-primary-300 dark:hover:border-primary-600 transition-colors duration-200",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:$t}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>O(Tt=>({...Tt,[ge]:!0})),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${$[ge]===!0?"bg-green-600 text-white shadow-sm":"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800"}`,children:"Present"}),s.jsx("button",{type:"button",onClick:()=>O(Tt=>({...Tt,[ge]:!1})),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${$[ge]===!1?"bg-red-600 text-white shadow-sm":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800"}`,children:"Absent"}),s.jsx("button",{type:"button",onClick:()=>O(Tt=>({...Tt,[ge]:null})),className:"px-3 py-1 rounded-lg text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Clear"})]})]},ge)})})]}),s.jsxs("div",{className:`border rounded-lg overflow-hidden transition-all duration-300 ${p&&!((Oe=L.parent_name_1)!=null&&Oe.trim()||(X=L.parent_phone_1)!=null&&X.trim()||($e=L.parent_name_2)!=null&&$e.trim()||(De=L.parent_phone_2)!=null&&De.trim())?"border-red-500 ring-4 ring-red-50 dark:ring-red-900/30":"border-gray-200 dark:border-gray-600"}`,children:[s.jsxs("button",{type:"button",onClick:()=>W(!re),className:`w-full flex items-center justify-between p-3 transition-colors ${p&&!((Ue=L.parent_name_1)!=null&&Ue.trim()||(M=L.parent_phone_1)!=null&&M.trim()||(Y=L.parent_name_2)!=null&&Y.trim()||(te=L.parent_phone_2)!=null&&te.trim())?"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:`w-4 h-4 ${p&&!((Se=L.parent_name_1)!=null&&Se.trim()||(H=L.parent_phone_1)!=null&&H.trim()||(xe=L.parent_name_2)!=null&&xe.trim()||(we=L.parent_phone_2)!=null&&we.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`}),s.jsxs("span",{className:`text-sm font-medium ${p&&!((oe=L.parent_name_1)!=null&&oe.trim()||(he=L.parent_phone_1)!=null&&he.trim()||(Ce=L.parent_name_2)!=null&&Ce.trim()||(je=L.parent_phone_2)!=null&&je.trim())?"text-red-700 dark:text-red-300":"text-gray-700 dark:text-gray-300"}`,children:["Parent/Guardian Info ",p&&!((Le=L.parent_name_1)!=null&&Le.trim()||(qe=L.parent_phone_1)!=null&&qe.trim()||(Ve=L.parent_name_2)!=null&&Ve.trim()||(ot=L.parent_phone_2)!=null&&ot.trim())?"(Required)":"(Optional)"]})]}),re?s.jsx(Eu,{className:`w-4 h-4 ${p&&!((wr=L.parent_name_1)!=null&&wr.trim()||(kr=L.parent_phone_1)!=null&&kr.trim()||(ue=L.parent_name_2)!=null&&ue.trim()||(Re=L.parent_phone_2)!=null&&Re.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`}):s.jsx(tr,{className:`w-4 h-4 ${p&&!((ht=L.parent_name_1)!=null&&ht.trim()||(Ge=L.parent_phone_1)!=null&&Ge.trim()||(it=L.parent_name_2)!=null&&it.trim()||(jr=L.parent_phone_2)!=null&&jr.trim())?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`})]}),re&&s.jsxs("div",{className:"p-3 space-y-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Parent/Guardian 1"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:L.parent_name_1,onChange:ge=>z(Be=>({...Be,parent_name_1:ge.target.value})),placeholder:"Name",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:L.parent_phone_1,onChange:ge=>z(Be=>({...Be,parent_phone_1:ge.target.value.replace(/\D/g,"").slice(0,10)})),placeholder:"Phone Number",className:"w-full pl-10 pr-20 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>z(ge=>({...ge,parent_phone_1:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Parent/Guardian 2"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:L.parent_name_2,onChange:ge=>z(Be=>({...Be,parent_name_2:ge.target.value})),placeholder:"Name",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:L.parent_phone_2,onChange:ge=>z(Be=>({...Be,parent_phone_2:ge.target.value.replace(/\D/g,"").slice(0,10)})),placeholder:"Phone Number",className:"w-full pl-10 pr-20 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500 text-sm"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx("button",{type:"button",onClick:()=>z(ge=>({...ge,parent_phone_2:"0000000000"})),className:"px-2 py-1 rounded text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 border border-gray-300 dark:border-gray-600",title:"Set no phone number",children:"No Phone"})})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ministry/Groups (Optional)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(ge=>s.jsx("button",{type:"button",onClick:()=>{g(Be=>({...Be,ministry:Be.ministry.includes(ge)?Be.ministry.filter($t=>$t!==ge):[...Be.ministry,ge]}))},className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${f.ministry.includes(ge)?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:ge},ge))})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mark as Visitor"}),s.jsx("button",{type:"button",onClick:()=>g(ge=>({...ge,is_visitor:!ge.is_visitor})),className:`relative w-11 h-6 rounded-full transition-colors ${f.is_visitor?"bg-amber-500":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${f.is_visitor?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Au,{className:"w-4 h-4"}),"Notes (Optional)"]})}),s.jsx("textarea",{name:"notes",value:f.notes,onChange:Me,rows:2,placeholder:"Add any notes about this member...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 focus:ring-primary-500 text-sm resize-none"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 transition-colors btn-press",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d,className:`flex-1 px-4 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors btn-press ${G?"bg-orange-600 hover:bg-orange-700":"bg-primary-600 hover:bg-primary-700"}`,children:d?"Adding...":G?"Add (Override)":"Add Member"})]})]})})})]})}):null},sy=({isOpen:e,onClose:t})=>{var m;const{createNewMonth:r}=Ct();vr();const[n,a]=k.useState(!1),[o,i]=k.useState(""),[l,c]=k.useState(!1),[d,u]=k.useState(new Date().getFullYear()),[p,h]=k.useState(!1),y=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],x=new Date().getFullYear(),v=Array.from({length:5},(b,_)=>x+_),w=(b,_)=>{const j=[],N=new Date(_,b-1,1);for(;N.getDay()!==0;)N.setDate(N.getDate()+1);for(;N.getMonth()===b-1;)j.push(new Date(N)),N.setDate(N.getDate()+7);return j},f=async b=>{var _;if(b.preventDefault(),!(!o||!d)){a(!0);try{const j=(_=y.find(E=>E.value===parseInt(o)))==null?void 0:_.label,N=w(parseInt(o),d);await r({month:parseInt(o),year:d,monthName:j,sundays:N}),i(""),u(new Date().getFullYear()),t()}catch(j){console.error("Error creating month:",j),j.message?`${j.message}`:j.error?`${j.error}`:j.details&&`${j.details}`,console.error("Full error details:",{message:j.message,error:j.error,details:j.details,code:j.code,hint:j.hint,fullError:j})}finally{a(!1)}}};if(!e)return null;const g=o&&d?w(parseInt(o),d):[];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-sm sm:max-w-md mx-4 overflow-visible no-scrollbar transition-colors duration-200",style:{maxHeight:"calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 2rem)"},children:[s.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-4 sm:p-6 border-b border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 rounded-t-lg",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Create New Month"}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("form",{onSubmit:f,className:"px-4 py-4 sm:p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Month *"}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"}),s.jsxs("button",{type:"button",onClick:()=>c(b=>!b),className:"w-full min-w-0 pl-10 pr-10 py-2 text-left border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors flex items-center justify-between",children:[s.jsx("span",{className:o?"":"text-gray-400 dark:text-gray-400",children:o?(m=y.find(b=>b.value===parseInt(o)))==null?void 0:m.label:"Choose month"}),s.jsx("span",{className:"ml-2 inline-flex items-center justify-center text-gray-400 dark:text-gray-400",children:s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${l?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})})]}),l&&s.jsx("div",{className:"absolute left-0 right-0 mt-1 z-20 max-h-60 overflow-y-auto no-scrollbar rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:y.map(b=>{const _=o&&parseInt(o)===b.value;return s.jsx("button",{type:"button",onClick:()=>{i(String(b.value)),c(!1)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${_?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:b.label},b.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Year *"}),s.jsxs("div",{className:"relative",children:[s.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"}),s.jsxs("button",{type:"button",onClick:()=>h(b=>!b),className:"w-full min-w-0 pl-10 pr-10 py-2 text-left border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors flex items-center justify-between",children:[s.jsx("span",{children:d}),s.jsx("span",{className:"ml-2 inline-flex items-center justify-center text-gray-400 dark:text-gray-400",children:s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${p?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})})]}),p&&s.jsx("div",{className:"absolute left-0 right-0 mt-1 z-20 max-h-60 overflow-y-auto no-scrollbar rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:v.map(b=>{const _=d===b;return s.jsx("button",{type:"button",onClick:()=>{u(b),h(!1)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${_?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:b},b)})})]})]}),g.length>0&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:["Sunday Dates Preview (",g.length," dates)"]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 max-h-32 overflow-y-auto transition-colors",children:s.jsx("div",{className:"space-y-1",children:g.map((b,_)=>s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:b.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},_))})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n||!o||!d,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:n?"Creating...":s.jsxs(s.Fragment,{children:[s.jsx(Tu,{className:"w-4 h-4 mr-2"}),"Create Month"]})})]})]})]})})},I1=({isOpen:e,onClose:t,onConfirm:r,title:n="Confirm Action",message:a="Are you sure you want to proceed?",confirmText:o="Confirm",cancelText:i="Cancel",confirmButtonClass:l="bg-red-600 hover:bg-red-700 text-white",cancelButtonClass:c="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-animate",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md mx-4 overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-700 animate-scale-in",children:[s.jsxs("div",{className:"px-6 py-4 bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-800 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center",children:s.jsx(ea,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors btn-press",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),s.jsx("div",{className:"px-6 py-6 text-center",children:s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base leading-relaxed",children:a})]})}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex gap-3",children:[s.jsx("button",{onClick:t,className:`flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 btn-press ${c}`,children:i}),s.jsx("button",{onClick:()=>{r(),t()},className:`flex-1 px-4 py-3 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg hover:shadow-xl btn-press ${l}`,children:o})]})]})}):null,$1=({member:e,missingFields:t,missingDates:r,pendingAttendanceAction:n,selectedAttendanceDate:a,onClose:o,onSave:i})=>{const{updateMember:l,markAttendance:c,selectedAttendanceDate:d}=Ct(),[u,p]=k.useState({}),[h,y]=k.useState({}),[x,v]=k.useState(!1),[w,f]=k.useState(null),[g,m]=k.useState(!1),[b,_]=k.useState(!1),[j,N]=k.useState(!1),E=["JHS1","JHS2","JHS3","SHS1","SHS2","SHS3","COMPLETED","UNIVERSITY"],[$,O]=k.useState(!1),K=["Male","Female"],[I,ee]=k.useState(null);k.useEffect(()=>{if(a)try{ee(a.toISOString().split("T")[0]);return}catch{}r&&r.length>0?ee(r[0].toISOString().split("T")[0]):ee(null)},[a,r]),k.useEffect(()=>{const A={};t.includes("Phone Number")&&(A.phoneNumber=e["Phone Number"]||""),t.includes("Gender")&&(A.gender=e.Gender||""),t.includes("Age")&&(A.age=e.Age||""),t.includes("Current Level")&&(A.currentLevel=e["Current Level"]||""),t.includes("Parent Name 1")&&(A.parentName1=e.parent_name_1||""),t.includes("Parent Phone 1")&&(A.parentPhone1=e.parent_phone_1||""),p(A);const B={};r.forEach(U=>{B[U.toISOString().split("T")[0]]=null}),y(B)},[e,t,r]);const le=(A,B)=>{p(U=>({...U,[A]:B})),w&&f(null)},re=(A,B)=>{y(U=>({...U,[A]:B})),w&&f(null)},W=()=>{for(const A of t)if(A==="Phone Number"&&(!u.phoneNumber||u.phoneNumber.length!==10)||A==="Gender"&&(!u.gender||u.gender==="")||A==="Age"&&(!u.age||u.age==="")||A==="Current Level"&&(!u.currentLevel||u.currentLevel==="")||A==="Parent Name 1"&&(!u.parentName1||u.parentName1==="")||A==="Parent Phone 1"&&(!u.parentPhone1||u.parentPhone1.length!==10))return!1;for(const A of Object.keys(h))if(h[A]===null)return!1;return!0},L=A=>g?A==="Phone Number"?!u.phoneNumber||u.phoneNumber.length!==10:A==="Gender"?!u.gender||u.gender==="":A==="Age"?!u.age||u.age==="":A==="Current Level"?!u.currentLevel||u.currentLevel==="":A==="Parent Name 1"?!u.parentName1||u.parentName1==="":A==="Parent Phone 1"?!u.parentPhone1||u.parentPhone1.length!==10:!1:!1,z=async()=>{if(m(!0),console.log("=== SAVE BUTTON CLICKED ==="),console.log("Form complete?",W()),!b&&!W()){console.log("Form not complete, showing error"),F.error("Please fill in all highlighted fields");return}v(!0),f(null),console.log("Starting save process...");try{if(!b&&t.length>0){const B={};t.includes("Phone Number")&&(B["Phone Number"]=u.phoneNumber),t.includes("Gender")&&(B.Gender=u.gender),t.includes("Age")&&(B.Age=u.age),t.includes("Current Level")&&(B["Current Level"]=u.currentLevel),t.includes("Parent Name 1")&&(B.parent_name_1=u.parentName1),t.includes("Parent Phone 1")&&(B.parent_phone_1=u.parentPhone1),console.log("Updating member with:",B),await l(e.id,B),console.log("Member updated successfully")}const A=I||(a?a.toISOString().split("T")[0]:null);if(n&&A){const B=!!n.present;console.log(`Marking pending selected date ${A}: ${B}`),await c(e.id,new Date(A),B)}for(const B of Object.keys(h)){if(A&&B===A)continue;const U=h[B];U!==null&&(console.log(`Marking attendance for ${B}: ${U}`),await c(e.id,new Date(B),U))}console.log("All updates complete!"),F.success(b?"Attendance saved (Override)":"Missing data saved successfully!"),i(),o()}catch(A){console.error("Error saving missing data:",A);const B=A.message||"Unknown error occurred";f(B),F.error(`Failed to save data: ${B}`)}finally{v(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4 z-50 backdrop-animate",children:s.jsxs("div",{className:`max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-300 scrollbar-hide ring-1 rounded-3xl animate-scale-in ${b?"bg-orange-50/90 dark:bg-orange-900/40 backdrop-blur-md ring-orange-300 dark:ring-orange-700":"bg-white dark:bg-gray-800 ring-gray-200 dark:ring-gray-700"}`,style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsx("style",{children:`
                    .scrollbar-hide::-webkit-scrollbar {
                        display: none;
                    }
                `}),s.jsxs("div",{className:`sticky top-0 border-b px-6 py-4 flex items-center justify-between z-10 transition-all duration-300 rounded-t-3xl ${b?"bg-orange-100/80 dark:bg-orange-800/80 border-orange-200 dark:border-orange-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ji,{className:`w-5 h-5 ${b?"text-orange-500":"text-blue-500"}`}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Complete Missing Information"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>_(!b),className:`px-3 py-1 rounded text-xs border transition-colors ${b?"bg-orange-200 dark:bg-orange-700 text-orange-800 dark:text-orange-200 border-orange-300 dark:border-orange-600 font-medium":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Toggle Override Mode (Bypass Validation)",children:b?"Override Active":"Override"}),s.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[w&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200 font-medium mb-1",children:[s.jsx(Ji,{className:"w-4 h-4"}),s.jsx("span",{children:"Error Saving Data"})]}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 break-words",children:w})]}),s.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 border border-orange-300 dark:border-orange-700 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium mb-2",children:[" Complete Missing Information for ",s.jsx("strong",{children:e["Full Name"]||e.full_name})]}),s.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:[r.length>0&&s.jsxs("span",{className:"block mb-1",children:[" ",s.jsx("strong",{children:"Past Sundays:"})," If you were in church, select ",s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:"Present (Green)"}),". If not, select ",s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:"Absent (Red)"}),"."]}),t.length>0&&s.jsxs("span",{className:"block",children:[" ",s.jsx("strong",{children:"Required Fields:"})," Please fill in all missing information below."]})]})]}),t.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Member Information"}),t.includes("Phone Number")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number * (10 digits)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"tel",value:u.phoneNumber||"",onChange:A=>{const B=A.target.value.replace(/\D/g,"").slice(0,10);le("phoneNumber",B)},maxLength:"10",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white ${L("Phone Number")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter 10-digit phone number"}),s.jsx("button",{type:"button",onClick:()=>le("phoneNumber","0000000000"),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"No Phone"})]}),u.phoneNumber&&u.phoneNumber.length!==10&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Must be exactly 10 digits"}),L("Phone Number")&&!u.phoneNumber&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Phone number is required"})]}),t.includes("Gender")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gender *"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>O(A=>!A),className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors flex items-center justify-between ${L("Gender")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,children:[s.jsx("span",{className:u.gender?"":"text-gray-400 dark:text-gray-400",children:u.gender||"Select gender"}),s.jsx(tr,{className:`w-4 h-4 text-gray-400 transition-transform ${$?"rotate-180":""}`})]}),$&&s.jsx("div",{className:"absolute left-0 right-0 mt-1 z-50 max-h-60 overflow-y-auto rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:K.map(A=>{const B=u.gender===A;return s.jsx("button",{type:"button",onClick:()=>{le("gender",A),O(!1)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${B?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:A},A)})})]}),L("Gender")&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Gender is required"})]}),t.includes("Age")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age *"}),s.jsx("input",{type:"text",value:u.age||"",onChange:A=>le("age",A.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white ${L("Age")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter age"}),L("Age")&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Age is required"})]}),t.includes("Current Level")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Level *"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>N(A=>!A),className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors flex items-center justify-between ${L("Current Level")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,children:[s.jsx("span",{className:u.currentLevel?"":"text-gray-400 dark:text-gray-400",children:u.currentLevel||"Select level"}),s.jsx(tr,{className:`w-4 h-4 text-gray-400 transition-transform ${j?"rotate-180":""}`})]}),j&&s.jsx("div",{className:"absolute left-0 right-0 mt-1 z-50 max-h-60 overflow-y-auto rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:E.map(A=>{const B=u.currentLevel===A;return s.jsx("button",{type:"button",onClick:()=>{le("currentLevel",A),N(!1)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${B?"bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-800 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:A},A)})})]}),L("Current Level")&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Current level is required"})]}),t.includes("Parent Name 1")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parent/Guardian Name *"}),s.jsx("input",{type:"text",value:u.parentName1||"",onChange:A=>le("parentName1",A.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white ${L("Parent Name 1")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter parent/guardian name"}),L("Parent Name 1")&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Parent name is required"})]}),t.includes("Parent Phone 1")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Parent/Guardian Phone * (10 digits)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"tel",value:u.parentPhone1||"",onChange:A=>{const B=A.target.value.replace(/\D/g,"").slice(0,10);le("parentPhone1",B)},maxLength:"10",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white ${L("Parent Phone 1")?"border-red-500 focus:ring-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 focus:ring-primary-500"}`,placeholder:"Enter 10-digit phone number"}),s.jsx("button",{type:"button",onClick:()=>le("parentPhone1","0000000000"),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"No Phone"})]}),u.parentPhone1&&u.parentPhone1.length!==10&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Must be exactly 10 digits"}),L("Parent Phone 1")&&!u.parentPhone1&&s.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Parent phone is required"})]})]}),r.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Past Sunday Attendance"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Please mark attendance for the following past Sundays:"}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Apply pending attendance to"}),s.jsx("select",{value:I||"",onChange:A=>ee(A.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white border-gray-300 dark:border-gray-600 focus:ring-primary-500",children:(r||[]).map(A=>{const B=A.toISOString().split("T")[0],U=A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return s.jsx("option",{value:B,children:U},B)})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The selected date will be used for the pending attendance action (the one that triggered this modal)."})]}),s.jsx("div",{className:"space-y-3",children:r.map(A=>{const B=A.toISOString().split("T")[0],U=A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),G=g&&h[B]===null;return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${G?"bg-red-50 dark:bg-red-900/10 border border-red-300 dark:border-red-700":"bg-gray-50 dark:bg-gray-700"}`,children:[s.jsxs("span",{className:`text-sm font-medium ${G?"text-red-800 dark:text-red-200":"text-gray-700 dark:text-gray-300"}`,children:[U," ",G&&"(Required)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>re(B,!0),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h[B]===!0?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900"}`,children:"Present"}),s.jsx("button",{onClick:()=>re(B,!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${h[B]===!1?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900"}`,children:"Absent"})]})]},B)})})]})]}),s.jsxs("div",{className:"sticky bottom-0 bg-gray-50/90 dark:bg-gray-900/90 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-end gap-3 z-10 rounded-b-3xl",children:[s.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors btn-press",disabled:x,children:"Cancel"}),s.jsx("button",{onClick:z,className:`px-6 py-2 rounded-lg font-medium transition-colors btn-press ${x?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-500 cursor-not-allowed":b?"bg-orange-600 hover:bg-orange-700 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,disabled:x,children:x?"Saving...":b?"Save (Override)":"Save"})]})]})})},L1=({selectedCount:e,onPresent:t,onAbsent:r,onCancel:n,onDelete:a,onSelectAll:o,onClearDays:i,sundayDates:l=[],selectedSundayDates:c=new Set,onToggleSunday:d,isLoading:u=!1,showSundaySelection:p=!1})=>e===0?null:s.jsxs("div",{className:"sticky top-0 sm:top-2 z-40 bg-green-50/95 dark:bg-green-900/95 border-2 border-green-400 dark:border-green-600 rounded-xl p-3 sm:p-4 mb-2 sm:mb-3 shadow-lg backdrop-blur max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-center gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 text-white flex items-center justify-center font-bold text-sm shadow-md",children:e}),s.jsxs("span",{className:"text-sm font-semibold text-green-900 dark:text-green-100 whitespace-nowrap",children:[e," selected"]})]}),s.jsx("div",{className:"hidden sm:block w-px h-8 bg-green-300 dark:bg-green-700"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[s.jsxs("button",{onClick:t,disabled:u,className:`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold shadow-md transition-all ${u?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 active:scale-95"} text-white`,children:[s.jsx(Ht,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{children:"Present"})]}),s.jsxs("button",{onClick:r,disabled:u,className:`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold shadow-md transition-all ${u?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 active:scale-95"} text-white`,children:[s.jsx(Ye,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{children:"Absent"})]}),a&&s.jsxs("button",{onClick:a,disabled:u,className:`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-semibold shadow-md transition-all ${u?"bg-red-300 cursor-not-allowed":"bg-red-700 hover:bg-red-800 active:scale-95"} text-white`,children:[s.jsx(os,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{children:"Delete"})]}),s.jsx("button",{onClick:n,className:"px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-xs sm:text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),u&&s.jsx("div",{className:"w-5 h-5 border-2 border-green-600 border-t-transparent rounded-full animate-spin dark:border-green-400"})]})]}),p&&l.length>0&&s.jsxs("div",{className:"pt-3 border-t border-green-300 dark:border-green-700 mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-2",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-900 dark:text-green-100",children:"Select Sundays:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[o&&s.jsx("button",{onClick:o,className:"px-2 py-1 text-xs rounded bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-700 whitespace-nowrap",children:"Select all"}),i&&s.jsx("button",{onClick:i,className:"px-2 py-1 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 whitespace-nowrap",children:"Clear days"})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto px-1 py-1 no-scrollbar mb-2",children:l.map(h=>{const y=c.has(h),x=new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsx("button",{onClick:()=>d&&d(h),className:`min-w-fit px-2 py-1 rounded text-xs font-medium transition-colors ${y?"bg-green-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:x},h)})})]})]}),z1=e=>{const[t,r]=k.useState(!1),[n,a]=k.useState(new Set),o=k.useRef(null),i=k.useRef(null),l=k.useRef(!1),c=(w,f,g)=>{t||(i.current={x:f,y:g},o.current=setTimeout(()=>{r(!0),a(m=>{const b=new Set(m);return b.add(w),e&&e(b),b}),navigator.vibrate&&navigator.vibrate(50)},1e3))};return{selectionMode:t,selectedIds:n,handleLongPressStart:(w,f)=>{f.preventDefault(),f.touches&&f.touches.length>0?c(w,f.touches[0].clientX,f.touches[0].clientY):(f.button===2||f.button===0&&f.ctrlKey)&&c(w,f.clientX,f.clientY)},handleLongPressMove:w=>{var _,j,N,E;if(!i.current||!o.current)return;const f=((j=(_=w.touches)==null?void 0:_[0])==null?void 0:j.clientX)??w.clientX??0,g=((E=(N=w.touches)==null?void 0:N[0])==null?void 0:E.clientY)??w.clientY??0,m=Math.abs(f-i.current.x),b=Math.abs(g-i.current.y);(m>10||b>10)&&(clearTimeout(o.current),o.current=null)},handleLongPressEnd:()=>{o.current&&(clearTimeout(o.current),o.current=null),i.current=null,l.current=!1},handleMouseDown:(w,f)=>{f.button===0&&(f.preventDefault(),l.current=!0,c(w,f.clientX,f.clientY))},handleMouseUp:()=>{l.current=!1,o.current&&(clearTimeout(o.current),o.current=null)},toggleSelection:w=>{t&&a(f=>{const g=new Set(f);return g.has(w)?(g.delete(w),g.size===0&&r(!1)):g.add(w),e&&e(g),g})},clearSelection:()=>{a(new Set),r(!1),e&&e(new Set)},setSelectedIds:a}},G0=e=>e.replace("_"," "),yc=e=>{if(!e)return null;if(typeof e=="string")return e;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},F1=({isAdmin:e=!1})=>{const{filteredMembers:t,loading:r,searchTerm:n,setSearchTerm:a,refreshSearch:o,forceRefreshMembers:i,forceRefreshMembersSilent:l,searchMemberAcrossAllTables:c,deleteMember:d,markAttendance:u,bulkAttendance:p,fetchAttendanceForDate:h,attendanceData:y,setAttendanceData:x,currentTable:v,members:w,calculateMemberBadge:f,toggleMemberBadge:g,memberHasBadge:m,updateMemberBadges:b,updateMember:_,selectedAttendanceDate:j,badgeFilter:N,toggleBadgeFilter:E,isSupabaseConfigured:$,dashboardTab:O,setDashboardTab:K,setAndSaveAttendanceDate:I,loadAllAttendanceData:ee,uiAction:le,validateMemberData:re,getPastSundays:W,getMissingAttendance:L}=Ct(),{isDarkMode:z}=vr(),[A,B]=k.useState(null),[U,G]=k.useState({}),[ye,_e]=k.useState({}),[Me,Oe]=k.useState(!1),[X,$e]=k.useState(!1),[De,Ue]=k.useState(20),[M,Y]=k.useState(!1);k.useState(!1),k.useState({});const[te,Se]=k.useState(null),[H,xe]=k.useState(null),[we,oe]=k.useState(null),[he,Ce]=k.useState(null),[je,Le]=k.useState(null),[qe,Ve]=k.useState(!1),ot=["SHS1","SHS2","SHS3","JHS1","JHS2","JHS3","COMPLETED","UNIVERSITY"],wr=["Choir","Ushers","Youth","Children","Media","Welfare","Protocol","Evangelism"],[kr,ue]=k.useState(()=>{const P=localStorage.getItem("customMinistries");return P?JSON.parse(P):wr});k.useEffect(()=>{const P=Q=>{ue(Q.detail)};return window.addEventListener("ministriesUpdated",P),()=>window.removeEventListener("ministriesUpdated",P)},[]),k.useRef(null),typeof window<"u"&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||window.navigator&&window.navigator.standalone);const[Re,ht]=k.useState(new Set),[Ge,it]=k.useState(new Set),[jr,ge]=k.useState(!1),[Be,$t]=k.useState(!1),[Tt,rr]=k.useState(null),[S,T]=k.useState({}),D=k.useRef(null),R=k.useRef(null),[C,V]=k.useState(!1),[ne,ae]=k.useState(null),[Ne,Te]=k.useState({isOpen:!1,title:"",message:"",onConfirm:null,confirmText:"Confirm",cancelText:"Cancel",confirmButtonClass:"bg-red-600 hover:bg-red-700 text-white",cancelButtonClass:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}),ce=k.useRef(null),[se,ze]=k.useState(new Set),Xe=k.useRef(null),[be,ie]=k.useState(!1),[lt,Lt]=k.useState(null),[zr,un]=k.useState([]),[Sy,Wu]=k.useState([]),[Ey,Tl]=k.useState(null),{selectionMode:Eo,selectedIds:Yr,handleLongPressStart:Cy,handleLongPressMove:qu,handleLongPressEnd:Ty,handleMouseDown:Ay,handleMouseUp:Vu,toggleSelection:Py,clearSelection:Gu}=z1(),[hs,Al]=k.useState(n);k.useEffect(()=>{Al(n)},[n]),k.useEffect(()=>{const P=setTimeout(()=>{hs!==n&&a(hs)},250);return()=>clearTimeout(P)},[hs]);const Ku=async P=>{if(Yr.size===0)return;const Q=j?new Date(j):new Date,J=Array.from(Yr);ge(!0);try{await p(J,Q,P),F.success(`Marked ${J.length} member${J.length!==1?"s":""} as ${P?"present":"absent"}!`),Gu()}catch(q){console.error("Bulk action error:",q),F.error("Failed to update attendance")}finally{ge(!1)}};k.useEffect(()=>{O==="edited"&&ht(new Set(Yr))},[Yr,O]);const Oy=(P,Q)=>{const J=re(P),q=W(),fe=L(P.id,q);return J.length>0||fe.length>0?(Lt(P),un(J),Wu(fe),Tl({memberId:P.id,present:Q}),ie(!0),!0):!1},My=(P,Q)=>{var J;R.current=P,D.current=((J=Q.touches[0])==null?void 0:J.clientX)||0,T(q=>({...q,[P]:0}))},Dy=(P,Q)=>{var fe;if(R.current!==P)return;const q=(((fe=Q.touches[0])==null?void 0:fe.clientX)||0)-(D.current||0);if(q<0){const me=Math.min(-q,96);T(Ie=>({...Ie,[P]:me}))}else T(me=>({...me,[P]:0}))},Ry=P=>{(S[P]||0)>48?rr(P):rr(null),T(J=>({...J,[P]:0})),R.current=null,D.current=null},Gt=(P=>{if(!P)return[];try{const[Q,J]=P.split("_"),q=parseInt(J),fe=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(Q);if(fe===-1)return[];const me=[],Ie=new Date(q,fe,1);for(;Ie.getDay()!==0;)Ie.setDate(Ie.getDate()+1);for(;Ie.getMonth()===fe;){const ve=Ie.getFullYear(),At=String(Ie.getMonth()+1).padStart(2,"0"),Nt=String(Ie.getDate()).padStart(2,"0");me.push(`${ve}-${At}-${Nt}`),Ie.setDate(Ie.getDate()+7)}return me}catch(Q){return console.error("Error generating Sunday dates:",Q),[]}})(v),Iy=Ge&&Ge.size>0?Ge:new Set(Gt),Pl=P=>{for(const J in P){const q=J.toLowerCase(),fe=J.startsWith("Attendance "),me=/^attendance_\d{4}_\d{2}_\d{2}$/.test(q);if(fe||me){const Ie=P[J];if(Ie==="Present"||Ie==="Absent"||Ie===!0||Ie===!1)return!0}}return Gt.some(J=>{const fe=(y[J]||{})[P.id];return fe===!0||fe===!1})},Yu=()=>{let Q=Gy();if(H&&(Q=Q.filter(J=>(J.Gender||J.gender||"").toString().toLowerCase()===H.toLowerCase())),we&&(Q=Q.filter(J=>(J["Current Level"]||"").toString().toUpperCase()===we.toUpperCase())),he&&(Q=Q.filter(J=>{const q=J.ministry||[];return Array.isArray(q)&&q.includes(he)})),je!==null&&(Q=Q.filter(J=>je?J.is_visitor===!0:J.is_visitor!==!0)),n&&n.trim())return Q;if(O==="edited"){const J=te||(j?j.toISOString().split("T")[0]:null);if(!J)return Q.filter(Ie=>Pl(Ie)).sort((Ie,ve)=>{const At=(Ie.full_name||Ie["Full Name"]||"").toLowerCase(),Nt=(ve.full_name||ve["Full Name"]||"").toLowerCase();return At.localeCompare(Nt)});const q=y[J]||{};return Q.filter(me=>q[me.id]===!0||q[me.id]===!1).sort((me,Ie)=>{const ve=q[me.id],At=q[Ie.id],Nt=ha=>ha===!0?0:ha===!1?1:2,Jr=Nt(ve)-Nt(At);if(Jr!==0)return Jr;const ua=(me.full_name||me["Full Name"]||"").toLowerCase(),Nr=(Ie.full_name||Ie["Full Name"]||"").toLowerCase();return ua.localeCompare(Nr)})}if(O==="duplicates"){const J=new Set;return Co.forEach(q=>{q.members.forEach(fe=>J.add(fe.id))}),Q.filter(q=>J.has(q.id))}return Q};k.useMemo(()=>{const P=O==="edited"?w.filter(Pl):w;let Q=0,J=0;return Iy.forEach(q=>{const fe=y[q]||{};for(const me of P){const Ie=fe[me.id];Ie===!0?Q+=1:Ie===!1&&(J+=1)}}),{presentCount:Q,absentCount:J}},[y,Ge,v,O,w]);const $y=P=>P?P.toString().toLowerCase().trim().replace(/\s+/g," "):"",Co=k.useMemo(()=>{const P={};return w.forEach(Q=>{const J=$y(Q["Full Name"]||Q.full_name);J&&(P[J]||(P[J]=[]),P[J].push(Q))}),Object.entries(P).filter(([,Q])=>Q.length>1).map(([Q,J])=>({name:Q,members:J}))},[w]),Ol=k.useMemo(()=>{const P={};return Gt.forEach(Q=>{const J=y[Q]||{};Object.entries(J).forEach(([q,fe])=>{fe===!0&&(P[q]=(P[q]||0)+1)})}),P},[y,Gt]),Ly=P=>{var q;let Q=null,J=-1;return P.forEach(fe=>{const me=Ol[fe.id]||0;me>=3&&me>J&&(Q=fe.id,J=me)}),Q!==null?Q:(P.forEach(fe=>{const me=Ol[fe.id]||0;me>J&&(Q=fe.id,J=me)}),Q||((q=P[0])==null?void 0:q.id))},Ju=P=>{Te({...P,isOpen:!0})},zy=P=>{ze(Q=>{const J=new Set(Q);return J.has(P)?J.delete(P):J.add(P),J})},Fy=async()=>{se.size!==0&&Ju({title:"Delete Duplicate Members",message:`Delete ${se.size} selected duplicate member${se.size!==1?"s":""}? This cannot be undone.`,confirmText:"Delete",onConfirm:async()=>{try{for(const P of Array.from(se))await d(P);ze(new Set),F.success(`Deleted ${se.size} duplicate member${se.size!==1?"s":""}.`)}catch(P){console.error("Bulk delete failed:",P),F.error("Failed to delete selected duplicates. Please try again.")}}})};k.useMemo(()=>{const P=w.filter(Pl),Q={};for(const J of Gt){const q=y[J];let fe=0,me=0;if(q)for(const Ie of P){const ve=q[Ie.id];ve===!0?fe+=1:ve===!1&&(me+=1)}else fe=P.length,me=0;Q[J]={present:fe,absent:me}}return Q},[y,w,Gt]),k.useEffect(()=>{const P=yc(j);P&&Xe.current!==`${v}_${P}`&&(Xe.current=`${v}_${P}`,h(new Date(P)).then(Q=>{x(J=>({...J,[P]:Q}))}))},[v,j,h,x]),k.useEffect(()=>{O==="edited"&&ee()},[O]),k.useEffect(()=>{(async()=>{if(te&&!y[te]){const Q=await h(new Date(te));x(J=>({...J,[te]:Q}))}})()},[te,y,h,x]),k.useEffect(()=>{if(le&&le.type==="focusDateSelector"&&ce.current)try{ce.current.scrollIntoView({behavior:"smooth",block:"start"})}catch{}},[le]),k.useEffect(()=>{if(Gt.length===0)return;let P=!1;return(async()=>{for(const J of Gt){const q=await h(new Date(J));if(P)return;x(fe=>({...fe,[J]:{...fe[J]||{},...q}}))}})(),()=>{P=!0}},[v]),k.useEffect(()=>{Se(null)},[v]),k.useEffect(()=>{if(j){const P=j.toISOString().split("T")[0];Se(P)}},[j]),k.useEffect(()=>{ht(new Set),it(new Set)},[v]),k.useEffect(()=>{O!=="edited"&&(ht(new Set),it(new Set))},[O]),k.useEffect(()=>{n||Ue(20)},[n]);const Qu=(P,Q)=>{P&&(P.stopPropagation(),P.preventDefault()),ae(Q),V(!0)},Uy=async()=>{if(ne)try{await d(ne.id);const P=ne.full_name||ne["Full Name"];rr(null),V(!1),ae(null),F.success(`Your ${P} has been deleted.`)}catch(P){console.error("Error deleting member:",P),V(!1)}},Xu=async(P,Q)=>{var fe;const J=w.find(me=>me.id===P);if(J&&Oy(J,Q))return;const q=yc(j);if(!q){F.error("Please select an attendance date first.");return}G(me=>({...me,[P]:!0}));try{const me=J?J.full_name||J["Full Name"]:"Member",Ie=(fe=y[q])==null?void 0:fe[P],ve=j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"";Ie===Q?(await u(P,new Date(q),null),F.success(`Attendance cleared for: ${me}`,{style:{background:"#f3f4f6",color:"#374151"}})):(await u(P,new Date(q),Q),F.success(`Marked ${Q?"present":"absent"} for ${ve}: ${me}`,{style:{background:Q?"#10b981":"#ef4444",color:"#ffffff"}}))}catch(me){console.error("Error marking attendance:",me),F.error("Failed to update attendance. Please try again.")}finally{G(me=>({...me,[P]:!1}))}},Zu=async(P,Q,J)=>{var fe;const q=`${P}_${J}`;G(me=>({...me,[q]:!0}));try{((fe=y[J])==null?void 0:fe[P])===Q?(await u(P,new Date(J),null),F.success(`Attendance cleared for ${new Date(J).toLocaleDateString()}`)):(await u(P,new Date(J),Q),F.success(`Marked as ${Q?"present":"absent"} for ${new Date(J).toLocaleDateString()}`))}catch(me){console.error("Error marking attendance:",me),F.error("Failed to update attendance. Please try again.")}finally{G(me=>({...me,[q]:!1}))}},By=P=>{_e(Q=>({...Q,[P]:!Q[P]}))},Hy=P=>{it(Q=>{const J=new Set(Q);return J.has(P)?J.delete(P):J.add(P),J})},Wy=()=>{it(new Set(Gt))},qy=()=>it(new Set),Vy=async()=>{const P=Array.from(Re);P.length!==0&&Ju({title:"Delete Members",message:`Delete ${P.length} selected member${P.length!==1?"s":""}? This cannot be undone.`,confirmText:"Delete",onConfirm:async()=>{$t(!0);try{for(const Q of P)await d(Q);ht(new Set),F.success(`Deleted ${P.length} member${P.length!==1?"s":""}.`)}catch(Q){console.error("Bulk delete failed:",Q),F.error("Failed to delete selected members. Please try again.")}finally{$t(!1)}}})},Gy=()=>n.trim()||N.length===0?t:t.filter(P=>N.some(Q=>m(P,Q)||f(P)===Q));return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-2 pb-12 max-w-7xl mx-auto px-3 sm:px-4",children:[O==="edited"&&s.jsxs("div",{ref:ce,className:"hidden sm:block mt-8 sm:mt-10 bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 p-3 sm:p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(dt,{className:"w-4 h-4 text-primary-600"}),G0(v)," Sundays"]}),te&&s.jsx("button",{onClick:()=>Se(null),className:"text-xs sm:text-sm px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",title:"Clear date selection",children:"Clear"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[Gt.length===0&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No Sundays found for this month"}),Gt.map(P=>{const Q=te===P,q=new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fe=y[P],me=fe?w.filter(ve=>fe[ve.id]===!0).length:0,Ie=fe?w.filter(ve=>fe[ve.id]===!1).length:0;return s.jsxs("button",{onClick:async()=>{if(Se(P),!y[P]){const ve=await h(new Date(P));x(At=>({...At,[P]:ve}))}},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 border ${Q?"bg-slate-700 dark:bg-slate-600 text-white border-slate-800 shadow-lg":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 shadow-sm"}`,title:`${q}: ${me} present, ${Ie} absent`,children:[s.jsx("span",{className:"font-medium",children:q}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded font-semibold ${Q?"bg-green-400/30 text-green-100":"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400"}`,children:me}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded font-semibold ${Q?"bg-red-400/30 text-red-100":"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400"}`,children:Ie})]})]},P)})]}),te&&s.jsx("div",{className:"mt-2",children:(()=>{const Q=new Date(te).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric"}),J=y[te]||{},q=w.filter(me=>J[me.id]===!0).length,fe=w.filter(me=>J[me.id]===!1).length;return s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Q}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[q," Present"]})]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:[fe," Absent"]})]})]})]})})})()})]}),O==="duplicates"&&s.jsxs("div",{className:`rounded-lg border p-4 mt-8 sm:mt-10 ${z?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsx("h3",{className:`text-lg font-semibold ${z?"text-white":"text-gray-900"}`,children:"Duplicate Names"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:`text-sm ${z?"text-gray-300":"text-gray-700"}`,children:[Co.length," names with duplicates"]}),s.jsx("button",{onClick:Fy,disabled:se.size===0,className:`px-3 py-1 rounded text-sm ${se.size===0?"bg-gray-300 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,children:"Delete Selected"})]}),Co.length===0&&s.jsx("div",{className:`text-sm ${z?"text-gray-300":"text-gray-700"}`,children:"No duplicate names found"}),Co.map(P=>{const Q=Ly(P.members),J=P.members.find(fe=>fe.id===Q),q=J?J["Full Name"]||J.full_name:"Unknown";return s.jsxs("div",{className:`rounded-lg border p-3 ${z?"border-gray-700":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4 text-primary-600"}),s.jsx("span",{className:`font-semibold ${z?"text-white":"text-gray-900"}`,children:P.members[0]["Full Name"]||P.members[0].full_name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 border border-green-300 dark:border-green-700",children:["Keep: ",q]}),s.jsx("button",{onClick:async()=>{const fe=P.members.map(me=>me.id).filter(me=>me!==Q);for(const me of fe)await d(me)},className:"px-2 py-1 rounded text-xs bg-red-600 text-white hover:bg-red-700",children:"Delete Others"})]})]}),s.jsx("div",{className:"space-y-2",children:P.members.map(fe=>{const me=Ol[fe.id]||0,Ie=se.has(fe.id),ve=fe.id===Q;return s.jsxs("div",{className:`flex items-center justify-between pl-4 pr-3 py-2 sm:px-3 sm:py-2 rounded border-2 ${ve?"bg-green-50 dark:bg-green-900/30 border-green-300 dark:border-green-700":z?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>zy(fe.id),className:`w-5 h-5 rounded-full border flex items-center justify-center ${Ie?"bg-primary-600 border-primary-600":z?"border-gray-500":"border-gray-400"}`,title:Ie?"Unselect":"Select",children:Ie&&s.jsx(Ht,{className:"w-3 h-3 text-white"})}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-sm font-medium ${ve?"text-green-800 dark:text-green-300":z?"text-white":"text-gray-900"}`,children:[fe["Full Name"]||fe.full_name,ve&&s.jsx("span",{className:"ml-2 text-xs bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-300 px-2 py-0.5 rounded-full",children:"Keep"})]}),s.jsxs("div",{className:`text-xs ${ve?"text-green-600 dark:text-green-400":z?"text-gray-300":"text-gray-600"}`,children:["Attendance: ",me]})]})]}),s.jsx("button",{onClick:()=>d(fe.id),className:`px-2 py-1 rounded text-xs border ${ve?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 border-gray-300 dark:border-gray-600 cursor-not-allowed opacity-50":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800 border-red-300 dark:border-red-700"}`,disabled:ve,title:ve?"This member is recommended to keep":"Delete this member",children:"Delete"})]},fe.id)})})]},P.name)})]})]}),Yr.size>0&&s.jsx("div",{className:"mt-8 sm:mt-10 mb-4",children:s.jsx(L1,{selectedCount:Yr.size,onPresent:()=>Ku(!0),onAbsent:()=>Ku(!1),onCancel:Gu,onDelete:Vy,onSelectAll:Wy,onClearDays:qy,sundayDates:Gt,selectedSundayDates:Ge,onToggleSunday:Hy,isLoading:jr||Be,showSundaySelection:O==="edited"&&Yr.size>0})}),s.jsx("div",{className:`${Yr.size>0?"":"mt-8 sm:mt-10"} grid grid-cols-1 lg:grid-cols-3 gap-3`,children:(()=>{let P=Yu();if(O==="edited"&&te){const q=y[te]||{};P=P.filter(fe=>q[fe.id]===!0||q[fe.id]===!1)}const Q=n?P:P.slice(0,De),J=!n&&P.length>De;return s.jsxs(s.Fragment,{children:[Q.map(q=>{var Ie;const fe=ye[q.id],me=Yr.has(q.id);return s.jsxs("div",{className:"relative",children:[me&&s.jsx("div",{className:"selection-checkmark",children:s.jsx(Ht,{className:"w-3 h-3 text-white"})}),s.jsx("div",{className:"absolute inset-y-0 right-0 w-12 md:hidden flex items-center justify-center space-x-1 rounded-xl",style:{display:Eo?"none":void 0},children:s.jsx("button",{type:"button",onTouchStart:ve=>{ve.stopPropagation()},onClick:ve=>{ve.stopPropagation(),Qu(ve,q)},className:"text-white flex items-center justify-center w-12 h-12 rounded-xl bg-red-600 dark:bg-red-700 hover:bg-red-700 shadow-lg",title:"Delete",children:s.jsx(os,{className:"w-5 h-5"})})}),s.jsxs("div",{className:`relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-primary-300 dark:hover:border-primary-600 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden ${me?"selection-highlight":""}`,style:{transform:Tt===q.id?"translateX(-64px)":"translateX(0)",touchAction:"pan-y",userSelect:"none"},onTouchStart:ve=>{Eo||(Cy(q.id,ve),My(q.id,ve))},onTouchMove:ve=>{qu(ve),Dy(q.id,ve)},onTouchEnd:()=>{Ty(),Ry(q.id)},onMouseDown:ve=>{Eo||Ay(q.id,ve)},onMouseMove:ve=>{qu(ve)},onMouseUp:()=>{Vu()},onMouseLeave:()=>{Vu()},onContextMenu:ve=>{ve.preventDefault()},onClick:()=>{Eo&&Py(q.id)},children:[s.jsx("div",{className:"absolute top-0 right-0 bottom-0 w-1 bg-red-600 dark:bg-red-700 md:hidden rounded-r-xl"}),s.jsxs("div",{className:"px-3 py-3 sm:px-4 sm:py-3.5",children:[s.jsxs("button",{type:"button",onClick:()=>By(q.id),className:"w-full flex items-center gap-2 mb-2 text-left hover:bg-primary-50 dark:hover:bg-primary-900/40 rounded px-1 py-1 transition-colors",children:[s.jsx("div",{className:"p-1 text-gray-500 dark:text-gray-400 rounded flex-shrink-0 flex items-center justify-center",children:fe?s.jsx(tr,{className:"w-5 h-5"}):s.jsx(io,{className:"w-5 h-5"})}),O==="edited"&&me&&s.jsx("div",{className:"w-5 h-5 rounded-full bg-green-600 flex items-center justify-center flex-shrink-0",children:s.jsx(Ht,{className:"w-3 h-3 text-white"})}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base sm:text-lg truncate flex-1",children:q.full_name||q["Full Name"]}),s.jsx("span",{className:"hidden xs:inline text-[11px] text-gray-500 dark:text-gray-400 flex-shrink-0 ml-1",children:fe?"Hide details":"Details"})]}),s.jsxs("div",{className:"flex items-stretch gap-2 ml-0 w-full",children:[s.jsx("div",{className:"flex flex-row items-stretch gap-2 w-full",children:(()=>{const ve=yc(j),At=ve&&y[ve]?y[ve][q.id]:void 0,Nt=At===!0,Jr=At===!1;return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Xu(q.id,!0),disabled:U[q.id],className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 whitespace-nowrap sm:text-sm md:text-sm ${Nt?"bg-green-600 dark:bg-green-700 text-white shadow ring-1 ring-green-300 dark:ring-green-500":U[q.id]?"bg-gray-200 dark:bg-gray-600 text-gray-400 cursor-not-allowed":"bg-green-600 dark:bg-green-700 text-white shadow-sm"}`,title:Nt?"Click to clear":"Mark present",children:U[q.id]?"...":"Present"}),s.jsx("button",{onClick:()=>Xu(q.id,!1),disabled:U[q.id],className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 whitespace-nowrap sm:text-sm md:text-sm ${Jr?"bg-red-600 dark:bg-red-700 text-white shadow ring-1 ring-red-300 dark:ring-red-500":U[q.id]?"bg-gray-200 dark:bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 dark:bg-red-700 text-white shadow-sm"}`,title:Jr?"Click to clear":"Mark absent",children:U[q.id]?"...":"Absent"})]})})()}),s.jsx("button",{type:"button",onClick:ve=>{ve.stopPropagation(),Qu(ve,q)},disabled:U[q.id],className:"hidden md:inline-flex flex-1 items-center justify-center px-3 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 hover:border-red-200 dark:hover:border-red-800 text-sm font-medium whitespace-nowrap transition-colors",title:"Delete member",children:"Delete"})]})]}),fe&&s.jsx("div",{className:"px-2 sm:px-3 pb-2 sm:pb-3 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"pt-2 sm:pt-2.5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Member Info"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-700/50 last:border-0",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Gender"}),s.jsx("span",{className:"font-medium capitalize text-gray-900 dark:text-white truncate ml-2",children:q.Gender})]}),s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-700/50 last:border-0",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Phone"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate ml-2 font-mono tracking-tight",children:q["Phone Number"]||"N/A"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-700/50 last:border-0",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Age"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate ml-2",children:q.Age||"N/A"})]}),s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-700/50 last:border-0",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Level"}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 capitalize ml-2",children:((Ie=q["Current Level"])==null?void 0:Ie.toLowerCase())||"N/A"})]}),q.is_visitor&&s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-700/50",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status"}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:"Visitor"})]})]}),q.ministry&&q.ministry.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Ministry"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:q.ministry.map(ve=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300",children:ve},ve))})]}),(q.parent_name_1||q.parent_name_2)&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Guardians"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[q.parent_name_1&&s.jsxs("div",{className:"flex justify-between items-start py-1",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:"Primary"}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"block font-medium text-gray-900 dark:text-white",children:q.parent_name_1}),q.parent_phone_1&&s.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 font-mono tracking-tight",children:q.parent_phone_1})]})]}),q.parent_name_2&&s.jsxs("div",{className:"flex justify-between items-start py-1",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:"Secondary"}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"block font-medium text-gray-900 dark:text-white",children:q.parent_name_2}),q.parent_phone_2&&s.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400 font-mono tracking-tight",children:q.parent_phone_2})]})]})]})]})]}),s.jsxs("div",{className:"space-y-3 border-t md:border-t-0 md:border-l border-gray-200 dark:border-gray-700 pt-3 md:pt-0 md:pl-4",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Actions"}),s.jsx("div",{className:"flex flex-col gap-2",children:s.jsxs("button",{onClick:()=>B(q),className:"w-full flex items-center justify-center space-x-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(Wm,{className:"w-4 h-4"}),s.jsx("span",{children:"Edit Details"})]})}),q.notes&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-1",children:[s.jsx(Au,{className:"w-3 h-3"}),"Note"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/50 rounded-lg p-2 italic",children:q.notes})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 transition-colors",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 transition-colors",children:[G0(v)," Sunday Attendance"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:Gt.map(ve=>{const At=ve,Nt=y[At]||{},Jr=Nt[q.id]===!0,ua=Nt[q.id]===!1,Nr=U[`${q.id}_${At}`];return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 transition-colors",children:[s.jsx("div",{className:"text-center mb-2",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors",children:new Date(ve).toLocaleDateString("en-US",{month:"short",day:"numeric"})})}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>Zu(q.id,!0,ve),disabled:Nr,className:`flex-1 px-2 py-1 rounded text-xs font-bold transition-all duration-200 ${Jr?"bg-green-800 dark:bg-green-700 text-white shadow-lg ring-2 ring-green-300 dark:ring-green-400 border border-green-900 dark:border-green-300 font-extrabold":Nr?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800"}`,children:Nr?"...":"P"}),s.jsx("button",{onClick:()=>Zu(q.id,!1,ve),disabled:Nr,className:`flex-1 px-2 py-1 rounded text-xs font-bold transition-all duration-200 ${ua?"bg-red-800 dark:bg-red-700 text-white shadow-lg ring-2 ring-red-300 dark:ring-red-400 border border-red-900 dark:border-red-300 font-extrabold":Nr?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800"}`,children:Nr?"...":"A"})]})]},ve)})})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 mt-4",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-1",children:[s.jsx(Lv,{className:"w-3 h-3"}),"Attendance Summary"]}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{let ve=0,At=0,Nt=0;Gt.forEach(ua=>{var ha;const Nr=(ha=y[ua])==null?void 0:ha[q.id];Nr===!0?(ve++,Nt++):Nr===!1&&(At++,Nt++)});const Jr=Nt>0?Math.round(ve/Nt*100):0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:ve}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Present"})]}),s.jsxs("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:At}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Absent"})]}),s.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[s.jsxs("div",{className:"text-lg font-bold text-primary-600 dark:text-primary-400",children:[Jr,"%"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rate"})]})]})})()})]})]})})]})]},q.id)}),(J||!n&&P.length>0)&&s.jsxs("div",{className:"lg:col-span-3 mt-4 mb-4 flex flex-col items-center justify-center space-y-2",children:[J&&s.jsx("button",{onClick:async()=>{Y(!0),await new Promise(q=>setTimeout(q,300)),Ue(q=>q+20),Y(!1)},disabled:M,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:M?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Loading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"w-4 h-4"}),s.jsxs("span",{children:["Load More (",Math.max(P.length-De,0)," remaining)"]})]})}),!n&&P.length>0&&s.jsxs("div",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 text-center",children:["Showing ",Math.min(De,P.length)," of ",P.length," members"]})]})]})})()}),(O==="edited"&&Yu().length===0||O!=="edited"&&t.length===0)&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ft,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No members found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:O==="edited"?"No edited members yet. Mark Present or Absent to see them here.":n?"Try adjusting your search terms":"Get started by adding your first member"}),n&&w.length>0&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 max-w-md mx-auto text-left",children:[s.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:" Debug Info"}),s.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Search term:"}),' "',n,'"']}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total members:"})," ",w.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Filtered results:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Current table:"})," ",v]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Supabase status:"})," ",$()?"Connected":"Not configured (showing mock data)"]})]}),s.jsxs("button",{onClick:()=>c(n),className:"mt-2 w-full bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm font-medium transition-colors duration-200 flex items-center justify-center gap-2",disabled:!n.trim(),children:[s.jsx(co,{className:"w-4 h-4"}),"Search All Tables"]}),!$()&&s.jsxs("div",{className:"mt-3 text-xs text-yellow-700 dark:text-yellow-300",children:["Tip: Configure ",s.jsx("code",{children:"VITE_SUPABASE_URL"})," and ",s.jsx("code",{children:"VITE_SUPABASE_ANON_KEY"})," to search real data."]})]})]}),A&&s.jsx(R1,{isOpen:!!A,onClose:()=>B(null),member:A}),s.jsx(ny,{isOpen:Me,onClose:()=>Oe(!1)}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md mx-4 overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-300",children:"Confirm Deletion"})]}),s.jsx("button",{onClick:()=>{V(!1),ae(null)},className:"p-2 hover:bg-red-100 dark:hover:bg-red-800 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})]}),s.jsx("div",{className:"px-6 py-6 text-center",children:s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Are you sure you want to delete this member?"}),s.jsx("p",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-3",children:(ne==null?void 0:ne.full_name)||(ne==null?void 0:ne["Full Name"])}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-300 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("span",{children:[s.jsx("strong",{children:"This action cannot be undone."})," The member will be permanently removed from the system."]})]})})]})}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex gap-3",children:[s.jsx("button",{onClick:()=>{V(!1),ae(null)},className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),s.jsx("button",{onClick:Uy,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg hover:shadow-xl",children:"Delete Member"})]})]})}),s.jsx(sy,{isOpen:X,onClose:()=>$e(!1)}),s.jsx(I1,{isOpen:Ne.isOpen,onClose:()=>Te(P=>({...P,isOpen:!1})),onConfirm:Ne.onConfirm,title:Ne.title,message:Ne.message,confirmText:Ne.confirmText,cancelText:Ne.cancelText,confirmButtonClass:Ne.confirmButtonClass,cancelButtonClass:Ne.cancelButtonClass}),be&&lt&&s.jsx($1,{member:lt,missingFields:zr,missingDates:Sy,pendingAttendanceAction:Ey,selectedAttendanceDate:j?new Date(j):new Date,onClose:()=>{ie(!1),Lt(null),un([]),Wu([]),Tl(null)},onSave:async()=>{Tl(null)}}),qe&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Ve(!1)}),s.jsxs("div",{className:"relative w-full md:w-[480px] md:max-w-[90vw] bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl max-h-[80vh] overflow-hidden animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(lo,{className:"w-5 h-5 text-primary-500"}),"Filter Members"]}),s.jsx("button",{onClick:()=>Ve(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx(Ye,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"px-5 py-4 space-y-5 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gender"}),s.jsx("div",{className:"flex gap-2",children:["Male","Female"].map(P=>s.jsx("button",{onClick:()=>xe(H===P?null:P),className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${H===P?"bg-primary-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:P},P))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Education Level"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:ot.map(P=>s.jsx("button",{onClick:()=>oe(we===P?null:P),className:`px-3 py-2 rounded-lg text-xs font-medium transition-all ${we===P?"bg-primary-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:P},P))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ministry/Group"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:kr.map(P=>s.jsx("button",{onClick:()=>Ce(he===P?null:P),className:`px-3 py-2 rounded-full text-xs font-medium transition-all ${he===P?"bg-primary-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:P},P))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Status"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Le(je===!1?null:!1),className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${je===!1?"bg-primary-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Members Only"}),s.jsx("button",{onClick:()=>Le(je===!0?null:!0),className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${je===!0?"bg-amber-500 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Visitors Only"})]})]})]}),s.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex gap-3",children:[s.jsx("button",{onClick:()=>{xe(null),oe(null),Ce(null),Le(null)},disabled:!H&&!we&&!he&&je===null,className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Clear All"}),s.jsx("button",{onClick:()=>Ve(!1),className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 shadow-md transition-colors",children:"Apply Filters"})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 safe-area-bottom",children:s.jsx("div",{className:"mx-auto px-3 sm:px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search members...",value:hs,onChange:P=>Al(P.target.value),onKeyDown:P=>{P.key==="Enter"&&(a(hs),o())},className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors"}),(n||hs)&&s.jsx("button",{onClick:()=>{a(""),Al("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",title:"Clear search",children:""})]}),s.jsxs("button",{onClick:()=>Ve(!qe),className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-colors ${qe||H||we||he||je!==null?"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 border border-primary-300 dark:border-primary-700":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:"Filters",children:[s.jsx(lo,{className:"w-4 h-4"}),(H||we||he||je!==null)&&s.jsx("span",{className:"w-2 h-2 bg-primary-500 rounded-full"})]}),s.jsxs("button",{onClick:()=>Oe(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors shadow-sm",title:"Add New Member",children:[s.jsx(ho,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden md:inline text-sm font-medium",children:"Add Member"})]})]})})}),s.jsx("div",{className:"h-12"})]})},U1=()=>{const{supabase:e,isSupabaseConfigured:t,members:r,currentTable:n,attendanceData:a,calculateAttendanceRate:o,calculateMemberBadge:i,updateMemberBadges:l,toggleMemberBadge:c,availableSundayDates:d,isMonthAttendanceComplete:u,updateMember:p}=Ct(),{isDarkMode:h}=vr(),y=M=>{var te;const Y=Object.keys(a).sort().reverse();for(const Se of Y){const H=(te=a[Se])==null?void 0:te[M.id];if(H!==void 0)return H}return null},x=M=>({member:"Member",regular:"Regular Attendee",newcomer:"Newcomer"})[M]||M,[v,w]=k.useState({regularAttendees:[],attendanceStats:[],monthlyTrends:[],newcomers:[],membersByBadge:{},attendanceByLevel:{},newMemberTrends:[]}),[f,g]=k.useState({monthsBack:6,minAttendanceRate:75,newcomerMonths:3}),[m,b]=k.useState([]),[_,j]=k.useState(!1),[N,E]=k.useState("badges"),[$,O]=k.useState(null),[K,I]=k.useState(!1),[ee,le]=k.useState(!0),[re,W]=k.useState({lowAttendance:[],longAbsent:[],newcomersNeedingFollowup:[]}),[L,z]=k.useState(null),[A,B]=k.useState(!1),[U,G]=k.useState(!1),ye=()=>{j(!0);try{l();const M={},Y={},te=[],Se=[];r.forEach(oe=>{const he=i(oe),Ce=o(oe),je=oe["Current Level"]||"Unknown",Le=new Date(oe["Join Date"]||oe.inserted_at),qe=Math.floor((Date.now()-Le)/(1e3*60*60*24));M[he]||(M[he]=[]),M[he].push({...oe,attendanceRate:Ce,badgeType:he,daysSinceJoin:qe}),Y[je]||(Y[je]={total:0,totalAttendance:0,members:[]}),Y[je].total++,Y[je].totalAttendance+=Ce,Y[je].members.push(oe),Ce>=f.minAttendanceRate&&te.push({member_id:oe.id,member_name:oe.full_name||oe["Full Name"],attendance_rate:Ce,total_attended:Math.round(Ce/100*4),total_possible:4,last_attendance:new Date().toISOString(),badge_type:he}),qe<=f.newcomerMonths*30&&Se.push({member_id:oe.id,member_name:oe.full_name||oe["Full Name"],join_date:Le.toISOString(),attendance_rate:Ce,days_since_join:qe,badge_type:he})}),Object.keys(Y).forEach(oe=>{Y[oe].averageAttendance=Y[oe].total>0?Math.round(Y[oe].totalAttendance/Y[oe].total):0}),te.sort((oe,he)=>he.attendance_rate-oe.attendance_rate),Se.sort((oe,he)=>new Date(he.join_date)-new Date(oe.join_date));const H=[],xe=[],we=[];r.forEach(oe=>{const he=o(oe),Ce=new Date(oe["Join Date"]||oe.inserted_at),je=Math.floor((Date.now()-Ce)/(1e3*60*60*24)),Le=oe["Phone Number"]||oe.phone||"No phone number";he<50&&he>0&&H.push({id:oe.id,name:oe.full_name||oe["Full Name"],phone:Le,attendanceRate:he,lastAttendance:"Recent",reason:"Low attendance rate"}),he===0&&je>30&&xe.push({id:oe.id,name:oe.full_name||oe["Full Name"],phone:Le,daysSinceJoin:je,reason:"No recent attendance"}),je<=60&&he<75&&we.push({id:oe.id,name:oe.full_name||oe["Full Name"],phone:Le,attendanceRate:he,daysSinceJoin:je,reason:"New member with low attendance"})}),W({lowAttendance:H,longAbsent:xe,newcomersNeedingFollowup:we}),w({regularAttendees:te,attendanceStats:Object.entries(Y).map(([oe,he])=>({level:oe,total_members:he.total,average_attendance:he.averageAttendance})),monthlyTrends:[],newcomers:Se,membersByBadge:M,attendanceByLevel:Y,newMemberTrends:[]})}catch(M){console.error("Error calculating analytics:",M)}finally{j(!1)}},_e=async()=>{var M;B(!0),z(null);try{console.log("Starting badge processing..."),console.log("Available Sunday dates:",d),console.log("Attendance data:",a),console.log("Members count:",r.length);const Y=u();if(console.log("Is month complete?",Y),!Y){F.error("Month is not complete yet. All Sundays must have attendance data."),B(!1);return}const te={qualified:[],notQualified:[],totalProcessed:0};for(const Se of r){te.totalProcessed++;const H=[...d].sort((Ce,je)=>Ce-je);let xe=0,we=!1;for(const Ce of H){const je=Ce.toISOString().split("T")[0],Le=(M=a[je])==null?void 0:M[Se.id];if(Le===!0){if(xe++,xe>=3){we=!0;break}}else xe=0}const oe=H.map(Ce=>{var qe;const je=Ce.toISOString().split("T")[0],Le=(qe=a[je])==null?void 0:qe[Se.id];return{date:Ce.toLocaleDateString("en-US",{month:"short",day:"numeric"}),status:Le===!0?"Present":Le===!1?"Absent":"Not Marked"}}),he={id:Se.id,name:Se.full_name||Se["Full Name"],phone:Se["Phone Number"]||Se.phone_number||"No phone",currentBadge:Se["Badge Type"]||"newcomer",sundayAttendance:oe};we?(Se["Badge Type"]!=="regular"&&Se["Badge Type"]!=="vip"?(await p(Se.id,{"Badge Type":"regular"}),he.badgeAssigned=!0):(he.badgeAssigned=!1,he.reason="Already has regular or vip badge"),te.qualified.push(he)):(he.reason="Did not attend 3 consecutive Sundays",te.notQualified.push(he))}z(te),G(!0),F.success(`Badge processing complete! ${te.qualified.filter(Se=>Se.badgeAssigned).length} badges assigned.`)}catch(Y){console.error("Error processing badges:",Y),console.error("Error details:",Y.message,Y.stack),F.error(`Failed to process badges: ${Y.message||Y.toString()}`)}finally{B(!1)}};k.useEffect(()=>{r.length>0&&ye()},[r,f]);const Me=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:`text-xl font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:"Member Badges & Categories"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.length," total members"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(v.membersByBadge).map(([M,Y])=>s.jsx("div",{className:`rounded-lg border p-4 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`text-2xl font-bold ${M==="regular"?"text-green-500":M==="member"?"text-blue-500":M==="newcomer"?"text-yellow-500":"text-gray-500"}`,children:Y.length}),s.jsx("div",{className:`text-sm font-medium transition-colors ${h?"text-gray-300":"text-gray-700"}`,children:x(M)})]})},M))}),s.jsx("div",{className:"space-y-6",children:Object.entries(v.membersByBadge).map(([M,Y])=>s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${M==="regular"?"bg-green-500":M==="member"?"bg-blue-500":M==="newcomer"?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("h4",{className:`font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:[x(M)," (",Y.length,")"]})]}),s.jsx("div",{className:"grid gap-3",children:Y.map(te=>{var Se;return s.jsx("div",{className:`rounded-lg border p-3 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold ${M==="regular"?"bg-green-500":M==="member"?"bg-blue-500":M==="newcomer"?"bg-yellow-500":"bg-gray-500"}`,children:((Se=te.full_name||te["Full Name"])==null?void 0:Se.charAt(0))||"?"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h5",{className:`font-medium transition-colors ${h?"text-white":"text-gray-900"}`,children:te.full_name||te["Full Name"]}),(()=>{const H=y(te);return H===!0?s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-green-800 dark:bg-green-700 text-white ring-2 ring-green-300 dark:ring-green-400",children:"P"}):H===!1?s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-red-800 dark:bg-red-700 text-white ring-2 ring-red-300 dark:ring-red-400",children:"A"}):null})()]}),s.jsxs("p",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[te["Current Level"],"  ",te.attendanceRate,"% attendance"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-medium ${te.attendanceRate>=90?"text-green-500":te.attendanceRate>=75?"text-blue-500":te.attendanceRate>=50?"text-yellow-500":"text-red-500"}`,children:[te.attendanceRate,"%"]}),s.jsxs("div",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[te.daysSinceJoin," days"]})]}),s.jsx("button",{onClick:()=>{O(te),I(!0)},className:`px-2 py-1 text-xs rounded transition-colors ${h?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Edit Badge"})]})]})},te.id)})})]},M))})]}),Oe=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:`text-xl font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:["Regular Attendees (",v.regularAttendees.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pd,{className:"w-5 h-5 text-yellow-500"}),s.jsx("span",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"75%+ attendance rate"})]})]}),s.jsx("div",{className:"grid gap-4",children:v.regularAttendees.map((M,Y)=>s.jsx("div",{className:`rounded-lg border p-4 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-white ${Y===0?"bg-yellow-500":Y===1?"bg-gray-400":Y===2?"bg-amber-600":"bg-blue-500"}`,children:Y<3?Y+1:s.jsx(y0,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:M.member_name}),s.jsxs("p",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[M.total_attended," of ",M.total_possible," Sundays"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-2xl font-bold ${M.attendance_rate>=95?"text-green-500":M.attendance_rate>=85?"text-blue-500":"text-yellow-500"}`,children:[M.attendance_rate,"%"]}),s.jsxs("p",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:["Last: ",M.last_attendance?new Date(M.last_attendance).toLocaleDateString():"N/A"]})]})]})},M.member_id))})]}),X=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:`text-xl font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:"Monthly Attendance Trends"}),s.jsx("div",{className:"grid gap-4",children:v.monthlyTrends.map(M=>s.jsxs("div",{className:`rounded-lg border p-4 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:`font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:new Date(M.month_year+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})}),s.jsxs("div",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[M.total_members," members"]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-blue-500",children:M.average_attendance}),s.jsx("div",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Avg Attendance"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-green-500",children:M.highest_attendance}),s.jsx("div",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Highest"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-orange-500",children:M.lowest_attendance}),s.jsx("div",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Lowest"})]})]})]},M.month_year))})]}),$e=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:`text-xl font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:["Recent Newcomers (",v.newcomers.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pv,{className:"w-5 h-5 text-green-500"}),s.jsxs("span",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:["Last ",f.newcomerMonths," months"]})]})]}),s.jsx("div",{className:"grid gap-4",children:v.newcomers.map(M=>s.jsx("div",{className:`rounded-lg border p-4 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:s.jsx(ft,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:M.member_name}),s.jsxs("p",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:["First visit: ",new Date(M.first_attendance_date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-green-500",children:[M.total_attendances," visits"]}),s.jsxs("p",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[M.weeks_since_first_visit," weeks ago"]})]})]})},M.member_id))})]}),De=()=>{const[M,Y]=k.useState(""),[te,Se]=k.useState(!1),H=[{value:"",label:"Remove Manual Badge"},{value:"VIP Member",label:" VIP Member"},{value:"Youth Leader",label:" Youth Leader"},{value:"Volunteer",label:" Volunteer"},{value:"Mentor",label:" Mentor"},{value:"Special Recognition",label:" Special Recognition"}],xe=async()=>{if($){Se(!0);try{if(M){const we=r.find(oe=>oe.id===$.id);if(we&&we["Manual Badges"]){const oe=Array.isArray(we["Manual Badges"])?we["Manual Badges"]:JSON.parse(we["Manual Badges"]||"[]");for(const he of oe)await c($.id,he)}await c($.id,M)}else{const we=r.find(oe=>oe.id===$.id);if(we&&we["Manual Badges"]){const oe=Array.isArray(we["Manual Badges"])?we["Manual Badges"]:JSON.parse(we["Manual Badges"]||"[]");for(const he of oe)await c($.id,he)}}I(!1),O(null),Y(""),ye()}catch(we){console.error("Error assigning badge:",we)}finally{Se(!1)}}};return!K||!$?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:`rounded-lg p-6 w-full max-w-md mx-4 ${h?"bg-gray-800":"bg-white"}`,children:[s.jsxs("h3",{className:`text-lg font-semibold mb-4 transition-colors ${h?"text-white":"text-gray-900"}`,children:["Manage Badge for ",$.full_name||$["Full Name"]]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:`block text-sm font-medium mb-2 transition-colors ${h?"text-gray-300":"text-gray-700"}`,children:["Current Badge: ",$.badgeType||"None"]}),s.jsx("select",{value:M,onChange:we=>Y(we.target.value),className:`w-full p-2 border rounded-md transition-colors ${h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:H.map(we=>s.jsx("option",{value:we.value,children:we.label},we.value))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{I(!1),O(null),Y("")},className:`flex-1 px-4 py-2 rounded-md transition-colors ${h?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancel"}),s.jsx("button",{onClick:xe,disabled:te,className:`flex-1 px-4 py-2 rounded-md text-white transition-colors ${te?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:te?"Assigning...":"Assign Badge"})]})]})]})})},Ue=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:`text-xl font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:"All Member Statistics"}),s.jsx("div",{className:"grid gap-4",children:v.attendanceStats.map(M=>s.jsx("div",{className:`rounded-lg border p-4 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white ${M.is_regular?"bg-green-500":"bg-gray-500"}`,children:M.is_regular?s.jsx(Wn,{className:"w-5 h-5"}):s.jsx(ft,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold transition-colors ${h?"text-white":"text-gray-900"}`,children:M.member_name}),s.jsxs("p",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:[M.attended_sundays," of ",M.total_sundays," Sundays",M.is_regular&&s.jsx("span",{className:"ml-2 text-green-500 font-medium",children:" Regular"})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-xl font-bold ${M.attendance_rate>=75?"text-green-500":M.attendance_rate>=50?"text-yellow-500":"text-red-500"}`,children:[M.attendance_rate,"%"]}),s.jsxs("p",{className:`text-xs transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:["Last: ",M.last_attendance_date?new Date(M.last_attendance_date).toLocaleDateString():"N/A"]})]})]})},M.member_id))})]});return s.jsxs("div",{className:`min-h-screen transition-colors ${h?"bg-gray-900":"bg-gray-50"}`,children:[s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:`text-3xl font-bold mb-2 transition-colors ${h?"text-white":"text-gray-900"}`,children:"Attendance Analytics"}),s.jsx("p",{className:`transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Track attendance patterns, identify regular attendees, and discover trends"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-6 transition-colors",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wn,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Badge Processing"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"3 consecutive Sundays"})]}),s.jsxs("button",{onClick:_e,disabled:A,className:"flex items-center px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(Wn,{className:"w-3 h-3 mr-1.5"}),A?"Processing...":"Process Badges"]})]}),L&&s.jsxs("div",{className:"p-4",children:[s.jsxs("button",{onClick:()=>G(!U),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg border border-blue-200 dark:border-blue-800 hover:border-blue-300 dark:hover:border-blue-700 transition-colors flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[L.totalProcessed," Processed"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wn,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsxs("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:[L.qualified.filter(M=>M.badgeAssigned).length," Got Badges"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),s.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[L.notQualified.length," Didn't Get"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:U?"Hide Details":"View Details"}),U?s.jsx(Eu,{className:"w-4 h-4"}):s.jsx(tr,{className:"w-4 h-4"})]})]}),U&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 mb-3 flex items-center",children:[s.jsx(dt,{className:"w-5 h-5 mr-2"}),"Sunday Attendance Breakdown"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.sort((M,Y)=>M-Y).map((M,Y)=>{const te=M.toISOString().split("T")[0],Se=a[te]||{},H=Object.values(Se).filter(oe=>oe===!0).length,xe=Object.values(Se).filter(oe=>oe===!1).length,we=H+xe;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-purple-300 dark:border-purple-700",children:[s.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:M.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Present:"}),s.jsx("span",{className:"text-sm font-bold text-green-700 dark:text-green-300",children:H})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Absent:"}),s.jsx("span",{className:"text-sm font-bold text-red-700 dark:text-red-300",children:xe})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1 border-t border-purple-200 dark:border-purple-700",children:[s.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Total:"}),s.jsx("span",{className:"text-sm font-bold text-purple-700 dark:text-purple-300",children:we})]})]})]},Y)})})]}),L.notQualified.length>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-900 dark:text-red-100 mb-3 flex items-center",children:[s.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Members to Contact (",L.notQualified.length,")"]}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"These members didn't attend 3 consecutive Sundays. Call them to encourage attendance!"}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.notQualified.map(M=>{var Y;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-300 dark:border-red-700",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:M.name}),s.jsxs("a",{href:`tel:${M.phone}`,className:"flex items-center text-sm text-blue-600 dark:text-blue-400 hover:underline mt-1",children:[s.jsx(Dr,{className:"w-3 h-3 mr-1"}),M.phone]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M.reason}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-red-200 dark:border-red-800",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sundays:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(Y=M.sundayAttendance)==null?void 0:Y.map((te,Se)=>s.jsxs("div",{className:`text-xs px-2 py-1 rounded ${te.status==="Present"?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":te.status==="Absent"?"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,title:te.status,children:[te.date,": ",te.status==="Present"?"":te.status==="Absent"?"":"?"]},Se))})]})]},M.id)})})})]}),L.qualified.length>0&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-green-900 dark:text-green-100 mb-3 flex items-center",children:[s.jsx(Wn,{className:"w-5 h-5 mr-2"}),"Members Who Qualified (",L.qualified.length,")"]}),s.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:L.qualified.map(M=>{var Y;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-green-300 dark:border-green-700",children:[s.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:M.name}),M.badgeAssigned?s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:" Badge assigned"}):s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.reason}),s.jsx("div",{className:"mt-2 pt-2 border-t border-green-200 dark:border-green-800",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(Y=M.sundayAttendance)==null?void 0:Y.map((te,Se)=>s.jsx("div",{className:`text-xs px-1.5 py-0.5 rounded ${te.status==="Present"?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":te.status==="Absent"?"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,title:`${te.date}: ${te.status}`,children:te.status==="Present"?"":te.status==="Absent"?"":"?"},Se))})})]},M.id)})})})]})]})]})]}),ee&&(re.lowAttendance.length>0||re.longAbsent.length>0||re.newcomersNeedingFollowup.length>0)&&s.jsxs("div",{className:`rounded-lg border p-4 mb-6 transition-colors ${h?"bg-orange-900/20 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mv,{className:`w-5 h-5 ${h?"text-orange-400":"text-orange-600"}`}),s.jsx("h3",{className:`font-semibold transition-colors ${h?"text-orange-400":"text-orange-800"}`,children:"Member Outreach Needed"})]}),s.jsx("button",{onClick:()=>le(!1),className:`p-1 rounded hover:bg-opacity-20 transition-colors ${h?"text-orange-400 hover:bg-orange-400":"text-orange-600 hover:bg-orange-600"}`,children:s.jsx(Ye,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[re.lowAttendance.length>0&&s.jsxs("div",{className:`rounded-lg p-3 transition-colors ${h?"bg-red-900/20 border border-red-500/30":"bg-red-50 border border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ea,{className:`w-4 h-4 ${h?"text-red-400":"text-red-600"}`}),s.jsxs("h4",{className:`font-medium text-sm ${h?"text-red-400":"text-red-800"}`,children:["Low Attendance (",re.lowAttendance.length,")"]})]}),s.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[re.lowAttendance.slice(0,3).map(M=>s.jsxs("div",{className:`text-xs p-2 rounded transition-colors ${h?"bg-gray-800":"bg-white"}`,children:[s.jsx("div",{className:`font-medium ${h?"text-white":"text-gray-900"}`,children:M.name}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Dr,{className:"w-3 h-3"}),s.jsx("span",{className:`${h?"text-gray-400":"text-gray-600"}`,children:M.phone})]}),s.jsxs("div",{className:`text-xs mt-1 ${h?"text-red-400":"text-red-600"}`,children:[M.attendanceRate,"% attendance"]})]},M.id)),re.lowAttendance.length>3&&s.jsxs("div",{className:`text-xs text-center ${h?"text-gray-400":"text-gray-600"}`,children:["+",re.lowAttendance.length-3," more"]})]})]}),re.longAbsent.length>0&&s.jsxs("div",{className:`rounded-lg p-3 transition-colors ${h?"bg-yellow-900/20 border border-yellow-500/30":"bg-yellow-50 border border-yellow-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(zm,{className:`w-4 h-4 ${h?"text-yellow-400":"text-yellow-600"}`}),s.jsxs("h4",{className:`font-medium text-sm ${h?"text-yellow-400":"text-yellow-800"}`,children:["Long Absent (",re.longAbsent.length,")"]})]}),s.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[re.longAbsent.slice(0,3).map(M=>s.jsxs("div",{className:`text-xs p-2 rounded transition-colors ${h?"bg-gray-800":"bg-white"}`,children:[s.jsx("div",{className:`font-medium ${h?"text-white":"text-gray-900"}`,children:M.name}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Dr,{className:"w-3 h-3"}),s.jsx("span",{className:`${h?"text-gray-400":"text-gray-600"}`,children:M.phone})]}),s.jsxs("div",{className:`text-xs mt-1 ${h?"text-yellow-400":"text-yellow-600"}`,children:[Math.floor(M.daysSinceJoin)," days since join"]})]},M.id)),re.longAbsent.length>3&&s.jsxs("div",{className:`text-xs text-center ${h?"text-gray-400":"text-gray-600"}`,children:["+",re.longAbsent.length-3," more"]})]})]}),re.newcomersNeedingFollowup.length>0&&s.jsxs("div",{className:`rounded-lg p-3 transition-colors ${h?"bg-blue-900/20 border border-blue-500/30":"bg-blue-50 border border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(y0,{className:`w-4 h-4 ${h?"text-blue-400":"text-blue-600"}`}),s.jsxs("h4",{className:`font-medium text-sm ${h?"text-blue-400":"text-blue-800"}`,children:["New Members (",re.newcomersNeedingFollowup.length,")"]})]}),s.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[re.newcomersNeedingFollowup.slice(0,3).map(M=>s.jsxs("div",{className:`text-xs p-2 rounded transition-colors ${h?"bg-gray-800":"bg-white"}`,children:[s.jsx("div",{className:`font-medium ${h?"text-white":"text-gray-900"}`,children:M.name}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Dr,{className:"w-3 h-3"}),s.jsx("span",{className:`${h?"text-gray-400":"text-gray-600"}`,children:M.phone})]}),s.jsxs("div",{className:`text-xs mt-1 ${h?"text-blue-400":"text-blue-600"}`,children:[M.daysSinceJoin," days, ",M.attendanceRate,"% attendance"]})]},M.id)),re.newcomersNeedingFollowup.length>3&&s.jsxs("div",{className:`text-xs text-center ${h?"text-gray-400":"text-gray-600"}`,children:["+",re.newcomersNeedingFollowup.length-3," more"]})]})]})]}),s.jsx("div",{className:`mt-3 text-xs ${h?"text-orange-400":"text-orange-700"}`,children:" Tip: Click on phone numbers to call members directly for follow-up and encouragement."})]}),s.jsx("div",{className:`rounded-lg border p-4 mb-6 transition-colors ${h?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lo,{className:"w-4 h-4"}),s.jsx("span",{className:`text-sm font-medium transition-colors ${h?"text-white":"text-gray-900"}`,children:"Filters:"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Months back:"}),s.jsxs("select",{value:f.monthsBack,onChange:M=>g(Y=>({...Y,monthsBack:parseInt(M.target.value)})),className:`px-2 py-1 rounded border text-sm transition-colors ${h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[s.jsx("option",{value:3,children:"3 months"}),s.jsx("option",{value:6,children:"6 months"}),s.jsx("option",{value:12,children:"12 months"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:`text-sm transition-colors ${h?"text-gray-400":"text-gray-600"}`,children:"Min attendance:"}),s.jsxs("select",{value:f.minAttendanceRate,onChange:M=>g(Y=>({...Y,minAttendanceRate:parseInt(M.target.value)})),className:`px-2 py-1 rounded border text-sm transition-colors ${h?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[s.jsx("option",{value:0,children:"0%"}),s.jsx("option",{value:25,children:"25%"}),s.jsx("option",{value:50,children:"50%"}),s.jsx("option",{value:75,children:"75%"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsx("span",{className:`text-sm font-medium transition-colors ${h?"text-gray-300":"text-gray-700"}`,children:"Badge Filters:"}),["member","regular","newcomer"].map(M=>s.jsx("button",{onClick:()=>{b(Y=>Y.includes(M)?Y.filter(te=>te!==M):[...Y,M])},className:`px-3 py-1 rounded-full text-sm font-medium transition-colors border ${m.includes(M)?M==="member"?"bg-blue-500 text-white border-blue-500":M==="regular"?"bg-green-500 text-white border-green-500":"bg-yellow-500 text-white border-yellow-500":h?"bg-gray-700 text-gray-300 border-gray-600 hover:bg-gray-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"}`,children:x(M)},M)),m.length>0&&s.jsx("button",{onClick:()=>b([]),className:`px-2 py-1 text-xs rounded transition-colors ${h?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"Clear All"})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex space-x-1 rounded-lg bg-gray-100 dark:bg-gray-800 p-1 overflow-x-auto",children:[{id:"badges",label:"Member Badges",icon:Wn},{id:"regulars",label:"Regular Attendees",icon:pd},{id:"trends",label:"Monthly Trends",icon:Zi},{id:"newcomers",label:"Newcomers",icon:ft},{id:"stats",label:"All Stats",icon:Su}].map(M=>{const Y=M.icon;return s.jsxs("button",{onClick:()=>E(M.id),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${N===M.id?h?"bg-gray-700 text-white":"bg-white text-gray-900 shadow-sm":h?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[s.jsx(Y,{className:"w-4 h-4"}),M.label]},M.id)})})}),_?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):s.jsxs("div",{children:[N==="badges"&&s.jsx(Me,{}),N==="regulars"&&s.jsx(Oe,{}),N==="trends"&&s.jsx(X,{}),N==="newcomers"&&s.jsx($e,{}),N==="stats"&&s.jsx(Ue,{})]})]}),s.jsx(De,{})]})},B1=({setCurrentView:e,onBack:t})=>{const{members:r,currentTable:n,attendanceData:a,availableSundayDates:o,isMonthAttendanceComplete:i,updateMember:l,calculateAttendanceRate:c}=Ct();vr();const{user:d}=Lr(),[u,p]=k.useState(()=>{if(localStorage.getItem("adminStayLoggedIn")==="true"){const xe=localStorage.getItem("adminAuthExpiry");if(xe&&new Date().getTime()<parseInt(xe))return!0;localStorage.removeItem("adminStayLoggedIn"),localStorage.removeItem("adminAuthExpiry")}return sessionStorage.getItem("adminAuthenticated")==="true"}),[h,y]=k.useState(""),[x,v]=k.useState(!1),[w,f]=k.useState(!1),[g,m]=k.useState(!1),[b,_]=k.useState(Date.now()),j=15;k.useEffect(()=>{if(!u)return;const xe=setInterval(()=>{if(localStorage.getItem("adminStayLoggedIn")==="true")return;Date.now()-b>j*60*1e3&&(E(),F.info("Admin session expired due to inactivity"))},6e4);return()=>clearInterval(xe)},[u,b]),k.useEffect(()=>{if(!u)return;const H=()=>_(Date.now());return window.addEventListener("mousemove",H),window.addEventListener("keydown",H),window.addEventListener("click",H),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("keydown",H),window.removeEventListener("click",H)}},[u]);const N=async H=>{if(H.preventDefault(),!(!(d!=null&&d.email)||!h)){f(!0),v(!1);try{const{error:xe}=await Ae.auth.signInWithPassword({email:d.email,password:h});if(xe)v(!0),y("");else{if(p(!0),_(Date.now()),g){const we=new Date().getTime()+6048e5;localStorage.setItem("adminStayLoggedIn","true"),localStorage.setItem("adminAuthExpiry",we.toString())}else sessionStorage.setItem("adminAuthenticated","true");F.success("Admin access granted")}}catch{v(!0),y("")}finally{f(!1)}}},E=()=>{p(!1),sessionStorage.removeItem("adminAuthenticated"),localStorage.removeItem("adminStayLoggedIn"),localStorage.removeItem("adminAuthExpiry")},[$,O]=k.useState(!1),[K,I]=k.useState(null),[ee,le]=k.useState(!1),[re,W]=k.useState(!1),L=["Choir","Ushers","Youth","Children","Media","Welfare","Protocol","Evangelism"],[z,A]=k.useState(()=>{const H=localStorage.getItem("customMinistries");return H?JSON.parse(H):L}),[B,U]=k.useState(""),[G,ye]=k.useState(null),[_e,Me]=k.useState("");k.useEffect(()=>{localStorage.setItem("customMinistries",JSON.stringify(z)),window.dispatchEvent(new CustomEvent("ministriesUpdated",{detail:z}))},[z]);const Oe=()=>{const H=B.trim();H&&!z.includes(H)&&(A([...z,H]),U(""),F.success(`Added "${H}" ministry`))},X=H=>{A(z.filter(xe=>xe!==H)),F.success(`Removed "${H}" ministry`)},$e=H=>{ye(H),Me(H)},De=()=>{const H=_e.trim();H&&H!==G&&(A(z.map(xe=>xe===G?H:xe)),F.success(`Updated ministry to "${H}"`)),ye(null),Me("")},Ue=()=>{const H=(o==null?void 0:o.map(he=>{if(he instanceof Date){const Ce=he.getFullYear(),je=String(he.getMonth()+1).padStart(2,"0"),Le=String(he.getDate()).padStart(2,"0");return`${Ce}-${je}-${Le}`}return he}))||[],xe=[...r].sort((he,Ce)=>{const je=(he.full_name||he["Full Name"]||"").toLowerCase(),Le=(Ce.full_name||Ce["Full Name"]||"").toLowerCase();return je.localeCompare(Le)}),we=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Attendance Sheet - ${M}</title>
        <style>
          * { box-sizing: border-box; }
          body { font-family: 'Segoe UI', Arial, sans-serif; padding: 20px; margin: 0; background: #f5f5f5; }
          .toolbar { 
            position: fixed; top: 0; left: 0; right: 0; 
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            padding: 12px 20px; 
            display: flex; align-items: center; gap: 15px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            flex-wrap: wrap;
          }
          .toolbar label { color: #e2e8f0; font-size: 13px; font-weight: 500; }
          .toolbar select, .toolbar input[type="number"] { 
            padding: 8px 12px; border-radius: 8px; border: 1px solid #475569; 
            font-size: 13px; background: #1e293b; color: white; cursor: pointer;
          }
          .toolbar select:focus { outline: none; border-color: #3b82f6; }
          .toolbar button {
            padding: 10px 20px; border-radius: 8px; border: none;
            font-weight: 600; cursor: pointer; transition: all 0.2s;
          }
          .btn-print { background: #059669; color: white; }
          .btn-print:hover { background: #047857; transform: translateY(-1px); }
          .btn-close { background: #475569; color: white; margin-left: auto; }
          .btn-close:hover { background: #64748b; }
          .toolbar-group { display: flex; align-items: center; gap: 8px; }
          .toolbar-divider { width: 1px; height: 24px; background: #475569; margin: 0 8px; }
          
          .content { margin-top: 80px; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
          h1 { text-align: center; margin-bottom: 5px; font-size: 24px; color: #1f2937; }
          h2 { text-align: center; color: #6b7280; font-weight: normal; margin-top: 0; font-size: 16px; }
          
          .editable-title { 
            border: 2px dashed transparent; padding: 5px 10px; border-radius: 4px;
            transition: border-color 0.2s; cursor: text;
          }
          .editable-title:hover { border-color: #667eea; }
          .editable-title:focus { outline: none; border-color: #667eea; background: #f0f4ff; }
          
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #d1d5db; padding: 8px; text-align: center; }
          th { background: #f3f4f6; font-weight: 600; color: #374151; }
          td:nth-child(2) { text-align: left; }
          .present { background: #d1fae5; color: #065f46; font-weight: bold; }
          .absent { background: #fee2e2; color: #991b1b; font-weight: bold; }
          
          .summary { margin: 20px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
          .summary-item { text-align: center; padding: 15px 25px; background: #f9fafb; border-radius: 8px; }
          .summary-value { font-size: 28px; font-weight: bold; }
          .summary-label { font-size: 12px; color: #6b7280; margin-top: 4px; }
          
          .footer { text-align: center; margin-top: 30px; color: #9ca3af; font-size: 11px; }
          
          @media print {
            body { background: white; padding: 10px; }
            .toolbar { display: none !important; }
            .content { margin-top: 0; box-shadow: none; padding: 0; }
            .editable-title { border: none !important; }
            table { font-size: 10px; }
            th, td { padding: 4px; }
          }
        </style>
      </head>
      <body>
        <div class="toolbar">
          <div class="toolbar-group">
            <label> Font:</label>
            <select id="fontSize" onchange="changeFontSize(this.value)">
              <option value="9">Tiny</option>
              <option value="10">Small</option>
              <option value="12" selected>Normal</option>
              <option value="14">Large</option>
            </select>
          </div>
          <div class="toolbar-divider"></div>
          <div class="toolbar-group">
            <label> Style:</label>
            <select id="tableStyle" onchange="changeTableStyle(this.value)">
              <option value="default">Default</option>
              <option value="compact">Compact</option>
              <option value="striped">Striped</option>
              <option value="bordered">Bold Border</option>
            </select>
          </div>
          <div class="toolbar-divider"></div>
          <div class="toolbar-group">
            <label>
              <input type="checkbox" id="showSummary" checked onchange="toggleSummary(this.checked)"> 
              Summary
            </label>
          </div>
          <div class="toolbar-group">
            <label>
              <input type="checkbox" id="boldNames" onchange="toggleBoldNames(this.checked)"> 
              Bold Names
            </label>
          </div>
          <div class="toolbar-group">
            <label>
              <input type="checkbox" id="showGender" checked onchange="toggleColumn('gender', this.checked)"> 
              Gender
            </label>
          </div>
          <div class="toolbar-group">
            <label>
              <input type="checkbox" id="showLevel" checked onchange="toggleColumn('level', this.checked)"> 
              Level
            </label>
          </div>
          <div class="toolbar-divider"></div>
          <button class="btn-print" onclick="window.print()"> Print</button>
          <button class="btn-close" onclick="window.close()"> Close</button>
        </div>
        
        <div class="content">
          <h1 contenteditable="true" class="editable-title">Attendance Sheet</h1>
          <h2 contenteditable="true" class="editable-title">${M}</h2>
          
          <div class="summary" id="summarySection">
            <div class="summary-item">
              <div class="summary-value">${r.length}</div>
              <div class="summary-label">Total Members</div>
            </div>
            <div class="summary-item">
              <div class="summary-value" style="color: #10b981">${Y.totalPresent}</div>
              <div class="summary-label">Total Present</div>
            </div>
            <div class="summary-item">
              <div class="summary-value" style="color: #ef4444">${Y.totalAbsent}</div>
              <div class="summary-label">Total Absent</div>
            </div>
            <div class="summary-item">
              <div class="summary-value" style="color: #8b5cf6">${Y.attendanceRate}%</div>
              <div class="summary-label">Attendance Rate</div>
            </div>
          </div>
          
          <table id="attendanceTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Gender</th>
                <th>Level</th>
                ${H.map(he=>`<th>${new Date(he).toLocaleDateString("en-US",{month:"short",day:"numeric"})}</th>`).join("")}
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${xe.map((he,Ce)=>{let je=0;const Le=H.map(qe=>{var ot;const Ve=(ot=a[qe])==null?void 0:ot[he.id];return Ve===!0?(je++,'<td class="present">P</td>'):Ve===!1?'<td class="absent">A</td>':"<td>-</td>"}).join("");return`<tr>
                  <td>${Ce+1}</td>
                  <td class="member-name">${he.full_name||he["Full Name"]||"N/A"}</td>
                  <td>${he.Gender||"N/A"}</td>
                  <td>${he["Current Level"]||"N/A"}</td>
                  ${Le}
                  <td><strong>${je}/${H.length}</strong></td>
                </tr>`}).join("")}
            </tbody>
          </table>
          
          <p class="footer" contenteditable="true">Generated on ${new Date().toLocaleString()}</p>
        </div>
        
        <script>
          function changeFontSize(size) {
            document.getElementById('attendanceTable').style.fontSize = size + 'px';
          }
          function changeTableStyle(style) {
            const table = document.getElementById('attendanceTable');
            // Reset all styles first
            table.querySelectorAll('tbody tr').forEach(row => row.style.background = '');
            table.querySelectorAll('th, td').forEach(cell => {
              cell.style.padding = '';
              cell.style.borderWidth = '';
            });
            
            if (style === 'striped') {
              table.querySelectorAll('tbody tr').forEach((row, i) => {
                row.style.background = i % 2 === 0 ? '#f8fafc' : 'white';
              });
            } else if (style === 'compact') {
              table.querySelectorAll('th, td').forEach(cell => {
                cell.style.padding = '3px 5px';
              });
            } else if (style === 'bordered') {
              table.querySelectorAll('th, td').forEach(cell => {
                cell.style.borderWidth = '2px';
              });
            }
          }
          function toggleSummary(show) {
            document.getElementById('summarySection').style.display = show ? 'flex' : 'none';
          }
          function toggleBoldNames(bold) {
            document.querySelectorAll('.member-name').forEach(cell => {
              cell.style.fontWeight = bold ? 'bold' : 'normal';
            });
          }
          function toggleColumn(col, show) {
            const colIndex = col === 'gender' ? 2 : col === 'level' ? 3 : -1;
            if (colIndex === -1) return;
            document.querySelectorAll('#attendanceTable tr').forEach(row => {
              const cell = row.children[colIndex];
              if (cell) cell.style.display = show ? '' : 'none';
            });
          }
        <\/script>
      </body>
      </html>
    `,oe=window.open("","_blank");oe.document.write(we),oe.document.close()},M=n?n.replace("_"," "):"No Month Selected",Y=k.useMemo(()=>{const H=(o==null?void 0:o.map(je=>{if(je instanceof Date){const Le=je.getFullYear(),qe=String(je.getMonth()+1).padStart(2,"0"),Ve=String(je.getDate()).padStart(2,"0");return`${Le}-${qe}-${Ve}`}return je}))||[];let xe=0,we=0;const oe=H.map(je=>{const Le=a[je]||{},qe=Object.values(Le).filter(ot=>ot===!0).length,Ve=Object.values(Le).filter(ot=>ot===!1).length;return xe+=qe,we+=Ve,{date:je,present:qe,absent:Ve,total:qe+Ve,marked:qe+Ve>0}}),he=r.length*H.length,Ce=he>0?Math.round(xe/he*100):0;return{totalMembers:r.length,totalPresent:xe,totalAbsent:we,attendanceRate:Ce,sundayStats:oe,sundaysCompleted:oe.filter(je=>je.marked).length,totalSundays:H.length}},[r,a,o]),te=k.useMemo(()=>r.map(H=>{const xe=c(H);return{id:H.id,name:H.full_name||H["Full Name"]||"Unknown",rate:xe,badge:H["Badge Type"]||"newcomer"}}).filter(H=>H.rate>0).sort((H,xe)=>xe.rate-H.rate).slice(0,5),[r,c]),Se=async()=>{var H;O(!0),I(null);try{if(!i()){F.error("Please complete attendance for all Sundays first."),O(!1);return}const we={qualified:[],notQualified:[],totalProcessed:0},oe=[...o||[]].sort((Ce,je)=>{const Le=Ce instanceof Date?Ce:new Date(Ce),qe=je instanceof Date?je:new Date(je);return Le-qe});for(const Ce of r){we.totalProcessed++;let je=0,Le=0,qe=!1;for(const ot of oe){const wr=ot instanceof Date?`${ot.getFullYear()}-${String(ot.getMonth()+1).padStart(2,"0")}-${String(ot.getDate()).padStart(2,"0")}`:ot;((H=a[wr])==null?void 0:H[Ce.id])===!0?(je++,Le++,Le>=3&&(qe=!0)):Le=0}const Ve={id:Ce.id,name:Ce.full_name||Ce["Full Name"],presentCount:je,currentBadge:Ce["Badge Type"]||"newcomer"};qe?(Ce["Badge Type"]!=="regular"&&(await l(Ce.id,{"Badge Type":"regular"},{silent:!0}),Ve.newBadge="regular",Ve.upgraded=!0),we.qualified.push(Ve)):je>=2?(Ce["Badge Type"]!=="member"&&Ce["Badge Type"]!=="regular"&&(await l(Ce.id,{"Badge Type":"member"},{silent:!0}),Ve.newBadge="member",Ve.upgraded=!0),we.qualified.push(Ve)):we.notQualified.push(Ve)}I(we),le(!0);const he=we.qualified.filter(Ce=>Ce.upgraded).length;F.success(`Badge processing complete! ${he} members upgraded.`)}catch(xe){console.error("Error processing badges:",xe),F.error("Failed to process badges. Please try again.")}finally{O(!1)}};return u?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-24",children:[s.jsx("div",{className:"sticky top-0 z-20 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(ki,{className:"w-6 h-6 text-slate-600 dark:text-slate-400"}),"Admin Panel"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:M})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{E(),F.info("Admin session ended")},className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Lock Admin Panel",children:[s.jsx(Bm,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Lock"})]}),s.jsx("button",{onClick:()=>e("dashboard"),className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Back to Dashboard"})]})]})})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[s.jsx("div",{className:"flex justify-end animate-fade-in-up",children:s.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm",children:[s.jsx(Uv,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Attendance Sheet"})]})}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 animate-fade-in-up",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:s.jsx(ft,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Y.totalMembers}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Members"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-xl",children:s.jsx(Is,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Y.totalPresent}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Present"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx(Yv,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Y.totalAbsent}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Absent"})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:s.jsx(Zi,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[Y.attendanceRate,"%"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Attendance Rate"})]})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-fade-in-up",style:{animationDelay:"100ms"},children:[s.jsxs("button",{onClick:()=>W(!re),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-xl",children:s.jsx(Wn,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Advanced Features"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Badge processing & automation"})]})]}),s.jsx(tr,{className:`w-5 h-5 text-gray-400 transition-transform ${re?"rotate-180":""}`})]}),re&&s.jsx("div",{className:"p-4 pt-0 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-5 text-white mt-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ta,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-bold",children:"Badge Processing"})]}),s.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Auto-assign badges based on attendance"}),s.jsxs("div",{className:"space-y-1 text-xs text-white/70",children:[s.jsxs("p",{children:[" ",s.jsx("span",{className:"text-blue-200 font-medium",children:"Member"})," = 2+ Sundays"]}),s.jsxs("p",{children:[" ",s.jsx("span",{className:"text-green-200 font-medium",children:"Regular"})," = 3+ consecutive"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-bold",children:[Y.sundaysCompleted,"/",Y.totalSundays]}),s.jsx("p",{className:"text-xs text-white/70",children:"Sundays"})]})]}),s.jsx("button",{onClick:Se,disabled:$||Y.sundaysCompleted<Y.totalSundays,className:`w-full mt-4 py-2.5 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all text-sm ${Y.sundaysCompleted<Y.totalSundays?"bg-white/20 text-white/50 cursor-not-allowed":"bg-white text-blue-600 hover:bg-blue-50 shadow-lg btn-press"}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(Vm,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):Y.sundaysCompleted<Y.totalSundays?s.jsxs(s.Fragment,{children:[s.jsx(ea,{className:"w-4 h-4"}),"Complete All Sundays First"]}):s.jsxs(s.Fragment,{children:[s.jsx(ta,{className:"w-4 h-4"}),"Process Badges"]})})]})})]}),K&&ee&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-fade-in-up",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Vv,{className:"w-5 h-5 text-yellow-500"}),"Badge Results"]}),s.jsx("button",{onClick:()=>le(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-400"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:K.qualified.length}),s.jsx("p",{className:"text-sm text-green-600/70 dark:text-green-400/70",children:"Qualified"})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-300",children:K.notQualified.length}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Not Qualified"})]})]}),K.qualified.filter(H=>H.upgraded).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recently Upgraded:"}),K.qualified.filter(H=>H.upgraded).slice(0,5).map(H=>s.jsxs("div",{className:"flex items-center justify-between bg-green-50 dark:bg-green-900/20 rounded-lg px-3 py-2",children:[s.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:H.name}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${H.newBadge==="regular"?"bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-300":"bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300"}`,children:H.newBadge==="regular"?" Regular":" Member"})]},H.id))]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-fade-in-up",style:{animationDelay:"200ms"},children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(dt,{className:"w-5 h-5 text-blue-500"}),"This Month's Sundays"]})}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-2",children:Y.sundayStats.map((H,xe)=>{const oe=new Date(H.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${H.marked?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-400"}`,children:H.marked?s.jsx(Ht,{className:"w-4 h-4"}):xe+1}),s.jsx("span",{className:`font-medium ${H.marked?"text-gray-900 dark:text-white":"text-gray-400"}`,children:oe})]}),H.marked?s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[H.present," present"]}),s.jsxs("span",{className:"text-red-500",children:[H.absent," absent"]})]}):s.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[s.jsx(zm,{className:"w-3 h-3"}),"Not marked"]})]},H.date)})})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-fade-in-up",style:{animationDelay:"300ms"},children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(qv,{className:"w-5 h-5 text-primary-500"}),"Ministry/Groups"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Manage ministry tags for members"})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"text",value:B,onChange:H=>U(H.target.value),onKeyDown:H=>H.key==="Enter"&&Oe(),placeholder:"Add new ministry...",className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500"}),s.jsx("button",{onClick:Oe,disabled:!B.trim(),className:"px-3 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white rounded-lg transition-colors",children:s.jsx(Tu,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:z.map(H=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg group",children:[G===H?s.jsx("input",{type:"text",value:_e,onChange:xe=>Me(xe.target.value),onKeyDown:xe=>xe.key==="Enter"&&De(),onBlur:De,autoFocus:!0,className:"flex-1 px-2 py-1 text-sm border border-primary-500 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none"}):s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:H}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>$e(H),className:"p-1 text-gray-400 hover:text-primary-500 transition-colors",title:"Edit",children:s.jsx(Wm,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>X(H),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:s.jsx(os,{className:"w-3.5 h-3.5"})})]})]},H))}),z.length===0&&s.jsx("p",{className:"text-center text-gray-400 py-4 text-sm",children:"No ministries added yet"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-fade-in-up",style:{animationDelay:"400ms"},children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(pd,{className:"w-5 h-5 text-yellow-500"}),"Top Attendees"]})}),s.jsx("div",{className:"p-4",children:te.length===0?s.jsx("p",{className:"text-center text-gray-400 py-4",children:"No attendance data yet"}):s.jsx("div",{className:"space-y-2",children:te.map((H,xe)=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white ${xe===0?"bg-yellow-500":xe===1?"bg-gray-400":xe===2?"bg-amber-600":"bg-blue-500"}`,children:xe+1}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:H.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:H.badge})]})]}),s.jsxs("div",{className:`text-lg font-bold ${H.rate>=90?"text-green-500":H.rate>=75?"text-blue-500":"text-yellow-500"}`,children:[H.rate,"%"]})]},H.id))})})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-700 to-slate-900 dark:from-slate-800 dark:to-slate-900 px-6 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur rounded-2xl flex items-center justify-center mx-auto mb-4 border border-white/20",children:s.jsx(ki,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Panel"}),s.jsx("p",{className:"text-slate-300 text-sm mt-1",children:"Secure Access Required"})]}),s.jsxs("form",{onSubmit:N,className:"p-6 space-y-5",children:[s.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2",children:[s.jsx(Cu,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Enter your account password to verify your identity and access admin features."})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Account Password"}),s.jsx("input",{type:"password",value:h,onChange:H=>y(H.target.value),placeholder:"Enter your account password",className:`w-full px-4 py-3 rounded-xl border ${x?"border-red-400 focus:ring-red-400 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 focus:ring-slate-500 bg-gray-50 dark:bg-gray-700"} text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all`,autoFocus:!0,disabled:w}),x&&s.jsxs("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[s.jsx(Ye,{className:"w-4 h-4"}),"Incorrect password. Please try again."]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:H=>m(H.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 dark:border-gray-600 rounded peer-checked:border-slate-600 peer-checked:bg-slate-600 transition-all flex items-center justify-center",children:g&&s.jsx(Ht,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stay logged in"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Keep admin access for 7 days"})]})]}),s.jsx("button",{type:"submit",disabled:w||!h,className:"w-full py-3 bg-gradient-to-r from-slate-700 to-slate-900 hover:from-slate-800 hover:to-slate-950 disabled:from-slate-400 disabled:to-slate-500 text-white font-semibold rounded-xl transition-all shadow-lg disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Verifying..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4"}),"Access Admin Panel"]})}),s.jsx("button",{type:"button",onClick:()=>e("dashboard"),className:"w-full py-3 text-gray-500 dark:text-gray-400 font-medium hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:" Back to Dashboard"})]})]})})})};class H1 extends He.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"The application encountered an unexpected error. Please try refreshing the page."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Refresh Page"}),s.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}const W1=e=>{if(!e)return{score:0,label:"",color:""};let t=0;const r={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),number:/[0-9]/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return e.length>=6&&(t+=1),e.length>=8&&(t+=1),r.lowercase&&r.uppercase&&(t+=1),r.number&&(t+=1),r.special&&(t+=1),t<=2?{score:t,label:"Weak",color:"bg-red-500",textColor:"text-red-500",checks:r}:t<=3?{score:t,label:"Fair",color:"bg-orange-500",textColor:"text-orange-500",checks:r}:t<=4?{score:t,label:"Good",color:"bg-yellow-500",textColor:"text-yellow-500",checks:r}:{score:t,label:"Strong",color:"bg-green-500",textColor:"text-green-500",checks:r}},q1=()=>{var ee,le,re,W,L,z,A,B,U,G;const{signInWithGoogle:e,signUpWithEmail:t,signInWithEmail:r,resetPassword:n}=Lr(),[a,o]=k.useState(!1),[i,l]=k.useState(null),[c,d]=k.useState("login"),[u,p]=k.useState(""),[h,y]=k.useState(""),[x,v]=k.useState(""),[w,f]=k.useState(!1),[g,m]=k.useState(!1),[b,_]=k.useState(0),j=k.useMemo(()=>W1(h),[h]),N=async()=>{o(!0),l(null);try{await e()}catch(ye){console.error("Sign in error:",ye),l("Failed to sign in. Please try again.")}finally{o(!1)}},E=async ye=>{var _e,Me;if(ye.preventDefault(),!u||!h){l("Please fill in all fields");return}o(!0),l(null);try{await r(u,h),_(0)}catch(Oe){const X=b+1;_(X),(_e=Oe.message)!=null&&_e.includes("Invalid login credentials")?l(X===1?"Invalid email or password. Please try again.":X===2?"Still incorrect. Double-check your email and password.":"We couldn't find an account with these credentials. Need to create one?"):(Me=Oe.message)!=null&&Me.includes("Email not confirmed")?l("Please check your email and click the confirmation link first."):l("Something went wrong. Please try again.")}finally{o(!1)}},$=async ye=>{if(ye.preventDefault(),!u||!h||!x){l("Please fill in all fields");return}if(h.length<6){l("Password must be at least 6 characters");return}o(!0),l(null);try{const _e=await t(u,h,x);_e!=null&&_e.needsConfirmation?m(!0):_e!=null&&_e.needsSignIn&&d("login")}catch{}finally{o(!1)}},O=async ye=>{if(ye.preventDefault(),!u){l("Please enter your email address");return}o(!0),l(null);try{await n(u),m(!0)}catch{}finally{o(!1)}},K=()=>{l(null),m(!1),_(0)},I=ye=>{d(ye),K()};return g?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:s.jsx(Xi,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Check your email"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c==="forgot"?`We've sent a password reset link to ${u}`:`We've sent a confirmation link to ${u}. Click it to activate your account.`}),s.jsx("button",{onClick:()=>{m(!1),d("login")},className:"text-primary-600 dark:text-primary-400 font-medium hover:underline",children:"Back to login"})]})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-500 to-primary-600 shadow-lg mb-3",children:s.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:"TMH Teen Ministry"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Attendance & Data Management"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"text-center mb-5",children:[c==="forgot"&&s.jsx("button",{onClick:()=>I("login"),className:"absolute left-4 top-4 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Im,{className:"w-5 h-5"})}),s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[c==="login"&&"Welcome Back",c==="signup"&&"Create Account",c==="forgot"&&"Reset Password"]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[c==="login"&&"Sign in to continue",c==="signup"&&"Sign up to get started",c==="forgot"&&"Enter your email to reset"]})]}),i&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 text-sm text-center",children:i}),s.jsxs("form",{onSubmit:c==="login"?E:c==="signup"?$:O,children:[c==="signup"&&s.jsx("div",{className:"mb-3",children:s.jsxs("div",{className:"relative",children:[s.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:x,onChange:ye=>v(ye.target.value),placeholder:"Full Name",className:"w-full pl-11 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]})}),s.jsx("div",{className:"mb-3",children:s.jsxs("div",{className:"relative",children:[s.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"email",value:u,onChange:ye=>p(ye.target.value),placeholder:"Email",className:"w-full pl-11 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]})}),c!=="forgot"&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Cu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:w?"text":"password",value:h,onChange:ye=>y(ye.target.value),placeholder:"Password",className:"w-full pl-11 pr-12 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"}),s.jsx("button",{type:"button",onClick:()=>f(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:w?s.jsx(Rv,{className:"w-5 h-5"}):s.jsx(Iv,{className:"w-5 h-5"})})]}),c==="signup"&&h&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${j.color} transition-all duration-300`,style:{width:`${j.score/5*100}%`}})}),s.jsx("span",{className:`text-xs font-medium ${j.textColor}`,children:j.label})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-1 ${(ee=j.checks)!=null&&ee.length?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[(le=j.checks)!=null&&le.length?s.jsx(Ht,{className:"w-3 h-3"}):s.jsx(Ye,{className:"w-3 h-3"}),"8+ characters"]}),s.jsxs("div",{className:`flex items-center gap-1 ${(re=j.checks)!=null&&re.uppercase?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[(W=j.checks)!=null&&W.uppercase?s.jsx(Ht,{className:"w-3 h-3"}):s.jsx(Ye,{className:"w-3 h-3"}),"Uppercase"]}),s.jsxs("div",{className:`flex items-center gap-1 ${(L=j.checks)!=null&&L.lowercase?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[(z=j.checks)!=null&&z.lowercase?s.jsx(Ht,{className:"w-3 h-3"}):s.jsx(Ye,{className:"w-3 h-3"}),"Lowercase"]}),s.jsxs("div",{className:`flex items-center gap-1 ${(A=j.checks)!=null&&A.number?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[(B=j.checks)!=null&&B.number?s.jsx(Ht,{className:"w-3 h-3"}):s.jsx(Ye,{className:"w-3 h-3"}),"Number"]}),s.jsxs("div",{className:`flex items-center gap-1 ${(U=j.checks)!=null&&U.special?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:[(G=j.checks)!=null&&G.special?s.jsx(Ht,{className:"w-3 h-3"}):s.jsx(Ye,{className:"w-3 h-3"}),"Special char"]})]})]}),c==="signup"&&!h&&s.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Create a strong password"})]}),c==="login"&&s.jsx("div",{className:"text-right mb-4",children:s.jsx("button",{type:"button",onClick:()=>I("forgot"),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Forgot password?"})}),s.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 rounded-xl font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),c==="login"?"Signing in...":c==="signup"?"Creating account...":"Sending..."]}):s.jsxs(s.Fragment,{children:[c==="login"&&"Sign In",c==="signup"&&"Create Account",c==="forgot"&&"Send Reset Link"]})})]}),s.jsxs("div",{className:"relative my-5",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-3 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"or"})})]}),s.jsxs("button",{onClick:N,disabled:a,className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-xl text-base font-medium transition-all duration-200 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 hover:shadow-md text-gray-700 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{children:"Continue with Google"})]}),s.jsx("div",{className:"mt-5 text-center text-sm",children:c==="login"?s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",s.jsx("button",{onClick:()=>I("signup"),className:"text-primary-600 dark:text-primary-400 font-medium hover:underline",children:"Sign up"})]}):c==="signup"?s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",s.jsx("button",{onClick:()=>I("login"),className:"text-primary-600 dark:text-primary-400 font-medium hover:underline",children:"Sign in"})]}):null})]}),s.jsx("div",{className:"text-center mt-5 text-xs text-gray-500 dark:text-gray-400",children:s.jsx("p",{children:"The Maker's House Chapel Teen Ministry"})})]})})},K0=[new Date(2025,11,7),new Date(2025,11,14),new Date(2025,11,21),new Date(2025,11,28)],V1=({onOpenFullApp:e,showPreview:t,onTogglePreview:r})=>{var B;const[n,a]=k.useState([]),[o,i]=k.useState(!0),[l,c]=k.useState(""),[d,u]=k.useState(20),[p,h]=k.useState(K0[1]),[y,x]=k.useState(!1),[v,w]=k.useState({name:"",phone:"",gender:"",age:"",level:""}),[f,g]=k.useState(!1),[m,b]=k.useState(null),[_,j]=k.useState(null),[N,E]=k.useState(!1),$=U=>{const G=U.getFullYear(),ye=String(U.getMonth()+1).padStart(2,"0"),_e=String(U.getDate()).padStart(2,"0");return`attendance_${G}_${ye}_${_e}`},O=$(p),K=k.useCallback(async()=>{if(!Ca||!Ae){i(!1);return}try{i(!0);const{data:U,error:G}=await Ae.from("December_2025").select("*").order("Full Name",{ascending:!0});if(G)throw G;a(U||[])}catch(U){console.error("Error fetching members:",U),a([])}finally{i(!1)}},[]);k.useEffect(()=>{K()},[K]);const I=async(U,G)=>{if(!(!Ca||!Ae)){b(U);try{const ye=G?"Present":"Absent",{error:_e}=await Ae.from("December_2025").update({[O]:ye}).eq("id",U);if(_e)throw _e;a(Me=>Me.map(Oe=>Oe.id===U?{...Oe,[O]:ye}:Oe))}catch(ye){console.error("Error marking attendance:",ye),alert("Failed to save. Please try again.")}finally{b(null)}}},ee=async()=>{if(!(!v.name.trim()||!Ca||!Ae)){g(!0);try{const U="attendance_2025_12_14",G={"Full Name":v.name.trim(),"Phone Number":v.phone?parseInt(v.phone):null,Gender:v.gender||null,Age:v.age||null,"Current Level":v.level||null,[U]:"Present"},{data:ye,error:_e}=await Ae.from("December_2025").insert(G).select().single();if(_e)throw _e;a(Me=>[...Me,ye].sort((Oe,X)=>(Oe["Full Name"]||"").localeCompare(X["Full Name"]||""))),w({name:"",phone:"",gender:"",age:"",level:""}),x(!1)}catch(U){console.error("Error adding member:",U),alert("Failed to add member. Please try again.")}finally{g(!1)}}},le=async()=>{var U;if(!(!_||!Ca||!Ae)){g(!0);try{const G={"Full Name":((U=_["Full Name"])==null?void 0:U.trim())||"","Phone Number":_["Phone Number"]||null,Gender:_.Gender||null,Age:_.Age||null,"Current Level":_["Current Level"]||null},{error:ye}=await Ae.from("December_2025").update(G).eq("id",_.id);if(ye)throw ye;a(_e=>_e.map(Me=>Me.id===_.id?{...Me,...G}:Me).sort((Me,Oe)=>(Me["Full Name"]||"").localeCompare(Oe["Full Name"]||""))),j(null),E(!1)}catch(G){console.error("Error updating member:",G),alert("Failed to update member. Please try again.")}finally{g(!1)}}},re=U=>{j({...U}),E(!0)},W=k.useMemo(()=>{if(!n)return[];if(!l.trim())return n;const U=l.toLowerCase();return n.filter(G=>(G["Full Name"]||"").toLowerCase().includes(U))},[n,l]),L=k.useMemo(()=>W.slice(0,d),[W,d]),z=W.length>d,A=U=>{const G=U[O];return G==="Present"?!0:G==="Absent"?!1:null};return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-32",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:"December Attendance"}),s.jsxs("p",{className:"text-sm lg:text-base text-gray-600 dark:text-gray-400",children:[W.length," members"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium transition-colors shadow-sm",title:"Skip preview and go to full app",children:[s.jsx("span",{className:"hidden sm:inline",children:"Skip to Full App"}),s.jsx("span",{className:"sm:hidden",children:"Skip"}),s.jsx(io,{className:"w-4 h-4"})]}),s.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors",children:["Open Full App",s.jsx(io,{className:"w-4 h-4"})]})]})]})}),t&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm lg:text-base font-semibold text-gray-700 dark:text-gray-200",children:[s.jsx(dt,{className:"w-4 h-4 lg:w-5 lg:h-5"}),"Sundays in December 2025"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:K0.map(U=>{const G=$(U),ye=U.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_e=O===G;return s.jsx("button",{type:"button",onClick:()=>h(U),className:`px-3 py-1.5 lg:px-4 lg:py-2 rounded-full text-xs lg:text-sm font-semibold border transition-colors ${_e?"bg-blue-600 text-white border-blue-700":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:ye},G)})})]}),o?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading members..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.map(U=>{const G=U["Full Name"]||"Member",ye=A(U),_e=m===U.id;return s.jsx("div",{className:`bg-white dark:bg-gray-800 border rounded-xl p-3 lg:p-4 ${ye===!0?"border-green-500 bg-green-50 dark:bg-green-900/20":ye===!1?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"min-w-0 flex-1 flex items-center gap-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-sm lg:text-base font-semibold text-gray-900 dark:text-white truncate",children:G}),ye!=null&&s.jsx("div",{className:`text-xs lg:text-sm font-medium ${ye?"text-green-600":"text-red-600"}`,children:ye?" Present":" Absent"})]}),s.jsx("button",{type:"button",onClick:()=>re(U),className:"p-1.5 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Edit",children:s.jsx(qm,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 flex-shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>I(U.id,!0),disabled:_e,className:`px-2 py-1.5 lg:px-3 lg:py-2 rounded-lg text-xs lg:text-sm font-bold transition-colors disabled:opacity-50 ${ye===!0?"bg-green-800 text-white ring-2 ring-green-400":"bg-green-700 hover:bg-green-800 text-white"}`,children:_e?"...":"P"}),s.jsx("button",{type:"button",onClick:()=>I(U.id,!1),disabled:_e,className:`px-2 py-1.5 lg:px-3 lg:py-2 rounded-lg text-xs lg:text-sm font-bold transition-colors disabled:opacity-50 ${ye===!1?"bg-red-800 text-white ring-2 ring-red-400":"bg-red-700 hover:bg-red-800 text-white"}`,children:_e?"...":"A"})]})]})},U.id)})}),z&&s.jsxs("button",{type:"button",onClick:()=>u(U=>U+20),className:"w-full mt-3 py-3 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 text-sm lg:text-base font-medium",children:[s.jsx(tr,{className:"w-4 h-4"}),"Show More (",W.length-d," remaining)"]}),W.length===0&&s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 text-center text-sm lg:text-base text-gray-600 dark:text-gray-400",children:l?"No members match your search.":"No members found."})]})]})]}),t&&s.jsx("div",{className:"fixed bottom-4 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-3 mx-4 rounded-2xl shadow-lg",children:s.jsxs("div",{className:"max-w-5xl mx-auto flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:l,onChange:U=>{c(U.target.value),u(20)},placeholder:"Search members...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm lg:text-base"})]}),s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium text-sm lg:text-base transition-colors",children:[s.jsx(Tu,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Add New Member"}),s.jsx("button",{onClick:()=>x(!1),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:v.name,onChange:U=>w(G=>({...G,name:U.target.value})),placeholder:"Full Name *",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",autoFocus:!0}),s.jsx("input",{type:"tel",value:v.phone,onChange:U=>w(G=>({...G,phone:U.target.value.replace(/\D/g,"")})),placeholder:"Phone Number",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsxs("select",{value:v.gender,onChange:U=>w(G=>({...G,gender:U.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"Select Gender"}),s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"})]}),s.jsx("input",{type:"text",value:v.age,onChange:U=>w(G=>({...G,age:U.target.value})),placeholder:"Age",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsxs("select",{value:v.level,onChange:U=>w(G=>({...G,level:U.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"Select Level"}),s.jsx("option",{value:"JHS1",children:"JHS 1"}),s.jsx("option",{value:"JHS2",children:"JHS 2"}),s.jsx("option",{value:"JHS3",children:"JHS 3"}),s.jsx("option",{value:"SHS1",children:"SHS 1"}),s.jsx("option",{value:"SHS2",children:"SHS 2"}),s.jsx("option",{value:"SHS3",children:"SHS 3"}),s.jsx("option",{value:"COMPLETED",children:"Completed"}),s.jsx("option",{value:"UNIVERSITY",children:"University"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx("button",{onClick:()=>{w({name:"",phone:"",gender:"",age:"",level:""}),x(!1)},className:"flex-1 py-3 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:ee,disabled:!v.name.trim()||f,className:"flex-1 py-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium disabled:opacity-50 transition-colors",children:f?"Adding...":"Add Member"})]})]})}),N&&_&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Edit Member"}),s.jsx("button",{onClick:()=>{j(null),E(!1)},className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:_["Full Name"]||"",onChange:U=>j(G=>({...G,"Full Name":U.target.value})),placeholder:"Full Name *",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsx("input",{type:"tel",value:_["Phone Number"]||"",onChange:U=>j(G=>({...G,"Phone Number":U.target.value.replace(/\D/g,"")?parseInt(U.target.value.replace(/\D/g,"")):null})),placeholder:"Phone Number",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsxs("select",{value:_.Gender||"",onChange:U=>j(G=>({...G,Gender:U.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"Select Gender"}),s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"})]}),s.jsx("input",{type:"text",value:_.Age||"",onChange:U=>j(G=>({...G,Age:U.target.value})),placeholder:"Age",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsxs("select",{value:_["Current Level"]||"",onChange:U=>j(G=>({...G,"Current Level":U.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"Select Level"}),s.jsx("option",{value:"JHS1",children:"JHS 1"}),s.jsx("option",{value:"JHS2",children:"JHS 2"}),s.jsx("option",{value:"JHS3",children:"JHS 3"}),s.jsx("option",{value:"SHS1",children:"SHS 1"}),s.jsx("option",{value:"SHS2",children:"SHS 2"}),s.jsx("option",{value:"SHS3",children:"SHS 3"}),s.jsx("option",{value:"COMPLETED",children:"Completed"}),s.jsx("option",{value:"UNIVERSITY",children:"University"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx("button",{onClick:()=>{j(null),E(!1)},className:"flex-1 py-3 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:le,disabled:!((B=_["Full Name"])!=null&&B.trim())||f,className:"flex-1 py-3 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium disabled:opacity-50 transition-colors",children:f?"Saving...":"Save Changes"})]})]})})]})},ay=({isOpen:e,onClose:t})=>{const{isDarkMode:r}=vr(),{user:n,preferences:a,updatePreference:o}=Lr(),{updateWorkspaceForAllTables:i}=Ct(),[l,c]=k.useState(""),[d,u]=k.useState(!1);k.useEffect(()=>{e&&a&&c(a.workspace_name||"My Organization")},[e,a]);const p=async()=>{if(!l.trim()){F.error("Workspace name cannot be empty");return}u(!0);try{await o("workspace_name",l.trim()),await i(l.trim()),t()}catch(h){console.error("Error updating workspace name:",h)}finally{u(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:`w-full max-w-md rounded-lg shadow-xl ${r?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("h2",{className:"text-lg font-bold",children:"Workspace Settings"})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:`p-4 rounded-lg flex items-start gap-3 ${r?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:[s.jsx(Um,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"What is a Workspace Name?"}),s.jsx("p",{className:"text-blue-800 dark:text-blue-200",children:"This name helps identify your data in the backend. It makes it easier to filter and manage multiple organizations in Supabase."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Workspace Name"}),s.jsx("input",{type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"e.g., Grace Church Youth, Teen Center NYC",maxLength:50,className:`w-full px-3 py-2 rounded-lg border transition-colors ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[l.length,"/50 characters"]})]}),s.jsxs("div",{className:`p-3 rounded-lg text-sm ${r?"bg-gray-700":"bg-gray-100"}`,children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Account Email"}),s.jsx("p",{className:"font-medium",children:n==null?void 0:n.email})]})]}),s.jsxs("div",{className:`flex items-center justify-end gap-3 p-4 border-t ${r?"border-gray-700":"border-gray-200"}`,children:[s.jsx("button",{onClick:t,className:`px-4 py-2 rounded-lg font-medium transition-colors ${r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,disabled:d,children:"Cancel"}),s.jsxs("button",{onClick:p,disabled:d||!l.trim(),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${d||!l.trim()?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[s.jsx(Hv,{className:"w-4 h-4"}),d?"Saving...":"Save Changes"]})]})]})}):null},oy=({isOpen:e,onClose:t})=>{const{isDarkMode:r}=vr(),{user:n,signOut:a}=Lr(),{members:o,monthlyTables:i,currentTable:l}=Ct(),[c,d]=k.useState(!1),[u,p]=k.useState(!1),[h,y]=k.useState(""),x=async()=>{p(!0);try{const w=["Full Name","Gender","Age","Phone Number","Current Level","Workspace","Table"],f=o.map(j=>[j["Full Name"]||j.full_name||"",j.Gender||j.gender||"",j.Age||j.age||"",j["Phone Number"]||j.phone_number||"",j["Current Level"]||j.current_level||"",j.workspace||"",l]),g=[w.join(","),...f.map(j=>j.map(N=>`"${String(N).replace(/"/g,'""')}"`).join(","))].join(`
`),m=new Blob([g],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),_=URL.createObjectURL(m);b.setAttribute("href",_),b.setAttribute("download",`my_data_backup_${new Date().toISOString().split("T")[0]}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b),F.success("Data exported successfully!")}catch(w){console.error("Export error:",w),F.error("Failed to export data")}finally{p(!1)}},v=async()=>{if(h!=="DELETE"){F.error("Please type DELETE to confirm");return}d(!0);try{for(const w of i)try{await Ae.from(w).delete().eq("user_id",n.id)}catch(f){console.log(`Could not delete from ${w}:`,f)}try{await Ae.from("user_preferences").delete().eq("user_id",n.id)}catch(w){console.log("Could not delete preferences:",w)}F.success("Your data has been deleted. Please contact support to complete account deletion."),await a(),t()}catch(w){console.error("Delete error:",w),F.error("Failed to delete account. Please try again.")}finally{d(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl overflow-hidden ${r?"bg-gray-800":"bg-white"}`,children:[s.jsxs("div",{className:`px-6 py-4 flex items-center justify-between ${r?"bg-red-900/50 border-b border-red-800":"bg-red-50 border-b border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${r?"bg-red-800":"bg-red-100"}`,children:s.jsx(ea,{className:"w-5 h-5 text-red-500"})}),s.jsx("h2",{className:`text-lg font-semibold ${r?"text-red-300":"text-red-700"}`,children:"Delete Account"})]}),s.jsx("button",{onClick:t,className:`p-1.5 rounded-lg transition-colors ${r?"hover:bg-red-800 text-gray-400 hover:text-white":"hover:bg-red-100 text-gray-500 hover:text-red-700"}`,children:s.jsx(Ye,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:`p-4 rounded-full ${r?"bg-red-900/30":"bg-red-100"}`,children:s.jsx(os,{className:`w-12 h-12 ${r?"text-red-400":"text-red-500"}`})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:`text-lg font-semibold mb-2 ${r?"text-white":"text-gray-900"}`,children:"Are you sure you want to delete your account?"}),s.jsx("p",{className:`text-sm ${r?"text-red-300":"text-red-600"}`,children:n==null?void 0:n.email})]}),s.jsxs("div",{className:`p-4 rounded-xl flex items-start gap-3 ${r?"bg-yellow-900/30 border border-yellow-700":"bg-yellow-50 border border-yellow-200"}`,children:[s.jsx(Ji,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${r?"text-yellow-400":"text-yellow-600"}`}),s.jsxs("div",{className:`text-sm ${r?"text-yellow-200":"text-yellow-800"}`,children:[s.jsx("p",{className:"font-semibold mb-1",children:"This action cannot be undone."}),s.jsxs("p",{children:["All your data including ",o.length," members across ",i.length," monthly databases will be permanently deleted."]})]})]}),s.jsx("div",{className:`p-4 rounded-xl ${r?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`font-medium text-sm ${r?"text-blue-300":"text-blue-700"}`,children:"Want to save your data first?"}),s.jsx("p",{className:`text-xs mt-1 ${r?"text-blue-400":"text-blue-600"}`,children:"Export all your members as a CSV file"})]}),s.jsxs("button",{onClick:x,disabled:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50",children:[u?s.jsx(m0,{className:"w-4 h-4 animate-spin"}):s.jsx(Qi,{className:"w-4 h-4"}),"Export CSV"]})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:["Type ",s.jsx("span",{className:"font-bold text-red-500",children:"DELETE"})," to confirm"]}),s.jsx("input",{type:"text",value:h,onChange:w=>y(w.target.value),placeholder:"Type DELETE here",className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-red-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-red-500"} focus:outline-none focus:ring-2 focus:ring-red-500/20`})]})]}),s.jsxs("div",{className:`px-6 py-4 flex gap-3 ${r?"bg-gray-900/50 border-t border-gray-700":"bg-gray-50 border-t border-gray-200"}`,children:[s.jsx("button",{onClick:t,disabled:c,className:`flex-1 py-3 rounded-xl font-medium transition-colors ${r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} disabled:opacity-50`,children:"Cancel"}),s.jsx("button",{onClick:v,disabled:c||h!=="DELETE",className:`flex-1 py-3 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 ${h==="DELETE"?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-400 text-gray-600 cursor-not-allowed"} disabled:opacity-50`,children:c?s.jsxs(s.Fragment,{children:[s.jsx(m0,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(os,{className:"w-4 h-4"}),"Delete Account"]})})]})]})}):null},iy=({isOpen:e,onClose:t})=>{const{members:r,attendanceData:n,currentTable:a,availableTables:o}=Ct(),[i,l]=k.useState("all");k.useState(a||"");const[c,d]=k.useState(!1);if(!e)return null;const u=[{id:"all",title:"Export Everything",description:"All members with attendance data for current month",icon:Fm,color:"blue"},{id:"members",title:"Members Only",description:"Export member list without attendance",icon:ft,color:"green"},{id:"attendance",title:"Attendance Only",description:"Export attendance records for current month",icon:dt,color:"purple"},{id:"summary",title:"Attendance Summary",description:"Summary statistics per member",icon:$v,color:"orange"}],p=v=>{if(!v)return[];try{const[w,f]=v.split("_"),g=parseInt(f),b=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(w);if(b===-1)return[];const _=[],j=new Date(g,b,1);for(;j.getDay()!==0;)j.setDate(j.getDate()+1);for(;j.getMonth()===b;)_.push(j.toISOString().split("T")[0]),j.setDate(j.getDate()+7);return _}catch{return[]}},h=()=>{d(!0);try{let v="",w="";const f=p(a);switch(i){case"all":{v=["Name","Gender","Phone",...f.map(j=>new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric"})),"Total Present","Attendance Rate"].join(",")+`
`,r.forEach(j=>{let N=0;const E=f.map(K=>{var ee;const I=(ee=n[K])==null?void 0:ee[j.id];return I===!0?(N++,"Present"):I===!1?"Absent":"Not Marked"}),$=f.length>0?(N/f.length*100).toFixed(1)+"%":"0%",O=[`"${j.name||""}"`,j.gender||"",j.phone||"",...E,N,$];v+=O.join(",")+`
`}),w=`full_export_${a||"data"}.csv`;break}case"members":{v=`Name,Gender,Phone,Created Date
`,r.forEach(_=>{const j=[`"${_.name||""}"`,_.gender||"",_.phone||"",_.created_at?new Date(_.created_at).toLocaleDateString():""];v+=j.join(",")+`
`}),w=`members_${new Date().toISOString().split("T")[0]}.csv`;break}case"attendance":{v=`Member Name,Date,Status
`,r.forEach(_=>{f.forEach(j=>{var E;const N=(E=n[j])==null?void 0:E[_.id];if(N!==void 0){const $=[`"${_.name||""}"`,j,N===!0?"Present":"Absent"];v+=$.join(",")+`
`}})}),w=`attendance_${a||"data"}.csv`;break}case"summary":{v=`Member Name,Gender,Total Sundays,Present,Absent,Not Marked,Attendance Rate
`,r.forEach(_=>{let j=0,N=0,E=0;f.forEach(K=>{var ee;const I=(ee=n[K])==null?void 0:ee[_.id];I===!0?j++:I===!1?N++:E++});const $=f.length>0?(j/f.length*100).toFixed(1)+"%":"0%",O=[`"${_.name||""}"`,_.gender||"",f.length,j,N,E,$];v+=O.join(",")+`
`}),w=`summary_${a||"data"}.csv`;break}default:throw new Error("Invalid export option")}const g=new Blob([v],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(g),b=document.createElement("a");b.href=m,b.download=w,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(m),F.success(`Exported ${r.length} records to ${w}`),t()}catch(v){console.error("Export error:",v),F.error("Failed to export data")}finally{d(!1)}},y=(v,w)=>{const f={blue:w?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 ring-2 ring-blue-500":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-blue-300",green:w?"bg-green-100 dark:bg-green-900/30 border-green-500 ring-2 ring-green-500":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-green-300",purple:w?"bg-purple-100 dark:bg-purple-900/30 border-purple-500 ring-2 ring-purple-500":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-purple-300",orange:w?"bg-orange-100 dark:bg-orange-900/30 border-orange-500 ring-2 ring-orange-500":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-orange-300"};return f[v]||f.blue},x=v=>{const w={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",purple:"text-purple-600 dark:text-purple-400",orange:"text-orange-600 dark:text-orange-400"};return w[v]||w.blue};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Qi,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Export Data"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choose what to export"})]})]}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-900/50 rounded-lg text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(dt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Current: ",s.jsx("strong",{className:"text-gray-900 dark:text-white",children:(a==null?void 0:a.replace("_"," "))||"No table selected"})]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsxs("span",{children:[(r==null?void 0:r.length)||0," members"]})]}),s.jsx("div",{className:"space-y-2",children:u.map(v=>{const w=v.icon,f=i===v.id;return s.jsxs("button",{onClick:()=>l(v.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${y(v.color,f)}`,children:[s.jsx("div",{className:`p-2 rounded-lg ${f?"bg-white dark:bg-gray-800":"bg-gray-100 dark:bg-gray-700"}`,children:s.jsx(w,{className:`w-5 h-5 ${x(v.color)}`})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:v.title}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.description})]}),f&&s.jsx(ws,{className:`w-5 h-5 ${x(v.color)}`})]},v.id)})})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:h,disabled:c||!(r!=null&&r.length),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qi,{className:"w-4 h-4"}),"Export CSV"]})})]})]})]})},G1=({isOpen:e,onClose:t})=>{const{user:r}=Lr();vr();const[n,a]=k.useState(""),[o,i]=k.useState(!1),[l,c]=k.useState([]),[d,u]=k.useState(!1),[p,h]=k.useState("");k.useEffect(()=>{e&&r&&y()},[e,r]);const y=async()=>{if(r){u(!0),h("");try{const{data:f,error:g}=await Ae.from("collaborators").select("*").eq("owner_id",r.id).order("created_at",{ascending:!1});if(g)throw g;c(f||[])}catch(f){console.error("Error fetching collaborators:",f),h("Failed to load collaborators")}finally{u(!1)}}},x=async f=>{if(f.preventDefault(),!n.trim()){F.error("Please enter an email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.trim())){F.error("Please enter a valid email address");return}if(l.some(m=>m.email.toLowerCase()===n.trim().toLowerCase())){F.warning("This email has already been added");return}i(!0),h("");try{const{data:m,error:b}=await Ae.from("collaborators").insert([{owner_id:r.id,email:n.trim().toLowerCase(),status:"pending"}]).select().single();if(b)throw b;const _=window.location.origin+"/DatSer/";try{const{data:{session:j}}=await Ae.auth.getSession(),E=await(await fetch(" https://znuxahdqxencqtsvxvja.supabase.co/functions/v1/send-collaborator-invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j==null?void 0:j.access_token}`},body:JSON.stringify({email:n.trim().toLowerCase(),inviterName:r.email,appUrl:_})})).json();E.success?F.success(`Invitation email sent to ${n}!`):E.error&&(console.warn("Email sending failed:",E.error),F.success("Collaborator added! (Email notification may not have been sent)"))}catch(j){console.warn("Could not send invitation email:",j),F.success("Collaborator added successfully!")}c(j=>[m,...j]),a("")}catch(m){console.error("Error adding collaborator:",m),m.code==="23505"?F.error("This email has already been invited"):F.error("Failed to add collaborator. Please try again."),h("Failed to add collaborator")}finally{i(!1)}},v=async(f,g)=>{try{const{error:m}=await Ae.from("collaborators").delete().eq("id",f).eq("owner_id",r.id);if(m)throw m;c(b=>b.filter(_=>_.id!==f)),F.success(`Removed ${g}`)}catch(m){console.error("Error removing collaborator:",m),F.error("Failed to remove collaborator")}},w=f=>{switch(f){case"accepted":return s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Accepted"});case"rejected":return s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"Rejected"});default:return s.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:"Pending"})}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"shadow-2xl ring-1 max-w-md w-full mx-4 max-h-[90vh] flex flex-col transition-all duration-300 bg-white dark:bg-gray-800 ring-gray-200 dark:ring-gray-700 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(ft,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Share Access"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add people by email to give them access to your database. They'll be able to view and edit all data."})]})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),s.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add collaborator"}),s.jsxs("form",{onSubmit:x,className:"flex space-x-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("input",{type:"email",value:n,onChange:f=>a(f.target.value),placeholder:"email@example.com",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-colors"})]}),s.jsxs("button",{type:"submit",disabled:o||!n.trim(),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ho,{className:"w-4 h-4 mr-1.5"}),o?"Adding...":"Add"]})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s.jsx(ft,{className:"w-4 h-4 inline mr-1.5"}),"People with access (",l.length,")"]})}),d?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):l.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No collaborators yet"}),s.jsx("p",{className:"text-xs mt-1",children:"Add someone using the form above"})]}):s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:f.email.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:f.email}),s.jsx("div",{className:"flex items-center space-x-2 mt-0.5",children:w(f.status)})]})]}),s.jsx("button",{onClick:()=>v(f.id,f.email),className:"p-1.5 text-gray-400 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove collaborator",children:s.jsx(os,{className:"w-4 h-4"})})]},f.id))})]}),p&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[s.jsx(Ji,{className:"w-4 h-4 text-red-500"}),s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:p})]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600",children:s.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors font-medium",children:"Done"})})]})}):null},K1=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Y1=({isOpen:e,onClose:t,user:r,onSuccess:n})=>{const[a,o]=k.useState(null),[i,l]=k.useState(null),[c,d]=k.useState(1),[u,p]=k.useState(0),[h,y]=k.useState(!1),[x,v]=k.useState(null),[w,f]=k.useState("upload"),g=k.useRef(null);k.useRef(null);const m=E=>{var K;const $=(K=E.target.files)==null?void 0:K[0];if(!$)return;if(!$.type.startsWith("image/")){F.error("Please select an image file");return}if($.size>3*1024*1024){F.error("Image must be less than 3MB");return}o($),v(null);const O=URL.createObjectURL($);l(O),d(1),p(0)},b=E=>{v(E),o(null),l(null)},_=k.useCallback(async()=>{if(x){const $=document.createElement("canvas");$.width=96,$.height=96;const O=$.getContext("2d"),K=O.createLinearGradient(0,0,96,96);return K.addColorStop(0,"#6366f1"),K.addColorStop(1,"#8b5cf6"),O.fillStyle=K,O.beginPath(),O.arc(96/2,96/2,96/2,0,Math.PI*2),O.fill(),O.font=`${96/2}px Arial`,O.textAlign="center",O.textBaseline="middle",O.fillText(x,96/2,96/2+2),new Promise(I=>{$.toBlob(I,"image/png",.8)})}return!a||!i?null:new Promise($=>{const O=new Image;O.crossOrigin="anonymous",O.onload=()=>{const K=document.createElement("canvas"),I=96;K.width=I,K.height=I;const ee=K.getContext("2d");ee.clearRect(0,0,I,I),ee.beginPath(),ee.arc(I/2,I/2,I/2,0,Math.PI*2),ee.closePath(),ee.clip();const le=Math.min(O.width,O.height),re=I/le*c,W=(I-O.width*re)/2,L=(I-O.height*re)/2;ee.save(),ee.translate(I/2,I/2),ee.rotate(u*Math.PI/180),ee.translate(-I/2,-I/2),ee.drawImage(O,W,L,O.width*re,O.height*re),ee.restore(),K.toBlob($,"image/jpeg",.6)},O.src=i})},[a,i,c,u,x]),j=async()=>{y(!0);try{const E=await _();if(!E){F.error("No image to save"),y(!1);return}const{data:{session:$},error:O}=await Ae.auth.getSession();if(O||!$){console.log("No valid session, saving to localStorage as fallback");const z=await new Promise(A=>{const B=new FileReader;B.onloadend=()=>A(B.result),B.readAsDataURL(E)});localStorage.setItem("user_avatar_url",z),F.success("Profile photo saved locally!"),n==null||n(),t(),setTimeout(()=>window.location.reload(),500);return}const ee=`${$.user.id}/avatar.${x?"png":"jpg"}`;console.log("Uploading to storage:",ee);const{error:le}=await Ae.storage.from("avatars").upload(ee,E,{upsert:!0,contentType:x?"image/png":"image/jpeg"});if(le){console.error("Storage upload error:",le);const z=await new Promise(A=>{const B=new FileReader;B.onloadend=()=>A(B.result),B.readAsDataURL(E)});localStorage.setItem("user_avatar_url",z),F.success("Profile photo saved locally!"),n==null||n(),t(),setTimeout(()=>window.location.reload(),500);return}const{data:{publicUrl:re}}=Ae.storage.from("avatars").getPublicUrl(ee);console.log("Got public URL:",re);const W=`${re}?t=${Date.now()}`,{error:L}=await Ae.auth.updateUser({data:{avatar_url:W}});L?(console.error("Metadata update error:",L),localStorage.setItem("user_avatar_url",W)):localStorage.removeItem("user_avatar_url"),F.success("Profile photo updated!"),n==null||n(),t(),setTimeout(()=>window.location.reload(),500)}catch(E){console.error("Photo upload error:",E),F.error("Failed to save photo. Please try again.")}finally{y(!1)}},N=()=>{o(null),l(null),v(null),d(1),p(0),t()};return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-animate",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Profile Photo"}),s.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(Ye,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>f("upload"),className:`flex-1 py-3 text-sm font-medium transition-colors ${w==="upload"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:" Upload Photo"}),s.jsx("button",{onClick:()=>f("emoji"),className:`flex-1 py-3 text-sm font-medium transition-colors ${w==="emoji"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:" Choose Emoji"})]}),s.jsx("div",{className:"p-4",children:w==="upload"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700 flex items-center justify-center border-4 border-gray-200 dark:border-gray-600",style:{position:"relative"},children:i?s.jsx("img",{src:i,alt:"Preview",className:"w-full h-full object-cover",style:{transform:`scale(${c}) rotate(${u}deg)`,transition:"transform 0.2s"}}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(f0,{className:"w-12 h-12 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"No image"})]})})}),i&&s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("button",{onClick:()=>d(Math.max(.5,c-.1)),className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Zoom Out",children:s.jsx(Qv,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300 min-w-[50px] text-center",children:[Math.round(c*100),"%"]}),s.jsx("button",{onClick:()=>d(Math.min(2,c+.1)),className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Zoom In",children:s.jsx(Jv,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>p((u+90)%360),className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Rotate",children:s.jsx(Bv,{className:"w-5 h-5"})})]}),s.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:m,className:"hidden"}),s.jsxs("button",{onClick:()=>{var E;return(E=g.current)==null?void 0:E.click()},className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[s.jsx(f0,{className:"w-5 h-5"}),i?"Choose Different Photo":"Select Photo"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-40 h-40 rounded-full overflow-hidden flex items-center justify-center border-4 border-gray-200 dark:border-gray-600",style:{background:x?"linear-gradient(135deg, #6366f1, #8b5cf6)":"#e5e7eb"},children:x?s.jsx("span",{className:"text-7xl",children:x}):s.jsx("span",{className:"text-4xl",children:""})})}),s.jsx("div",{className:"grid grid-cols-8 gap-2 mb-4 max-h-48 overflow-y-auto p-2 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:K1.map(E=>s.jsx("button",{onClick:()=>b(E),className:`text-2xl p-2 rounded-lg transition-all ${x===E?"bg-blue-100 dark:bg-blue-900/50 scale-110 ring-2 ring-blue-500":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:E},E))})]})}),s.jsxs("div",{className:"flex gap-3 p-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:N,className:"flex-1 py-2.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:j,disabled:h||!i&&!x,className:"flex-1 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ht,{className:"w-4 h-4"}),"Save Photo"]})})]})]})}):null},J1=[{id:1,category:"attendance",question:"How do I mark someone as present or absent?",answer:`On the Dashboard, find the member you want to mark. You'll see "Present" (green) and "Absent" (red) buttons next to their name. Simply tap the appropriate button to record their attendance for the selected date.`,quickAction:{type:"navigate",label:"Go to Dashboard",target:"dashboard"},hasVideo:!0},{id:2,category:"attendance",question:"How do I change the attendance date?",answer:"In the Dashboard header, you'll see the current date displayed. Tap on it to open the date picker, then select the Sunday you want to record attendance for. All attendance actions will apply to this selected date.",quickAction:{type:"navigate",label:"Go to Dashboard",target:"dashboard"},hasVideo:!0},{id:3,category:"attendance",question:"Can I mark attendance for multiple people at once?",answer:`Yes! Long-press on any member to enter selection mode. You'll see a green highlight appear. Then tap other members to select them. Once you've selected everyone, use the "Present" or "Absent" buttons at the top to mark them all at once.`,quickAction:null,hasVideo:!0},{id:4,category:"attendance",question:"What happens if I mark the wrong attendance?",answer:'No worries! Just tap the opposite button to change it. For example, if you marked someone as Present but meant Absent, simply tap the "Absent" button to correct it. The change is saved immediately.',quickAction:null,hasVideo:!1},{id:5,category:"members",question:"How do I add a new member?",answer:`Go to the Dashboard and tap the "+" button or "Add Member" option from the menu. Fill in the member's name, gender, phone number, age, and current level. You can also assign tags like "Member", "Regular", or "Newcomer".`,quickAction:{type:"action",label:"Add New Member",action:"openAddMember"},hasVideo:!0},{id:6,category:"members",question:"How do I edit a member's information?",answer:`Find the member on the Dashboard and tap their name to expand their card. You'll see an "Edit" button which opens the Edit Member modal. Here you can update their name, phone number, gender, age, level, and attendance records.`,quickAction:{type:"navigate",label:"Go to Dashboard",target:"dashboard"},hasVideo:!0},{id:7,category:"members",question:"How do I delete a member?",answer:`Expand the member's card by tapping their name, then tap the "Delete" button (trash icon). You'll be asked to confirm before the member is permanently removed. Be careful - this action cannot be undone!`,quickAction:null,hasVideo:!1},{id:8,category:"members",question:"What are member badges/tags?",answer:'Badges help you categorize members. "Member" (blue) indicates official members, "Regular" (green) means they attend consistently, and "Newcomer" (amber) is for new attendees. You can filter by these badges using the filter options.',quickAction:null,hasVideo:!1},{id:9,category:"navigation",question:"How do I switch between months?",answer:`Look at the info bar below the search. You'll see the current month (e.g., "January 2025"). Tap on it to open the Month Picker popup. Select the month you want to view, and the data will update automatically.`,quickAction:{type:"action",label:"Open Month Picker",action:"openMonthPicker"},hasVideo:!0},{id:10,category:"navigation",question:'What is the difference between "All" and "Edited" tabs?',answer:'"All" shows every member in the database. "Edited" shows only members who have attendance recorded for any Sunday in the current month. Use "Edited" to quickly see who has been marked this month.',quickAction:null,hasVideo:!1},{id:11,category:"navigation",question:"How do I search for a member?",answer:"Use the search bar at the top of the Dashboard. Type any part of the member's name and the list will filter in real-time. The search is case-insensitive and matches partial names.",quickAction:{type:"navigate",label:"Go to Dashboard",target:"dashboard"},hasVideo:!1},{id:12,category:"reports",question:"How do I see attendance statistics?",answer:`Go to the "Edited" tab to see members with attendance this month. Each member's card shows their attendance count. For detailed analytics, check the Statistics section in Settings.`,quickAction:{type:"navigate",label:"View Edited Tab",target:"edited"},hasVideo:!0},{id:13,category:"reports",question:"Can I export attendance data?",answer:"Currently, attendance data is stored in your Supabase database. You can access and export it directly from your Supabase dashboard. Go to Table Editor, select your month's table, and use the export function.",quickAction:null,hasVideo:!1},{id:14,category:"reports",question:"How do I see who was absent on a specific Sunday?",answer:'Select the date you want to check using the date picker. Then look at the "Edited" tab - members marked as Absent will have a red indicator. You can also use the filter to show only absent members.',quickAction:null,hasVideo:!1},{id:15,category:"settings",question:"How do I change my profile photo?",answer:"Go to Settings and tap on your profile photo or the camera icon. You can either upload a photo from your device or choose an emoji as your avatar. Crop and adjust as needed, then save.",quickAction:{type:"navigate",label:"Go to Settings",target:"settings"},hasVideo:!0},{id:16,category:"settings",question:"How do I switch between light and dark mode?",answer:"The app automatically follows your device's system theme. To change it, adjust your device's display settings to Light or Dark mode, and the app will update accordingly.",quickAction:null,hasVideo:!1},{id:17,category:"settings",question:"How do I create a new month table?",answer:'In Settings, look for "Create New Month" option. This creates a fresh table for a new month while keeping all your members. Attendance data starts fresh for the new month.',quickAction:{type:"navigate",label:"Go to Settings",target:"settings"},hasVideo:!0},{id:18,category:"settings",question:"How do I sign out?",answer:`Tap on your profile photo in the header to open the profile menu. At the bottom, you'll see a red "Sign Out" button. Tap it to log out of your account.`,quickAction:null,hasVideo:!1},{id:19,category:"filters",question:"How do I filter members?",answer:"Tap the Filter button (funnel icon) next to the search bar at the bottom. A filter panel will open where you can filter by Gender, Education Level, Ministry/Group, and Member Status (Members vs Visitors).",quickAction:{type:"navigate",label:"Go to Dashboard",target:"dashboard"},hasVideo:!1},{id:20,category:"filters",question:"How do I clear all filters?",answer:'In the Filter panel, tap the "Clear All" button at the bottom to remove all active filters. You can also tap individual filter buttons again to deselect them.',quickAction:null,hasVideo:!1},{id:21,category:"filters",question:"What is the Visitor filter?",answer:"The Visitor filter lets you show only visitors (people marked as visiting) or only regular members. This helps you quickly see who are first-time attendees vs regular members.",quickAction:null,hasVideo:!1},{id:22,category:"members",question:"How do I add notes to a member?",answer:`When adding or editing a member, scroll down to find the "Notes" field. You can add any important information about the member here. Notes are displayed in a yellow box when you expand the member's card.`,quickAction:null,hasVideo:!1},{id:23,category:"members",question:"How do I assign ministry tags to a member?",answer:`When adding or editing a member, you'll see a "Ministry/Groups" section with buttons like Choir, Ushers, Youth, etc. Tap to select multiple ministries. These tags help you filter and organize members by their church roles.`,quickAction:null,hasVideo:!1},{id:24,category:"members",question:"How do I mark someone as a visitor?",answer:'When adding or editing a member, toggle the "Mark as Visitor" switch to ON. Visitors will show an amber "Visitor" badge on their card. You can filter to show only visitors using the Filter panel.',quickAction:null,hasVideo:!1},{id:25,category:"members",question:"How do I see a member's attendance history?",answer:`Expand any member's card by tapping their name. Scroll down to see the "Attendance Summary" section which shows their total Present count, Absent count, and attendance rate percentage for the current month.`,quickAction:null,hasVideo:!1},{id:26,category:"admin",question:"How do I access the Admin Panel?",answer:`Go to Settings and tap "Admin Panel". You'll need to enter your account password (the same one you use to sign in) to access admin features. This adds an extra layer of security.`,quickAction:{type:"navigate",label:"Go to Settings",target:"settings"},hasVideo:!1},{id:27,category:"admin",question:'What is the "Stay logged in" option in Admin Panel?',answer:`When logging into the Admin Panel, check "Stay logged in" to keep your admin access for 7 days. Without this, you'll be automatically locked out after 15 minutes of inactivity for security.`,quickAction:null,hasVideo:!1},{id:28,category:"admin",question:"How do I print an attendance sheet?",answer:'In the Admin Panel, tap "Print Attendance Sheet". A new window opens with an editable preview. You can adjust font size, table style, toggle columns, and edit titles before printing. Click "Print" when ready.',quickAction:null,hasVideo:!1},{id:29,category:"admin",question:"How do I manage ministry/group tags?",answer:'In the Admin Panel, find the "Ministry/Groups" section. Here you can add new ministries, edit existing ones (hover and click pencil), or delete them (hover and click trash). Changes sync across the app instantly.',quickAction:null,hasVideo:!1},{id:30,category:"admin",question:"What is badge processing?",answer:'Badge processing automatically assigns badges (Member, Regular, Newcomer) based on attendance patterns. It requires all Sundays in the month to be marked. Members with 2+ Sundays get "Member", those with 3+ consecutive get "Regular".',quickAction:null,hasVideo:!1},{id:31,category:"admin",question:"How do I lock the Admin Panel?",answer:'Click the red "Lock" button in the Admin Panel header. This immediately locks the panel and requires your password to re-enter. The panel also auto-locks after 15 minutes of inactivity (unless "Stay logged in" is checked).',quickAction:null,hasVideo:!1}],Q1=[{id:"all",label:"All",icon:No},{id:"attendance",label:"Attendance",icon:Lm},{id:"members",label:"Members",icon:ft},{id:"filters",label:"Filters",icon:lo},{id:"admin",label:"Admin",icon:uo},{id:"navigation",label:"Navigation",icon:dt},{id:"reports",label:"Reports",icon:Su},{id:"settings",label:"Settings",icon:uo}],X1=e=>{switch(e){case"attendance":return Lm;case"members":return ft;case"filters":return lo;case"admin":return uo;case"navigation":return dt;case"reports":return Su;case"settings":return uo;default:return No}},Z1=({onBack:e,onNavigate:t})=>{const[r,n]=k.useState(""),[a,o]=k.useState("all"),[i,l]=k.useState(new Set),c=k.useRef(null),[d,u]=k.useState(!1),[p,h]=k.useState(!1),y=()=>{const g=c.current;if(!g)return;const{scrollLeft:m,scrollWidth:b,clientWidth:_}=g;u(m>0),h(m<b-_-5)};k.useEffect(()=>{y();const g=c.current;return g&&(g.addEventListener("scroll",y),window.addEventListener("resize",y)),()=>{g&&g.removeEventListener("scroll",y),window.removeEventListener("resize",y)}},[]);const x=g=>{const m=c.current;if(!m)return;const b=200;m.scrollBy({left:g==="left"?-b:b,behavior:"smooth"})},v=k.useMemo(()=>J1.filter(g=>{const m=a==="all"||g.category===a,b=r===""||g.question.toLowerCase().includes(r.toLowerCase())||g.answer.toLowerCase().includes(r.toLowerCase());return m&&b}),[r,a]),w=g=>{l(m=>{const b=new Set(m);return b.has(g)?b.delete(g):b.add(g),b})},f=g=>{g&&(g.type==="navigate"?t==null||t(g.target):g.type==="action"&&(g.action==="openAddMember"?t==null||t("dashboard",{openModal:"addMember"}):g.action==="openMonthPicker"&&(t==null||t("dashboard",{openModal:"monthPicker"}))))};return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"sticky top-0 z-20 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors btn-press",children:s.jsx(Im,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(No,{className:"w-6 h-6 text-blue-500"}),"Help Center"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Find answers to common questions"})]})]})})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs("div",{className:"relative animate-fade-in-up",children:[s.jsx(co,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search questions...",value:r,onChange:g=>n(g.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm transition-all input-focus"}),r&&s.jsx("button",{onClick:()=>n(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"Clear"})]}),s.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"50ms"},children:[d&&s.jsx("button",{onClick:()=>x("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-8 h-8 flex items-center justify-center bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all","aria-label":"Scroll left",children:s.jsx($s,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),s.jsx("div",{ref:c,className:`flex gap-2 overflow-x-auto pb-2 scrollbar-hide scroll-smooth ${d?"pl-10":""} ${p?"pr-10":""}`,children:Q1.map(g=>{const m=g.icon,b=a===g.id;return s.jsxs("button",{onClick:()=>o(g.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all btn-press ${b?"bg-blue-500 text-white shadow-lg shadow-blue-500/25":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[s.jsx(m,{className:"w-4 h-4"}),g.label]},g.id)})}),p&&s.jsx("button",{onClick:()=>x("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-8 h-8 flex items-center justify-center bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all","aria-label":"Scroll right",children:s.jsx(io,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm animate-fade-in",children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[v.length," ",v.length===1?"question":"questions"," found"]}),r&&s.jsxs("span",{className:"text-blue-500",children:['Searching for "',r,'"']})]}),s.jsx("div",{className:"space-y-3",children:v.map((g,m)=>{const b=i.has(g.id),_=X1(g.category);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-all card-hover animate-fade-in-up",style:{animationDelay:`${m*30}ms`},children:[s.jsxs("button",{onClick:()=>w(g.id),className:"w-full flex items-start gap-4 p-4 text-left transition-colors hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("div",{className:`p-2 rounded-xl flex-shrink-0 ${b?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:s.jsx(_,{className:`w-5 h-5 ${b?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-left",children:g.question}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 capitalize",children:g.category})]}),s.jsx("div",{className:`p-1 transition-transform flex-shrink-0 ${b?"rotate-180":""}`,children:s.jsx(tr,{className:"w-5 h-5 text-gray-400"})})]}),b&&s.jsx("div",{className:"px-4 pb-4 pt-0 animate-fade-in",children:s.jsxs("div",{className:"pl-14 space-y-4",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:g.answer}),g.hasVideo&&s.jsxs("div",{className:"relative overflow-hidden rounded-xl aspect-video bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800",children:[s.jsxs("div",{className:"absolute inset-0 backdrop-blur-sm bg-gray-900/30 flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/30",children:s.jsx(Fv,{className:"w-8 h-8 text-white ml-1"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-white font-medium text-sm",children:"Video Tutorial"}),s.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[s.jsx(ta,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-xs text-white/80",children:"Coming Soon"})]})]})]}),s.jsx("div",{className:"absolute top-4 left-4 w-20 h-3 bg-white/20 rounded-full"}),s.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-white/20 rounded-lg"}),s.jsx("div",{className:"absolute bottom-4 left-4 right-4 h-2 bg-white/20 rounded-full"})]}),g.quickAction&&s.jsxs("button",{onClick:()=>f(g.quickAction),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-xl text-sm font-medium hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors btn-press",children:[s.jsx(Dv,{className:"w-4 h-4"}),g.quickAction.label]})]})})]},g.id)})}),v.length===0&&s.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-4",children:s.jsx(co,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No questions found"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm max-w-sm mx-auto",children:"Try adjusting your search or browse a different category"}),s.jsx("button",{onClick:()=>{n(""),o("all")},className:"mt-4 px-4 py-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg text-sm font-medium transition-colors btn-press",children:"Clear filters"})]}),s.jsxs("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700 mt-8",children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Can't find what you're looking for?"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-500",children:[s.jsx(Is,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"More help coming soon"})]})]})]})]})},ej=({onBack:e})=>{const{user:t,signOut:r,preferences:n}=Lr(),{isDarkMode:a,toggleTheme:o}=vr(),{members:i,monthlyTables:l,currentTable:c,setCurrentTable:d}=Ct(),[u,p]=k.useState("account"),[h,y]=k.useState(!1),[x,v]=k.useState(!1),[w,f]=k.useState(!1),[g,m]=k.useState(!1),[b,_]=k.useState(!1),[j,N]=k.useState(!1),E=[{id:"account",label:"Account",icon:sn},{id:"workspace",label:"Workspace",icon:qs},{id:"team",label:"Team & Sharing",icon:ft},{id:"data",label:"Data Management",icon:Fm},{id:"appearance",label:"Appearance",icon:zv},{id:"help",label:"Help Center",icon:No,highlight:!0},{id:"danger",label:"Danger Zone",icon:ea,danger:!0}],$=async()=>{try{await r(),F.success("Signed out successfully")}catch{F.error("Failed to sign out")}},O=()=>{var L,z,A,B,U;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Account Settings"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your account information and security"})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[(()=>{var _e,Me,Oe;const ye=(typeof window<"u"?localStorage.getItem("user_avatar_url"):null)||((_e=t==null?void 0:t.user_metadata)==null?void 0:_e.avatar_url);return ye?s.jsx("img",{src:ye,alt:"Profile",className:"w-16 h-16 min-w-[64px] min-h-[64px] rounded-full object-cover border-2 border-white dark:border-gray-600 shadow-md"}):s.jsx("div",{className:"w-16 h-16 min-w-[64px] min-h-[64px] rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold shadow-md",children:((Oe=(Me=t==null?void 0:t.email)==null?void 0:Me[0])==null?void 0:Oe.toUpperCase())||"U"})})(),s.jsx("button",{onClick:()=>_(!0),className:"absolute -bottom-1 -right-1 p-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-colors btn-press",title:"Change photo",children:s.jsx(qm,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:((L=t==null?void 0:t.user_metadata)==null?void 0:L.full_name)||((z=t==null?void 0:t.email)==null?void 0:z.split("@")[0])||"User"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1 truncate",children:[s.jsx(Xi,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:t==null?void 0:t.email})]}),s.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:((A=t==null?void 0:t.app_metadata)==null?void 0:A.provider)==="google"?" Signed in with Google":" Email authentication"})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[s.jsx(Cu,{className:"w-4 h-4"}),"Security"]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Password"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:((B=t==null?void 0:t.app_metadata)==null?void 0:B.provider)==="google"?"Managed by Google":"Change your password"})]}),s.jsx("button",{onClick:()=>{var G;((G=t==null?void 0:t.app_metadata)==null?void 0:G.provider)==="google"?F.info("Your account is secured via Google. Manage it at myaccount.google.com"):F.info("Password reset link sent to your email")},className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:((U=t==null?void 0:t.app_metadata)==null?void 0:U.provider)==="google"?"View":"Change"})]}),s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Sign Out"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sign out of your account"})]}),s.jsx("button",{onClick:$,className:"px-3 py-1.5 text-sm bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Sign Out"})]})]})]})]})},K=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Workspace Settings"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure your workspace and organization"})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-4 text-white",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:s.jsx(qs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm opacity-80",children:"Current Workspace"}),s.jsx("h4",{className:"font-semibold text-lg",children:(n==null?void 0:n.workspace_name)||"TMH Teen Ministry"})]})]})}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("button",{onClick:()=>v(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(qs,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Edit Workspace"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Change name and preferences"})]})]}),s.jsx($s,{className:"w-5 h-5 text-gray-400 rotate-180"})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(dt,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Current Month"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select active month database"})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:c||"",onChange:L=>d(L.target.value),className:"w-full p-3 pl-4 pr-10 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all cursor-pointer shadow-sm",children:l==null?void 0:l.map(L=>s.jsx("option",{value:L,className:"bg-white dark:bg-gray-800 py-2",children:L.replace("_"," ")},L))}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500 dark:text-gray-400 group-hover:text-blue-500 transition-colors",children:s.jsx(tr,{className:"w-5 h-5"})})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(i==null?void 0:i.length)||0}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Members"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(l==null?void 0:l.length)||0}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Databases"})]})]})]}),I=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Team & Sharing"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage who has access to your workspace"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:s.jsx(ho,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Invite Team Members"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share access to your workspace with others"})]})]}),s.jsxs("button",{onClick:()=>y(!0),className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4"}),"Share Access"]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[s.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(ki,{className:"w-4 h-4"}),"Permission Levels"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4 text-green-500"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Owner:"})," Full access, can delete workspace"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4 text-blue-500"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Editor:"})," Can view and edit data"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Viewer:"})," Read-only access"]})]})]})]})]}),ee=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Data Management"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Export, import, and manage your data"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("button",{onClick:()=>m(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(Qi,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Export Data"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Download your data as CSV"})]})]}),s.jsx($s,{className:"w-5 h-5 text-gray-400 rotate-180"})]}),s.jsxs("button",{onClick:()=>F.info("Import feature coming soon!"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Gv,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Import Data"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Import members from CSV"})]})]}),s.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 px-2 py-1 rounded",children:"Soon"})]}),s.jsxs("button",{onClick:()=>F.info("Cleanup duplicates in Dashboard  Duplicates tab"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Vm,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Clean Duplicates"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Find and merge duplicate members"})]})]}),s.jsx($s,{className:"w-5 h-5 text-gray-400 rotate-180"})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Storage Used"}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(i==null?void 0:i.length)||0," records"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(((i==null?void 0:i.length)||0)/1e3*100,100)}%`}})}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Free tier: Up to 1,000 members"})]})]}),le=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Appearance"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customize how Datsar looks"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Theme"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>{a&&o()},className:`p-4 rounded-xl border-2 transition-all ${a?"border-gray-200 dark:border-gray-700 hover:border-gray-300":"border-blue-500 bg-blue-50 dark:bg-blue-900/20"}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"p-3 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx(Gm,{className:"w-6 h-6 text-yellow-500"})}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Light"}),!a&&s.jsx(ws,{className:"w-5 h-5 text-blue-600"})]})}),s.jsx("button",{onClick:()=>{a||o()},className:`p-4 rounded-xl border-2 transition-all ${a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"p-3 bg-gray-800 border border-gray-700 rounded-lg shadow-sm",children:s.jsx(Hm,{className:"w-6 h-6 text-blue-400"})}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Dark"}),a&&s.jsx(ws,{className:"w-5 h-5 text-blue-400"})]})})]})]})]}),re=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-1",children:"Danger Zone"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Irreversible and destructive actions"})]}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(ea,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-red-700 dark:text-red-400",children:"Delete Account"}),s.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mb-3",children:"Permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(os,{className:"w-4 h-4"}),"Delete Account"]})]})]})})]}),W=()=>{switch(u){case"account":return O();case"workspace":return K();case"team":return I();case"data":return ee();case"appearance":return le();case"danger":return re();default:return O()}};return j?s.jsx(Z1,{onBack:()=>N(!1),onNavigate:(L,z)=>{N(!1),(L==="dashboard"||L==="settings")&&(e==null||e())}}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx($s,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"md:w-64 flex-shrink-0",children:s.jsx("nav",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:E.map(L=>{const z=L.icon,A=u===L.id;return s.jsxs("button",{onClick:()=>{L.id==="help"?N(!0):p(L.id)},className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors btn-press ${A?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-l-2 border-blue-600":L.danger?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10":L.highlight?"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[s.jsx(z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:L.label}),L.highlight&&s.jsx("span",{className:"ml-auto text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full",children:"New"})]},L.id)})})}),s.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:W()})]})}),s.jsx(G1,{isOpen:h,onClose:()=>y(!1),user:t}),s.jsx(ay,{isOpen:x,onClose:()=>v(!1)}),s.jsx(oy,{isOpen:w,onClose:()=>f(!1)}),s.jsx(iy,{isOpen:g,onClose:()=>m(!1)}),s.jsx(Y1,{isOpen:b,onClose:()=>_(!1),user:t})]})},tj=({isOpen:e,onClose:t,onNavigate:r})=>{var O;const{user:n,preferences:a,updatePreference:o}=Lr(),{members:i,currentTable:l,addMember:c}=Ct(),[d,u]=k.useState(0),[p,h]=k.useState((a==null?void 0:a.workspace_name)||""),[y,x]=k.useState(!1),[v,w]=k.useState(""),[f,g]=k.useState("male"),m=async()=>{if(v.trim()){x(!0);try{await c({full_name:v,gender:f,current_level:"Member",phone_number:"0000000000",age:18,is_visitor:!1}),w(""),x(!1)}catch(K){console.error(K),x(!1)}}},b=[{id:"welcome",title:"Welcome to TMH Teen Ministry",description:"Let's get you set up in just a few steps",icon:ta,color:"from-blue-500 to-purple-600"},{id:"workspace",title:"Name Your Workspace",description:"Give your church or organization a name",icon:qs,color:"from-green-500 to-emerald-600"},{id:"members",title:"Add Your First Member",description:"Start building your attendance list",icon:ft,color:"from-orange-500 to-amber-600"},{id:"attendance",title:"Mark Attendance",description:"Learn how to track attendance",icon:dt,color:"from-pink-500 to-rose-600"},{id:"complete",title:"You're All Set!",description:"Start managing your attendance",icon:Is,color:"from-emerald-500 to-green-600"}],_=async()=>{if(d===1){if(!p.trim()&&!(a!=null&&a.workspace_name))return;if(p.trim()){x(!0);try{await o("workspace_name",p.trim())}catch(K){console.error("Failed to save workspace name:",K);return}finally{x(!1)}}}d<b.length-1&&u(d+1)},j=()=>{d>0&&u(d-1)},N=K=>{t(),K==="addMember"?r==null||r("dashboard",{openModal:"addMember"}):K==="dashboard"?r==null||r("dashboard"):K==="settings"&&(r==null||r("settings"))},E=()=>{localStorage.setItem("onboardingComplete","true"),t()};if(!e)return null;const $=b[d].icon;return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in",children:[s.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${(d+1)/b.length*100}%`}})}),s.jsx("div",{className:"flex justify-center gap-2 pt-4 px-6",children:b.map((K,I)=>s.jsx("button",{onClick:()=>I<d&&u(I),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${I===d?"bg-blue-500 text-white scale-110":I<d?"bg-green-500 text-white cursor-pointer hover:scale-105":"bg-gray-200 dark:bg-gray-700 text-gray-400"}`,children:I<d?s.jsx(Ht,{className:"w-4 h-4"}):s.jsx("span",{className:"text-xs font-bold",children:I+1})},K.id))}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:`bg-gradient-to-br ${b[d].color} rounded-2xl p-6 text-white text-center mb-6`,children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx($,{className:"w-8 h-8"})}),s.jsx("h2",{className:"text-xl font-bold mb-1",children:b[d].title}),s.jsx("p",{className:"text-white/80 text-sm",children:b[d].description})]}),s.jsxs("div",{className:"min-h-[150px]",children:[d===0&&s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Hi ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:((O=n==null?void 0:n.user_metadata)==null?void 0:O.full_name)||"there"}),"! "]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"This quick setup will help you get started with tracking attendance for your ministry."}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 text-center",children:[s.jsx(ft,{className:"w-6 h-6 text-blue-500 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Manage Members"})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 text-center",children:[s.jsx(dt,{className:"w-6 h-6 text-green-500 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Track Attendance"})]})]})]}),d===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Workspace Name"}),s.jsx("input",{type:"text",value:p,onChange:K=>h(K.target.value),placeholder:"e.g., TMH Teen Ministry, Grace Chapel Youth",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This name will appear in your dashboard and reports. You can change it later in Settings."}),(a==null?void 0:a.workspace_name)&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[s.jsx(Is,{className:"w-4 h-4"}),"Workspace name saved!"]})]}),d===2&&s.jsx("div",{className:"space-y-4",children:(i==null?void 0:i.length)>0&&!y?s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto",children:s.jsx(Is,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("p",{className:"text-green-600 dark:text-green-400 font-medium",children:["Great! You have ",i.length," member",i.length!==1?"s":"","."]}),s.jsx("button",{onClick:()=>x(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"+ Add Another"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),s.jsx("input",{type:"text",value:v,onChange:K=>w(K.target.value),placeholder:"e.g. John Doe",className:"w-full px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 outline-none transition-all"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"gender",checked:f==="male",onChange:()=>g("male"),className:"text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Male"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"gender",checked:f==="female",onChange:()=>g("female"),className:"text-pink-600"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Female"})]})]}),s.jsx("div",{className:"flex gap-2 pt-2",children:s.jsx("button",{onClick:m,disabled:!v.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl transition-colors disabled:opacity-50 text-sm font-medium",children:"Add Member"})})]}),s.jsx("p",{className:"text-xs text-center text-gray-400",children:"Optional  You can add more details later"})]})}),d===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"1"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Select a ",s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Sunday date"})," from the date picker"]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"2"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Tap ",s.jsx("span",{className:"text-green-600 font-medium",children:"Present"})," or ",s.jsx("span",{className:"text-red-600 font-medium",children:"Absent"})," for each member"]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"3"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Long-press members to ",s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"bulk select"})," multiple at once"]})]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Attendance is saved automatically - no need to hit save!"})]}),d===4&&s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto",children:s.jsx(Is,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"You're ready to start managing attendance!"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[s.jsxs("button",{onClick:()=>N("dashboard"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 text-white font-medium rounded-xl hover:bg-blue-600 transition-colors",children:[s.jsx(dt,{className:"w-4 h-4"}),"Dashboard"]}),s.jsxs("button",{onClick:()=>N("settings"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(uo,{className:"w-4 h-4"}),"Settings"]})]})]})]})]}),s.jsxs("div",{className:"p-6 pt-0 flex items-center justify-between",children:[d>0&&d<b.length-1?s.jsxs("button",{onClick:j,className:"flex items-center gap-1 px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[s.jsx($s,{className:"w-4 h-4"}),"Back"]}):s.jsx("div",{}),d<b.length-1?s.jsx("button",{onClick:_,disabled:d===1&&!p.trim()&&!(a!=null&&a.workspace_name),className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[d===0?"Let's Start":d===1?"Save & Continue":"Next",s.jsx(io,{className:"w-4 h-4"})]})}):s.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all",children:[s.jsx(Ht,{className:"w-4 h-4"}),"Complete Setup"]})]}),d<b.length-1&&s.jsx("div",{className:"text-center pb-4",children:s.jsx("button",{onClick:E,className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:"Skip setup for now"})})]})})};var _l={exports:{}},ly={},cy={exports:{}},rj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nj=rj,sj=nj;function dy(){}function uy(){}uy.resetWarningCache=dy;var aj=function(){function e(n,a,o,i,l,c){if(c!==sj){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uy,resetWarningCache:dy};return r.PropTypes=r,r};cy.exports=aj();var hy=cy.exports;const oj=Pd(vv);var ut={},Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.dontSetMe=uj;Gr.findInArray=ij;Gr.int=dj;Gr.isFunction=lj;Gr.isNum=cj;function ij(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function lj(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function cj(e){return typeof e=="number"&&!isNaN(e)}function dj(e){return parseInt(e,10)}function uj(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}var us={};Object.defineProperty(us,"__esModule",{value:!0});us.browserPrefixToKey=fy;us.browserPrefixToStyle=hj;us.default=void 0;us.getPrefix=gy;const xc=["Moz","Webkit","O","ms"];function gy(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const r=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!r||t in r)return"";for(let n=0;n<xc.length;n++)if(fy(t,xc[n])in r)return xc[n];return""}function fy(e,t){return t?"".concat(t).concat(gj(e)):e}function hj(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function gj(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}us.default=gy();Object.defineProperty(ut,"__esModule",{value:!0});ut.addClassName=yy;ut.addEvent=pj;ut.addUserSelectStyles=Ej;ut.createCSSTransform=jj;ut.createSVGTransform=Nj;ut.getTouch=_j;ut.getTouchIdentifier=Sj;ut.getTranslation=Fu;ut.innerHeight=vj;ut.innerWidth=wj;ut.matchesSelector=py;ut.matchesSelectorAndParentsTo=mj;ut.offsetXYFromParent=kj;ut.outerHeight=xj;ut.outerWidth=bj;ut.removeClassName=xy;ut.removeEvent=yj;ut.removeUserSelectStyles=Cj;var cr=Gr,Y0=fj(us);function my(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(my=function(n){return n?r:t})(e)}function fj(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=my(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}let si="";function py(e,t){return si||(si=(0,cr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,cr.isFunction)(e[r])})),(0,cr.isFunction)(e[si])?e[si](t):!1}function mj(e,t,r){let n=e;do{if(py(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function pj(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function yj(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function xj(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,cr.int)(r.borderTopWidth),t+=(0,cr.int)(r.borderBottomWidth),t}function bj(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,cr.int)(r.borderLeftWidth),t+=(0,cr.int)(r.borderRightWidth),t}function vj(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,cr.int)(r.paddingTop),t-=(0,cr.int)(r.paddingBottom),t}function wj(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,cr.int)(r.paddingLeft),t-=(0,cr.int)(r.paddingRight),t}function kj(e,t,r){const a=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-a.left)/r,i=(e.clientY+t.scrollTop-a.top)/r;return{x:o,y:i}}function jj(e,t){const r=Fu(e,t,"px");return{[(0,Y0.browserPrefixToKey)("transform",Y0.default)]:r}}function Nj(e,t){return Fu(e,t,"")}function Fu(e,t,r){let{x:n,y:a}=e,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){const i="".concat(typeof t.x=="string"?t.x:t.x+r),l="".concat(typeof t.y=="string"?t.y:t.y+r);o="translate(".concat(i,", ").concat(l,")")+o}return o}function _j(e,t){return e.targetTouches&&(0,cr.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,cr.findInArray)(e.changedTouches,r=>t===r.identifier)}function Sj(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function Ej(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&yy(e.body,"react-draggable-transparent-selection")}function Cj(e){if(e)try{if(e.body&&xy(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function yy(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function xy(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.canDragX=Pj;Kr.canDragY=Oj;Kr.createCoreData=Dj;Kr.createDraggableData=Rj;Kr.getBoundPosition=Tj;Kr.getControlPosition=Mj;Kr.snapToGrid=Aj;var nr=Gr,Ls=ut;function Tj(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:Ij(n);const a=Uu(e);if(typeof n=="string"){const{ownerDocument:o}=a,i=o.defaultView;let l;if(n==="parent"?l=a.parentNode:l=o.querySelector(n),!(l instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,d=i.getComputedStyle(a),u=i.getComputedStyle(c);n={left:-a.offsetLeft+(0,nr.int)(u.paddingLeft)+(0,nr.int)(d.marginLeft),top:-a.offsetTop+(0,nr.int)(u.paddingTop)+(0,nr.int)(d.marginTop),right:(0,Ls.innerWidth)(c)-(0,Ls.outerWidth)(a)-a.offsetLeft+(0,nr.int)(u.paddingRight)-(0,nr.int)(d.marginRight),bottom:(0,Ls.innerHeight)(c)-(0,Ls.outerHeight)(a)-a.offsetTop+(0,nr.int)(u.paddingBottom)-(0,nr.int)(d.marginBottom)}}return(0,nr.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,nr.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,nr.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,nr.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function Aj(e,t,r){const n=Math.round(t/e[0])*e[0],a=Math.round(r/e[1])*e[1];return[n,a]}function Pj(e){return e.props.axis==="both"||e.props.axis==="x"}function Oj(e){return e.props.axis==="both"||e.props.axis==="y"}function Mj(e,t,r){const n=typeof t=="number"?(0,Ls.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const a=Uu(r),o=r.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,Ls.offsetXYFromParent)(n||e,o,r.props.scale)}function Dj(e,t,r){const n=!(0,nr.isNum)(e.lastX),a=Uu(e);return n?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:a,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function Rj(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function Ij(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Uu(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Sl={},El={};Object.defineProperty(El,"__esModule",{value:!0});El.default=$j;function $j(){}Object.defineProperty(Sl,"__esModule",{value:!0});Sl.default=void 0;var bc=zj(k),Kt=Bu(hy),Lj=Bu(jo),Mt=ut,fn=Kr,vc=Gr,wa=Bu(El);function Bu(e){return e&&e.__esModule?e:{default:e}}function by(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(by=function(n){return n?r:t})(e)}function zj(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=by(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function Ft(e,t,r){return t=Fj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fj(e){var t=Uj(e,"string");return typeof t=="symbol"?t:String(t)}function Uj(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Cr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let mn=Cr.mouse,Cl=class extends bc.Component{constructor(){super(...arguments),Ft(this,"dragging",!1),Ft(this,"lastX",NaN),Ft(this,"lastY",NaN),Ft(this,"touchIdentifier",null),Ft(this,"mounted",!1),Ft(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Mt.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,Mt.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&t.preventDefault();const a=(0,Mt.getTouchIdentifier)(t);this.touchIdentifier=a;const o=(0,fn.getControlPosition)(t,a,this);if(o==null)return;const{x:i,y:l}=o,c=(0,fn.createCoreData)(this,i,l);(0,wa.default)("DraggableCore: handleDragStart: %j",c),(0,wa.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Mt.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=l,(0,Mt.addEvent)(n,mn.move,this.handleDrag),(0,Mt.addEvent)(n,mn.stop,this.handleDragStop))}),Ft(this,"handleDrag",t=>{const r=(0,fn.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=a-this.lastY;if([l,c]=(0,fn.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,a=this.lastY+c}const o=(0,fn.createCoreData)(this,n,a);if((0,wa.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(t,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=a}),Ft(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,fn.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:a}=r;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,d=a-this.lastY||0;[c,d]=(0,fn.snapToGrid)(this.props.grid,c,d),n=this.lastX+c,a=this.lastY+d}const o=(0,fn.createCoreData)(this,n,a);if(this.props.onStop(t,o)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Mt.removeUserSelectStyles)(l.ownerDocument),(0,wa.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,wa.default)("DraggableCore: Removing handlers"),(0,Mt.removeEvent)(l.ownerDocument,mn.move,this.handleDrag),(0,Mt.removeEvent)(l.ownerDocument,mn.stop,this.handleDragStop))}),Ft(this,"onMouseDown",t=>(mn=Cr.mouse,this.handleDragStart(t))),Ft(this,"onMouseUp",t=>(mn=Cr.mouse,this.handleDragStop(t))),Ft(this,"onTouchStart",t=>(mn=Cr.touch,this.handleDragStart(t))),Ft(this,"onTouchEnd",t=>(mn=Cr.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Mt.addEvent)(t,Cr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,Mt.removeEvent)(r,Cr.mouse.move,this.handleDrag),(0,Mt.removeEvent)(r,Cr.touch.move,this.handleDrag),(0,Mt.removeEvent)(r,Cr.mouse.stop,this.handleDragStop),(0,Mt.removeEvent)(r,Cr.touch.stop,this.handleDragStop),(0,Mt.removeEvent)(t,Cr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Mt.removeUserSelectStyles)(r)}}findDOMNode(){var t,r;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(r=this.props)===null||r===void 0||(r=r.nodeRef)===null||r===void 0?void 0:r.current:Lj.default.findDOMNode(this)}render(){return bc.cloneElement(bc.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Sl.default=Cl;Ft(Cl,"displayName","DraggableCore");Ft(Cl,"propTypes",{allowAnyClick:Kt.default.bool,children:Kt.default.node.isRequired,disabled:Kt.default.bool,enableUserSelectHack:Kt.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Kt.default.arrayOf(Kt.default.number),handle:Kt.default.string,cancel:Kt.default.string,nodeRef:Kt.default.object,onStart:Kt.default.func,onDrag:Kt.default.func,onStop:Kt.default.func,onMouseDown:Kt.default.func,scale:Kt.default.number,className:vc.dontSetMe,style:vc.dontSetMe,transform:vc.dontSetMe});Ft(Cl,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=h(k),r=u(hy),n=u(jo),a=u(oj),o=ut,i=Kr,l=Gr,c=u(Sl),d=u(El);function u(g){return g&&g.__esModule?g:{default:g}}function p(g){if(typeof WeakMap!="function")return null;var m=new WeakMap,b=new WeakMap;return(p=function(_){return _?b:m})(g)}function h(g,m){if(!m&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var b=p(m);if(b&&b.has(g))return b.get(g);var _={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in g)if(N!=="default"&&Object.prototype.hasOwnProperty.call(g,N)){var E=j?Object.getOwnPropertyDescriptor(g,N):null;E&&(E.get||E.set)?Object.defineProperty(_,N,E):_[N]=g[N]}return _.default=g,b&&b.set(g,_),_}function y(){return y=Object.assign?Object.assign.bind():function(g){for(var m=1;m<arguments.length;m++){var b=arguments[m];for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(g[_]=b[_])}return g},y.apply(this,arguments)}function x(g,m,b){return m=v(m),m in g?Object.defineProperty(g,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[m]=b,g}function v(g){var m=w(g,"string");return typeof m=="symbol"?m:String(m)}function w(g,m){if(typeof g!="object"||g===null)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var _=b.call(g,m||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(g)}class f extends t.Component{static getDerivedStateFromProps(m,b){let{position:_}=m,{prevPropsPosition:j}=b;return _&&(!j||_.x!==j.x||_.y!==j.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:j}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(m){super(m),x(this,"onDragStart",(b,_)=>{if((0,d.default)("Draggable: onDragStart: %j",_),this.props.onStart(b,(0,i.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(b,_)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",_);const j=(0,i.createDraggableData)(this,_),N={x:j.x,y:j.y,slackX:0,slackY:0};if(this.props.bounds){const{x:$,y:O}=N;N.x+=this.state.slackX,N.y+=this.state.slackY;const[K,I]=(0,i.getBoundPosition)(this,N.x,N.y);N.x=K,N.y=I,N.slackX=this.state.slackX+($-N.x),N.slackY=this.state.slackY+(O-N.y),j.x=N.x,j.y=N.y,j.deltaX=N.x-this.state.x,j.deltaY=N.y-this.state.y}if(this.props.onDrag(b,j)===!1)return!1;this.setState(N)}),x(this,"onDragStop",(b,_)=>{if(!this.state.dragging||this.props.onStop(b,(0,i.createDraggableData)(this,_))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",_);const N={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:$,y:O}=this.props.position;N.x=$,N.y=O}this.setState(N)}),this.state={dragging:!1,dragged:!1,x:m.position?m.position.x:m.defaultPosition.x,y:m.position?m.position.y:m.defaultPosition.y,prevPropsPosition:{...m.position},slackX:0,slackY:0,isElementSVG:!1},m.position&&!(m.onDrag||m.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var m,b;return(m=(b=this.props)===null||b===void 0||(b=b.nodeRef)===null||b===void 0?void 0:b.current)!==null&&m!==void 0?m:n.default.findDOMNode(this)}render(){const{axis:m,bounds:b,children:_,defaultPosition:j,defaultClassName:N,defaultClassNameDragging:E,defaultClassNameDragged:$,position:O,positionOffset:K,scale:I,...ee}=this.props;let le={},re=null;const L=!!!O||this.state.dragging,z=O||j,A={x:(0,i.canDragX)(this)&&L?this.state.x:z.x,y:(0,i.canDragY)(this)&&L?this.state.y:z.y};this.state.isElementSVG?re=(0,o.createSVGTransform)(A,K):le=(0,o.createCSSTransform)(A,K);const B=(0,a.default)(_.props.className||"",N,{[E]:this.state.dragging,[$]:this.state.dragged});return t.createElement(c.default,y({},ee,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(_),{className:B,style:{..._.props.style,...le},transform:re}))}}e.default=f,x(f,"displayName","Draggable"),x(f,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),x(f,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ly);const{default:vy,DraggableCore:Bj}=ly;_l.exports=vy;_l.exports.default=vy;_l.exports.DraggableCore=Bj;var Hj=_l.exports;const Wj=bg(Hj);var mt=globalThis&&globalThis.__assign||function(){return mt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},mt.apply(this,arguments)},J0={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Q0={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},ai={width:"20px",height:"20px",position:"absolute",zIndex:1},qj={top:mt(mt({},J0),{top:"-5px"}),right:mt(mt({},Q0),{left:void 0,right:"-5px"}),bottom:mt(mt({},J0),{top:void 0,bottom:"-5px"}),left:mt(mt({},Q0),{left:"-5px"}),topRight:mt(mt({},ai),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:mt(mt({},ai),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:mt(mt({},ai),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:mt(mt({},ai),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Vj=k.memo(function(e){var t=e.onResizeStart,r=e.direction,n=e.children,a=e.replaceStyles,o=e.className,i=k.useCallback(function(d){t(d,r)},[t,r]),l=k.useCallback(function(d){t(d,r)},[t,r]),c=k.useMemo(function(){return mt(mt({position:"absolute",userSelect:"none"},qj[r]),a??{})},[a,r]);return s.jsx("div",{className:o||void 0,style:c,onMouseDown:i,onTouchStart:l,children:n})}),Gj=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Br=globalThis&&globalThis.__assign||function(){return Br=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Br.apply(this,arguments)},Kj={width:"auto",height:"auto"},oi=function(e,t,r){return Math.max(Math.min(e,r),t)},X0=function(e,t,r){var n=Math.round(e/t);return n*t+r*(n-1)},bs=function(e,t){return new RegExp(e,"i").test(t)},ii=function(e){return!!(e.touches&&e.touches.length)},Yj=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Z0=function(e,t,r){r===void 0&&(r=0);var n=t.reduce(function(o,i,l){return Math.abs(i-e)<Math.abs(t[o]-e)?l:o},0),a=Math.abs(t[n]-e);return r===0||a<r?t[n]:e},wc=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},li=function(e,t,r,n){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var a=Number(e.replace("%",""))/100;return t*a}if(e.endsWith("vw")){var a=Number(e.replace("vw",""))/100;return r*a}if(e.endsWith("vh")){var a=Number(e.replace("vh",""))/100;return n*a}}return e},Jj=function(e,t,r,n,a,o,i){return n=li(n,e.width,t,r),a=li(a,e.height,t,r),o=li(o,e.width,t,r),i=li(i,e.height,t,r),{maxWidth:typeof n>"u"?void 0:Number(n),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof i>"u"?void 0:Number(i)}},Qj=function(e){return Array.isArray(e)?e:[e,e]},Xj=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],eg="__resizable_base__",Zj=function(e){Gj(t,e);function t(r){var n,a,o,i,l=e.call(this,r)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var c=l.parentNode;if(!c)return null;var d=l.window.document.createElement("div");return d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.transform="scale(0, 0)",d.style.left="0",d.style.flex="0 0 100%",d.classList?d.classList.add(eg):d.className+=eg,c.appendChild(d),d},l.removeBase=function(c){var d=l.parentNode;d&&d.removeChild(c)},l.state={isResizing:!1,width:(a=(n=l.propsSize)===null||n===void 0?void 0:n.width)!==null&&a!==void 0?a:"auto",height:(i=(o=l.propsSize)===null||o===void 0?void 0:o.height)!==null&&i!==void 0?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Kj},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var r=0,n=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,o=this.resizable.offsetHeight,i=this.resizable.style.position;i!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,n=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=i}return{width:r,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var r=this,n=this.props.size,a=function(l){var c;if(typeof r.state[l]>"u"||r.state[l]==="auto")return"auto";if(r.propsSize&&r.propsSize[l]&&(!((c=r.propsSize[l])===null||c===void 0)&&c.toString().endsWith("%"))){if(r.state[l].toString().endsWith("%"))return r.state[l].toString();var d=r.getParentSize(),u=Number(r.state[l].toString().replace("px","")),p=u/d[l]*100;return"".concat(p,"%")}return wc(r.state[l])},o=n&&typeof n.width<"u"&&!this.state.isResizing?wc(n.width):a("width"),i=n&&typeof n.height<"u"&&!this.state.isResizing?wc(n.height):a("height");return{width:o,height:i}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var n=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(n=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var o={width:r.offsetWidth,height:r.offsetHeight};return n&&(this.parentNode.style.flexWrap=a),this.removeBase(r),o},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(r,n){var a=this.propsSize&&this.propsSize[n];return this.state[n]==="auto"&&this.state.original[n]===r&&(typeof a>"u"||a==="auto")?"auto":r},t.prototype.calculateNewMaxFromBoundary=function(r,n){var a=this.props.boundsByDirection,o=this.state.direction,i=a&&bs("left",o),l=a&&bs("top",o),c,d;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(c=i?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),d=l?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=i?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=i?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(r=r&&r<c?r:c),d&&Number.isFinite(d)&&(n=n&&n<d?n:d),{maxWidth:r,maxHeight:n}},t.prototype.calculateNewSizeFromDirection=function(r,n){var a=this.props.scale||1,o=Qj(this.props.resizeRatio||1),i=o[0],l=o[1],c=this.state,d=c.direction,u=c.original,p=this.props,h=p.lockAspectRatio,y=p.lockAspectRatioExtraHeight,x=p.lockAspectRatioExtraWidth,v=u.width,w=u.height,f=y||0,g=x||0;return bs("right",d)&&(v=u.width+(r-u.x)*i/a,h&&(w=(v-g)/this.ratio+f)),bs("left",d)&&(v=u.width-(r-u.x)*i/a,h&&(w=(v-g)/this.ratio+f)),bs("bottom",d)&&(w=u.height+(n-u.y)*l/a,h&&(v=(w-f)*this.ratio+g)),bs("top",d)&&(w=u.height-(n-u.y)*l/a,h&&(v=(w-f)*this.ratio+g)),{newWidth:v,newHeight:w}},t.prototype.calculateNewSizeFromAspectRatio=function(r,n,a,o){var i=this.props,l=i.lockAspectRatio,c=i.lockAspectRatioExtraHeight,d=i.lockAspectRatioExtraWidth,u=typeof o.width>"u"?10:o.width,p=typeof a.width>"u"||a.width<0?r:a.width,h=typeof o.height>"u"?10:o.height,y=typeof a.height>"u"||a.height<0?n:a.height,x=c||0,v=d||0;if(l){var w=(h-x)*this.ratio+v,f=(y-x)*this.ratio+v,g=(u-v)/this.ratio+x,m=(p-v)/this.ratio+x,b=Math.max(u,w),_=Math.min(p,f),j=Math.max(h,g),N=Math.min(y,m);r=oi(r,b,_),n=oi(n,j,N)}else r=oi(r,u,p),n=oi(n,h,y);return{newWidth:r,newHeight:n}},t.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var a=n.getBoundingClientRect();this.parentLeft=a.left*r,this.parentTop=a.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*r,this.targetTop=o.top*r}if(this.resizable){var i=this.resizable.getBoundingClientRect(),l=i.left,c=i.top,d=i.right,u=i.bottom;this.resizableLeft=l*r,this.resizableRight=d*r,this.resizableTop=c*r,this.resizableBottom=u*r}},t.prototype.onResizeStart=function(r,n){if(!(!this.resizable||!this.window)){var a=0,o=0;if(r.nativeEvent&&Yj(r.nativeEvent)?(a=r.nativeEvent.clientX,o=r.nativeEvent.clientY):r.nativeEvent&&ii(r.nativeEvent)&&(a=r.nativeEvent.touches[0].clientX,o=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var i=this.props.onResizeStart(r,n,this.resizable);if(i===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var d=this.parentNode;if(d){var u=this.window.getComputedStyle(d).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",l=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var p={original:{x:a,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Br(Br({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:n,flexBasis:l};this.setState(p)}},t.prototype.onMouseMove=function(r){var n=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&ii(r))try{r.preventDefault(),r.stopPropagation()}catch{}var a=this.props,o=a.maxWidth,i=a.maxHeight,l=a.minWidth,c=a.minHeight,d=ii(r)?r.touches[0].clientX:r.clientX,u=ii(r)?r.touches[0].clientY:r.clientY,p=this.state,h=p.direction,y=p.original,x=p.width,v=p.height,w=this.getParentSize(),f=Jj(w,this.window.innerWidth,this.window.innerHeight,o,i,l,c);o=f.maxWidth,i=f.maxHeight,l=f.minWidth,c=f.minHeight;var g=this.calculateNewSizeFromDirection(d,u),m=g.newHeight,b=g.newWidth,_=this.calculateNewMaxFromBoundary(o,i);this.props.snap&&this.props.snap.x&&(b=Z0(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(m=Z0(m,this.props.snap.y,this.props.snapGap));var j=this.calculateNewSizeFromAspectRatio(b,m,{width:_.maxWidth,height:_.maxHeight},{width:l,height:c});if(b=j.newWidth,m=j.newHeight,this.props.grid){var N=X0(b,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),E=X0(m,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),$=this.props.snapGap||0,O=$===0||Math.abs(N-b)<=$?N:b,K=$===0||Math.abs(E-m)<=$?E:m;b=O,m=K}var I={width:b-y.width,height:m-y.height};if(this.delta=I,x&&typeof x=="string"){if(x.endsWith("%")){var ee=b/w.width*100;b="".concat(ee,"%")}else if(x.endsWith("vw")){var le=b/this.window.innerWidth*100;b="".concat(le,"vw")}else if(x.endsWith("vh")){var re=b/this.window.innerHeight*100;b="".concat(re,"vh")}}if(v&&typeof v=="string"){if(v.endsWith("%")){var ee=m/w.height*100;m="".concat(ee,"%")}else if(v.endsWith("vw")){var le=m/this.window.innerWidth*100;m="".concat(le,"vw")}else if(v.endsWith("vh")){var re=m/this.window.innerHeight*100;m="".concat(re,"vh")}}var W={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(m,"height")};this.flexDir==="row"?W.flexBasis=W.width:this.flexDir==="column"&&(W.flexBasis=W.height);var L=this.state.width!==W.width,z=this.state.height!==W.height,A=this.state.flexBasis!==W.flexBasis,B=L||z||A;B&&jo.flushSync(function(){n.setState(W)}),this.props.onResize&&B&&this.props.onResize(r,h,this.resizable,I)}},t.prototype.onMouseUp=function(r){var n,a,o=this.state,i=o.isResizing,l=o.direction;o.original,!(!i||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(r,l,this.resizable,this.delta),this.props.size&&this.setState({width:(n=this.props.size.width)!==null&&n!==void 0?n:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Br(Br({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(r){var n,a;this.setState({width:(n=r.width)!==null&&n!==void 0?n:"auto",height:(a=r.height)!==null&&a!==void 0?a:"auto"})},t.prototype.renderResizer=function(){var r=this,n=this.props,a=n.enable,o=n.handleStyles,i=n.handleClasses,l=n.handleWrapperStyle,c=n.handleWrapperClass,d=n.handleComponent;if(!a)return null;var u=Object.keys(a).map(function(p){return a[p]!==!1?s.jsx(Vj,{direction:p,onResizeStart:r.onResizeStart,replaceStyles:o&&o[p],className:i&&i[p],children:d&&d[p]?d[p]:null},p):null});return s.jsx("div",{className:c,style:l,children:u})},t.prototype.render=function(){var r=this,n=Object.keys(this.props).reduce(function(i,l){return Xj.indexOf(l)!==-1||(i[l]=r.props[l]),i},{}),a=Br(Br(Br({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return s.jsxs(o,Br({style:a,className:this.props.className},n,{ref:function(i){i&&(r.resizable=i)},children:[this.state.isResizing&&s.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(k.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ad=function(e,t){return Ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a])},Ad(e,t)};function eN(e,t){Ad(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bt=function(){return bt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},bt.apply(this,arguments)};function tN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var rN={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},nN=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},sN=function(e){eN(t,e);function t(r){var n=e.call(this,r)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:r.maxWidth,maxHeight:r.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var r=this.offsetFromParent,n=r.left,a=r.top,o=this.getDraggablePosition(),i=o.x,l=o.y;this.draggable.setState({x:i-n,y:l-a}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var r=this.draggable.state,n=r.x,a=r.y;return{x:n,y:a}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var r=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,n=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:r,maxHeight:n}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(r){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/n;case"body":return document.body.offsetHeight/n;default:return r.offsetHeight}},t.prototype.getOffsetWidth=function(r){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/n;case"body":return document.body.offsetWidth/n;default:return r.offsetWidth}},t.prototype.onDragStart=function(r,n){this.props.onDragStart&&this.props.onDragStart(r,n);var a=this.getDraggablePosition();if(this.originalPosition=a,!!this.props.bounds){var o=this.getParent(),i=this.props.scale,l;if(this.props.bounds==="parent")l=o;else if(this.props.bounds==="body"){var c=o.getBoundingClientRect(),d=c.left,u=c.top,p=document.body.getBoundingClientRect(),h=-(d-o.offsetLeft*i-p.left)/i,y=-(u-o.offsetTop*i-p.top)/i,x=(document.body.offsetWidth-this.resizable.size.width*i)/i+h,v=(document.body.offsetHeight-this.resizable.size.height*i)/i+y;return this.setState({bounds:{top:y,right:x,bottom:v,left:h}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var w=o.getBoundingClientRect(),f=w.left,g=w.top,m=-(f-o.offsetLeft*i)/i,b=-(g-o.offsetTop*i)/i,x=(window.innerWidth-this.resizable.size.width*i)/i+m,v=(window.innerHeight-this.resizable.size.height*i)/i+b;return this.setState({bounds:{top:b,right:x,bottom:v,left:m}})}else typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(o instanceof HTMLElement))){var _=l.getBoundingClientRect(),j=_.left,N=_.top,E=o.getBoundingClientRect(),$=E.left,O=E.top,K=(j-$)/i,I=N-O;if(this.resizable){this.updateOffsetFromParent();var ee=this.offsetFromParent;this.setState({bounds:{top:I-ee.top,right:K+(l.offsetWidth-this.resizable.size.width)-ee.left/i,bottom:I+(l.offsetHeight-this.resizable.size.height)-ee.top,left:K-ee.left/i}})}}}},t.prototype.onDrag=function(r,n){if(this.props.onDrag){var a=this.offsetFromParent,o=a.left,i=a.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(r,bt(bt({},n),{x:n.x+o,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDrag(r,bt(bt({},n),{x:n.x+o,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(r,bt(bt({},n),{x:this.originalPosition.x+o,y:n.y+i,deltaX:0}))}},t.prototype.onDragStop=function(r,n){if(this.props.onDragStop){var a=this.offsetFromParent,o=a.left,i=a.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(r,bt(bt({},n),{x:n.x+o,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDragStop(r,bt(bt({},n),{x:n.x+o,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(r,bt(bt({},n),{x:this.originalPosition.x+o,y:n.y+i,deltaX:0}))}},t.prototype.onResizeStart=function(r,n,a){r.stopPropagation(),this.setState({resizing:!0});var o=this.props.scale,i=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+i.left,y:l.y+i.top},this.originalPosition=l,this.props.bounds){var c=this.getParent(),d=void 0;this.props.bounds==="parent"?d=c:this.props.bounds==="body"?d=document.body:this.props.bounds==="window"?d=window:typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(d instanceof HTMLElement||d===window)&&c instanceof HTMLElement){var p=this.getMaxSizesFromProps(),h=p.maxWidth,y=p.maxHeight,x=this.getParentSize();if(h&&typeof h=="string")if(h.endsWith("%")){var v=Number(h.replace("%",""))/100;h=x.width*v}else h.endsWith("px")&&(h=Number(h.replace("px","")));if(y&&typeof y=="string")if(y.endsWith("%")){var v=Number(y.replace("%",""))/100;y=x.height*v}else y.endsWith("px")&&(y=Number(y.replace("px","")));var w=u.getBoundingClientRect(),f=w.left,g=w.top,m=this.props.bounds==="window"?{left:0,top:0}:d.getBoundingClientRect(),b=m.left,_=m.top,j=this.getOffsetWidth(d),N=this.getOffsetHeight(d),E=n.toLowerCase().endsWith("left"),$=n.toLowerCase().endsWith("right"),O=n.startsWith("top"),K=n.startsWith("bottom");if((E||O)&&this.resizable){var I=(f-b)/o+this.resizable.size.width;this.setState({maxWidth:I>Number(h)?h:I})}if($||this.props.lockAspectRatio&&!E&&!O){var I=j+(b-f)/o;this.setState({maxWidth:I>Number(h)?h:I})}if((O||E)&&this.resizable){var I=(g-_)/o+this.resizable.size.height;this.setState({maxHeight:I>Number(y)?y:I})}if(K||this.props.lockAspectRatio&&!O&&!E){var I=N+(_-g)/o;this.setState({maxHeight:I>Number(y)?y:I})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(r,n,a)},t.prototype.onResize=function(r,n,a,o){var i=this,l={x:this.originalPosition.x,y:this.originalPosition.y},c=-o.width,d=-o.height,u=["top","left","topLeft","bottomLeft","topRight"];u.includes(n)&&(n==="bottomLeft"?l.x+=c:(n==="topRight"||(l.x+=c),l.y+=d));var p=this.draggable.state;(l.x!==p.x||l.y!==p.y)&&jo.flushSync(function(){i.draggable.setState(l)}),this.updateOffsetFromParent();var h=this.offsetFromParent,y=this.getDraggablePosition().x+h.left,x=this.getDraggablePosition().y+h.top;this.resizingPosition={x:y,y:x},this.props.onResize&&this.props.onResize(r,n,a,o,{x:y,y:x})},t.prototype.onResizeStop=function(r,n,a,o){this.setState({resizing:!1});var i=this.getMaxSizesFromProps(),l=i.maxWidth,c=i.maxHeight;this.setState({maxWidth:l,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(r,n,a,o,this.resizingPosition)},t.prototype.updateSize=function(r){this.resizable&&this.resizable.updateSize({width:r.width,height:r.height})},t.prototype.updatePosition=function(r){this.draggable.setState(r)},t.prototype.updateOffsetFromParent=function(){var r=this.props.scale,n=this.getParent(),a=this.getSelfElement();if(!n||a===null)return{top:0,left:0};var o=n.getBoundingClientRect(),i=o.left,l=o.top,c=a.getBoundingClientRect(),d=this.getDraggablePosition(),u=n.scrollLeft,p=n.scrollTop;this.offsetFromParent={left:c.left-i+u-d.x*r,top:c.top-l+p-d.y*r}},t.prototype.render=function(){var r=this,n=this.props,a=n.disableDragging,o=n.style,i=n.dragHandleClassName,l=n.position,c=n.onMouseDown,d=n.onMouseUp,u=n.dragAxis,p=n.dragGrid,h=n.bounds,y=n.enableUserSelectHack,x=n.cancel,v=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var w=n.resizeHandleStyles,f=n.resizeHandleClasses,g=n.resizeHandleComponent,m=n.enableResizing,b=n.resizeGrid,_=n.resizeHandleWrapperClass,j=n.resizeHandleWrapperStyle,N=n.scale,E=n.allowAnyClick,$=n.dragPositionOffset,O=tN(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),K=this.props.default?bt({},this.props.default):void 0;delete O.default;var I=a||i?{cursor:"auto"}:{cursor:"move"},ee=bt(bt(bt({},rN),I),o),le=this.offsetFromParent,re=le.left,W=le.top,L;l&&(L={x:l.x-re,y:l.y-W});var z=this.state.resizing?void 0:L,A=this.state.resizing?"both":u;return k.createElement(Wj,{ref:function(B){B&&(r.draggable=B)},handle:i?".".concat(i):void 0,defaultPosition:K,onMouseDown:c,onMouseUp:d,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:A,disabled:a,grid:p,bounds:h?this.state.bounds:void 0,position:z,enableUserSelectHack:y,cancel:x,scale:N,allowAnyClick:E,nodeRef:this.resizableElement,positionOffset:$},k.createElement(Zj,bt({},O,{ref:function(B){B&&(r.resizable=B,r.resizableElement.current=B.resizable)},defaultSize:K,size:this.props.size,enable:typeof m=="boolean"?nN(m):m,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:ee,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:b,handleWrapperClass:_,handleWrapperStyle:j,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:w,handleClasses:f,handleComponent:g,scale:this.props.scale}),v))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(k.PureComponent),tg;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(tg||(tg={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rg;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(rg||(rg={}));var ng;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ng||(ng={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=["user","model","function","system"];var ag;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ag||(ag={}));var og;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(og||(og={}));var ig;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ig||(ig={}));var lg;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(lg||(lg={}));var Ha;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Ha||(Ha={}));var cg;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(cg||(cg={}));var dg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(dg||(dg={}));var ug;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ug||(ug={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class vs extends Rt{constructor(t,r){super(t),this.response=r}}class wy extends Rt{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class On extends Rt{}class ky extends Rt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="https://generativelanguage.googleapis.com",oN="v1beta",iN="0.24.1",lN="genai-js";var is;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(is||(is={}));class cN{constructor(t,r,n,a,o){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=o}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||oN;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||aN}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function dN(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${lN}/${iN}`),t.join(" ")}async function uN(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",dN(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new On(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,o]of n.entries()){if(a==="x-goog-api-key")throw new On(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new On(`Header name ${a} can only be set using the apiClient field`);r.append(a,o)}}return r}async function hN(e,t,r,n,a,o){const i=new cN(e,t,r,n,o);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},pN(o)),{method:"POST",headers:await uN(i),body:a})}}async function So(e,t,r,n,a,o={},i=fetch){const{url:l,fetchOptions:c}=await hN(e,t,r,n,a,o);return gN(l,c,i)}async function gN(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){fN(a,e)}return n.ok||await mN(n,e),n}function fN(e,t){let r=e;throw r.name==="AbortError"?(r=new ky(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof wy||e instanceof On||(r=new Rt(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function mN(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new wy(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function pN(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new vs(`${xn(e)}`,e);return yN(e)}else if(e.promptFeedback)throw new vs(`Text not available. ${xn(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new vs(`${xn(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),hg(e)[0]}else if(e.promptFeedback)throw new vs(`Function call not available. ${xn(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ni(e.candidates[0]))throw new vs(`${xn(e)}`,e);return hg(e)}else if(e.promptFeedback)throw new vs(`Function call not available. ${xn(e)}`,e)},e}function yN(e){var t,r,n,a;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&o.push(i.text),i.executableCode&&o.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&o.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function hg(e){var t,r,n,a;const o=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&o.push(i.functionCall);if(o.length>0)return o}const xN=[Ha.RECITATION,Ha.SAFETY,Ha.LANGUAGE];function Ni(e){return!!e.finishReason&&xN.includes(e.finishReason)}function xn(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const o=e.candidates[0];Ni(o)&&(a+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(a+=`: ${o.finishMessage}`))}return a}function po(e){return this instanceof po?(this.v=e,this):new po(e)}function bN(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,o=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(y){return new Promise(function(x,v){o.push([h,y,x,v])>1||l(h,y)})})}function l(h,y){try{c(n[h](y))}catch(x){p(o[0][3],x)}}function c(h){h.value instanceof po?Promise.resolve(h.value.v).then(d,u):p(o[0][2],h)}function d(h){l("next",h)}function u(h){l("throw",h)}function p(h,y){h(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function vN(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=jN(t),[n,a]=r.tee();return{stream:kN(n),response:wN(a)}}async function wN(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return Hu(NN(t));t.push(a)}}function kN(e){return bN(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield po(r.read());if(a)break;yield yield po(Hu(n))}})}function jN(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return o();function o(){return t.read().then(({value:i,done:l})=>{if(l){if(a.trim()){n.error(new Rt("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(gg),d;for(;c;){try{d=JSON.parse(c[1])}catch{n.error(new Rt(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(d),a=a.substring(c[0].length),c=a.match(gg)}return o()}).catch(i=>{let l=i;throw l.stack=i.stack,l.name==="AbortError"?l=new ky("Request aborted when reading from the stream"):l=new Rt("Error reading from the stream"),l})}}})}function NN(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const o of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=o.citationMetadata,r.candidates[a].groundingMetadata=o.groundingMetadata,r.candidates[a].finishReason=o.finishReason,r.candidates[a].finishMessage=o.finishMessage,r.candidates[a].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[a].content||(r.candidates[a].content={role:o.content.role||"user",parts:[]});const i={};for(const l of o.content.parts)l.text&&(i.text=l.text),l.functionCall&&(i.functionCall=l.functionCall),l.executableCode&&(i.executableCode=l.executableCode),l.codeExecutionResult&&(i.codeExecutionResult=l.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(e,t,r,n){const a=await So(t,is.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return vN(a)}async function Ny(e,t,r,n){const o=await(await So(t,is.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:Hu(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function yo(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return _N(t)}function _N(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const o of e)"functionResponse"in o?(r.parts.push(o),a=!0):(t.parts.push(o),n=!0);if(n&&a)throw new Rt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Rt("No content is provided for sending chat message.");return n?t:r}function SN(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new On("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const o=yo(e);n.contents=[o]}return{generateContentRequest:n}}function fg(e){let t;return e.contents?t=e:t={contents:[yo(e)]},e.systemInstruction&&(t.systemInstruction=_y(e.systemInstruction)),t}function EN(e){return typeof e=="string"||Array.isArray(e)?{content:yo(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],CN={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function TN(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Rt(`First content should be with role 'user', got ${n}`);if(!sg.includes(n))throw new Rt(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(sg)}`);if(!Array.isArray(a))throw new Rt("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Rt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of mg)c in l&&(o[c]+=1);const i=CN[n];for(const l of mg)if(!i.includes(l)&&o[l]>0)throw new Rt(`Content with role '${n}' can't contain '${l}' part`);t=!0}}function pg(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="SILENT_ERROR";class AN{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(TN(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,o,i,l,c;await this._sendPromise;const d=yo(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Ny(this._apiKey,this.model,u,p)).then(y=>{var x;if(pg(y.response)){this._history.push(d);const v=Object.assign({parts:[],role:"model"},(x=y.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(v)}else{const v=xn(y.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}h=y}).catch(y=>{throw this._sendPromise=Promise.resolve(),y}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,o,i,l,c;await this._sendPromise;const d=yo(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),r),h=jy(this._apiKey,this.model,u,p);return this._sendPromise=this._sendPromise.then(()=>h).catch(y=>{throw new Error(yg)}).then(y=>y.response).then(y=>{if(pg(y)){this._history.push(d);const x=Object.assign({},y.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=xn(y);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(y=>{y.message!==yg&&console.error(y)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(e,t,r,n){return(await So(t,is.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(e,t,r,n){return(await So(t,is.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function MN(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await So(t,is.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=_y(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=fg(t),o=Object.assign(Object.assign({},this._requestOptions),r);return Ny(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),o)}async generateContentStream(t,r={}){var n;const a=fg(t),o=Object.assign(Object.assign({},this._requestOptions),r);return jy(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),o)}startChat(t){var r;return new AN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=SN(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return PN(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=EN(t),a=Object.assign(Object.assign({},this._requestOptions),r);return ON(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return MN(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Rt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new xg(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new On("Cached content must contain a `name` field.");if(!t.model)throw new On("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new On(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const o=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new xg(this.apiKey,o,n)}}const RN="AIzaSyDMMXxZSQABzr5wTWxecIKrzvOcrtbkdVk",IN=new DN(RN),$N=IN.getGenerativeModel({model:"gemini-2.0-flash"}),LN=["Who has the best attendance?","Add a new member","Go to Analytics","Summary of this month","Draft an announcement"],zN=({isOpen:e,onClose:t,onNavigate:r})=>{const{setDashboardTab:n,members:a,currentTable:o,monthlyTables:i}=Ct(),[l,c]=k.useState([{id:1,type:"bot",text:"Hi!  I'm your TMH Assistant powered by Google Gemini. I have access to your member data and can answer questions or navigate for you!",timestamp:new Date}]),[d,u]=k.useState(""),[p,h]=k.useState(!1),y=k.useRef(null),x=k.useRef(null),[v,w]=k.useState(!1);k.useEffect(()=>{const N=()=>w(window.innerWidth<640);return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const f=N=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const E=new SpeechSynthesisUtterance(N);E.rate=1,E.pitch=1,window.speechSynthesis.speak(E)}};k.useEffect(()=>{var N;(N=y.current)==null||N.scrollIntoView({behavior:"smooth"})},[l]),k.useEffect(()=>{e&&setTimeout(()=>{var N;return(N=x.current)==null?void 0:N.focus()},100)},[e]);const g=(N,E)=>{r&&r(N,E),N==="dashboard"&&(E!=null&&E.tab)&&n(E.tab),t&&t()},m=async()=>{var E,$;if(!d.trim())return;const N={id:Date.now(),type:"user",text:d.trim(),timestamp:new Date};c(O=>[...O,N]),u(""),h(!0);try{const O=(a==null?void 0:a.map(A=>`- ${A.full_name} (${A.gender}, ${A.current_level}, Status: ${A.is_visitor?"Visitor":"Member"})`).join(`
`))||"No members found.",K=`
        You are the TMH Teen Ministry Assistant, an AI agent helping to manage a church youth group.
        
        SYSTEM CONTEXT:
        - Current Month/Table: ${o}
        - Total Members: ${(a==null?void 0:a.length)||0}
        - Available Tables: ${(i==null?void 0:i.join(", "))||"None"}
        - List of Members:
${O}
        
        INSTRUCTIONS:
        1. Answer users' questions about their data (attendance, member lists, stats).
        2. BE BRIEF. Limit answers to 1-2 paragraphs.
        3. NAVIGATION: If the user explicitly asks to "Go to" or "Open" a page, verify which page and add a short confirmation.
           (The system will check your text for keywords 'dashboard', 'settings', 'admin', 'analytics' to add a button).
        4. If asked to add a member, say "I can open the form for you."
        
        USER QUESTION: "${N.text}"
      `,le=(await(await $N.generateContent(K)).response).text();let re=null;const W=N.text.toLowerCase(),L=le.toLowerCase();W.includes("dashboard")||W.includes("home")?re={label:"Go to Dashboard",onClick:()=>g("dashboard")}:W.includes("settings")?re={label:"Open Settings",onClick:()=>g("settings")}:W.includes("admin")?re={label:"Open Admin",onClick:()=>g("admin")}:W.includes("analytics")||W.includes("stats")?re={label:"View Analytics",onClick:()=>g("analytics")}:(W.includes("add member")||W.includes("new member"))&&(re={label:"Add Member",onClick:()=>g("dashboard",{openModal:"addMember"})});const z={id:Date.now()+1,type:"bot",text:le,action:re,timestamp:new Date};c(A=>[...A,z])}catch(O){console.error("Gemini Error:",O);let K="I'm having trouble connecting to Gemini. Please check your internet connection.";((E=O.message)!=null&&E.includes("429")||($=O.message)!=null&&$.includes("Too Many Requests"))&&(K="I'm receiving too many requests right now. Please wait a moment before asking again."),c(I=>[...I,{id:Date.now()+1,type:"bot",text:K,timestamp:new Date}])}finally{h(!1)}},b=N=>{u(N),setTimeout(()=>m(),100)},_=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),m())};if(!e)return null;const j=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`chat-header bg-gradient-to-r from-blue-500 to-purple-600 p-4 flex items-center justify-between ${v?"":"cursor-move select-none"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:s.jsx(h0,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white text-sm",children:"TMH Assistant"}),s.jsx("p",{className:"text-[10px] text-white/70",children:v?"AI Assistant":"Drag to move  Resize corners"})]})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("button",{onClick:t,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors text-white",title:"Close",onMouseDown:N=>N.stopPropagation(),children:s.jsx(Ye,{className:"w-4 h-4"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-transparent scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600",children:[l.map(N=>s.jsxs("div",{className:`flex flex-col ${N.type==="user"?"items-end":"items-start"}`,children:[s.jsxs("div",{className:`flex gap-2 max-w-[90%] ${N.type==="user"?"flex-row-reverse":""}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1 shadow-sm ${N.type==="user"?"bg-blue-500 text-white":"bg-white/80 dark:bg-gray-800/80 text-purple-600 dark:text-purple-400 border border-purple-100 dark:border-purple-900"}`,children:N.type==="user"?s.jsx(sn,{className:"w-4 h-4"}):s.jsx(ta,{className:"w-4 h-4"})}),s.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm shadow-sm backdrop-blur-sm ${N.type==="user"?"bg-blue-500 text-white rounded-tr-none":"bg-white/80 dark:bg-gray-800/80 text-gray-800 dark:text-gray-200 rounded-tl-none border border-gray-100 dark:border-gray-700"}`,children:[s.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:N.text}),N.action&&s.jsxs("button",{onClick:N.action.onClick,className:"mt-3 flex items-center gap-2 px-3 py-1.5 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg text-xs font-medium hover:bg-purple-100 dark:hover:bg-purple-900/50 transition-colors w-full",children:[s.jsx(Ov,{className:"w-3.5 h-3.5"}),N.action.label]})]})]}),N.type==="bot"&&s.jsx("button",{onClick:()=>f(N.text),className:"ml-11 mt-1 text-gray-400 hover:text-purple-500 transition-colors p-1",title:"Read aloud",children:s.jsx(Kv,{className:"w-3 h-3"})})]},N.id)),p&&s.jsxs("div",{className:"flex gap-2 items-center ml-1",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-600 flex items-center justify-center",children:s.jsx(h0,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex gap-1 bg-gray-200/50 dark:bg-gray-700/50 px-3 py-2 rounded-full",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),s.jsx("div",{ref:y})]}),l.length<4&&s.jsx("div",{className:"px-4 py-2 bg-transparent border-t border-gray-100/20 dark:border-gray-700/20",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-none",children:LN.map((N,E)=>s.jsx("button",{onClick:()=>b(N),className:"whitespace-nowrap px-3 py-1.5 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 rounded-full text-xs text-gray-600 dark:text-gray-300 hover:border-purple-400 dark:hover:border-purple-500 hover:text-purple-600 dark:hover:text-purple-400 transition-all shadow-sm",children:N},E))})}),s.jsx("div",{className:"p-3 bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 pb-safe",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:x,type:"text",value:d,onChange:N=>u(N.target.value),onKeyPress:_,placeholder:"Ask AI or say 'Go to...'",className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200/50 dark:border-gray-700/50 bg-white/80 dark:bg-gray-900/80 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/50 text-sm backdrop-blur-sm"}),s.jsx("button",{onClick:m,disabled:!d.trim(),className:"p-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md shadow-purple-200 dark:shadow-none",children:s.jsx(Wv,{className:"w-5 h-5"})})]})})]});return v?s.jsx("div",{className:"fixed inset-0 z-[100] flex flex-col bg-white dark:bg-gray-900 safe-area-bottom",children:j}):s.jsx(sN,{default:{x:typeof window<"u"&&window.innerWidth-420>0?window.innerWidth-420:20,y:typeof window<"u"&&window.innerHeight-600>0?window.innerHeight-600:80,width:380,height:550},minWidth:300,minHeight:400,bounds:"window",style:{display:"flex",flexDirection:"column"},className:"z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",dragHandleClassName:"chat-header",children:j})};function FN({isMobile:e,onShowDecemberPreview:t}){const{preferences:r}=Lr(),[n,a]=k.useState("dashboard"),[o,i]=k.useState(()=>localStorage.getItem("tmht_admin_session")==="true"),[l,c]=k.useState(!1),[d,u]=k.useState(!1),[p,h]=k.useState(!1),[y,x]=k.useState(()=>!localStorage.getItem("onboardingComplete")&&!(r!=null&&r.workspace_name)),[v,w]=k.useState(!1),[f,g]=k.useState(!1),[m,b]=k.useState(!1),_=(j,N)=>{a(j),(N==null?void 0:N.openModal)==="addMember"&&setTimeout(()=>c(!0),100)};return k.useEffect(()=>(window.openWorkspaceSettings=()=>w(!0),window.openDeleteAccount=()=>g(!0),window.openExportData=()=>b(!0),window.openSettings=()=>a("settings"),()=>{delete window.openWorkspaceSettings,delete window.openDeleteAccount,delete window.openExportData,delete window.openSettings}),[]),s.jsxs("div",{className:`min-app-vh bg-gray-50 dark:bg-gray-900 transition-colors duration-200 ios-overscroll-none ${e?"mobile-toast-top":""}`,children:[s.jsx(D1,{currentView:n,setCurrentView:a,isAdmin:o,setIsAdmin:i,onAddMember:()=>c(!0),onCreateMonth:()=>u(!0),onShowDecemberPreview:t,onToggleAIChat:()=>h(j=>!j)}),s.jsxs("main",{className:`container mx-auto px-4 py-8 pt-24 md:pt-20 ${n==="admin"?"pt-8":""}`,children:[n==="dashboard"&&s.jsx(F1,{isAdmin:o}),n==="analytics"&&s.jsx(U1,{}),n==="admin"&&s.jsx(B1,{setCurrentView:a,onLogout:()=>{localStorage.removeItem("tmht_admin_session"),i(!1),a("dashboard")},onShowDecemberPreview:t}),n==="settings"&&s.jsx(ej,{onBack:()=>a("dashboard")})]}),l&&s.jsx(ny,{isOpen:l,onClose:()=>c(!1)}),d&&s.jsx(sy,{isOpen:d,onClose:()=>u(!1)}),s.jsx(ay,{isOpen:v,onClose:()=>w(!1)}),s.jsx(oy,{isOpen:f,onClose:()=>g(!1)}),s.jsx(iy,{isOpen:m,onClose:()=>b(!1)}),s.jsx(tj,{isOpen:y,onClose:()=>x(!1),onNavigate:_}),s.jsx(zN,{isOpen:p,onClose:()=>h(!1)}),s.jsx(md,{position:e?"top-center":"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,style:e?{top:"calc(env(safe-area-inset-top) + 8px)"}:{bottom:"calc(env(safe-area-inset-bottom) + 8px)"}})]})}function UN({isMobile:e}){const{isAuthenticated:t,loading:r}=Lr(),[n,a]=k.useState(()=>localStorage.getItem("tmht_skip_december_preview")==="true"),[o,i]=k.useState(!0),l=()=>{localStorage.setItem("tmht_skip_december_preview","true"),a(!0)},c=()=>{localStorage.setItem("tmht_skip_december_preview","false"),a(!1)};return r?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):n?t?s.jsx(A1,{children:s.jsx(FN,{isMobile:e,onShowDecemberPreview:c})}):s.jsx(q1,{}):s.jsx(V1,{onOpenFullApp:l,showPreview:o,onTogglePreview:()=>i(d=>!d)})}function BN(){const[e,t]=k.useState(!1);return k.useEffect(()=>{/iPhone|iPad|iPod/i.test(navigator.userAgent)&&document.documentElement.classList.add("is-ios");const n=window.matchMedia?window.matchMedia("(pointer: coarse)"):null,a=window.matchMedia?window.matchMedia("(max-width: 768px)"):null,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),i=()=>o||((n==null?void 0:n.matches)??!1)||((a==null?void 0:a.matches)??!1);t(i());const l=()=>t(i());n==null||n.addEventListener("change",l),a==null||a.addEventListener("change",l);const c=window.visualViewport,d=()=>{if(!c)return;const u=Math.max(0,window.innerHeight-c.height);document.documentElement.style.setProperty("--keyboard-offset",`${u}px`)};return c==null||c.addEventListener("resize",d),c==null||c.addEventListener("scroll",d),d(),()=>{c==null||c.removeEventListener("resize",d),c==null||c.removeEventListener("scroll",d),n==null||n.removeEventListener("change",l),a==null||a.removeEventListener("change",l)}},[]),s.jsx(P1,{children:s.jsx(H1,{children:s.jsx(S1,{children:s.jsx(UN,{isMobile:e})})})})}kc.createRoot(document.getElementById("root")).render(s.jsx(He.StrictMode,{children:s.jsx(BN,{})}));
